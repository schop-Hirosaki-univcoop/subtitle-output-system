<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>質問受付フォーム</title>
  <link rel="stylesheet" href="question-form.css">
</head>
<body>
  <main class="form-shell">
    <header class="form-header">
      <h1 class="form-title">質問受付フォーム</h1>
      <p class="form-lead">ラジオネームと質問内容を入力して送信してください。URLに含まれる日程情報は自動的に反映されます。</p>
    </header>

    <section class="helper-card" aria-labelledby="csv-help-title">
      <div class="helper-card__body">
        <h2 id="csv-help-title">班番号リストの読み込み（任意）</h2>
        <p>ラジオネームと班番号が対応した <code>CSV</code> ファイルを読み込むと、ラジオネーム入力時に班番号が自動入力されます。同じブラウザでは次回以降も自動で利用されます。</p>
        <div class="helper-controls">
          <label class="file-picker">
            <span class="file-picker__label">CSVファイルを選択</span>
            <input type="file" id="csv-upload" accept=".csv,text/csv">
          </label>
          <div class="helper-status" id="csv-status" role="status" aria-live="polite">班番号リストは未読み込みです。</div>
        </div>
        <details class="helper-details">
          <summary>CSVの形式について</summary>
          <p>1列目にラジオネーム、2列目に班番号を配置してください。ヘッダー行（例: <code>ラジオネーム,班番号</code>）があっても読み込めます。</p>
        </details>
      </div>
    </section>

    <form id="question-form" class="question-card" autocomplete="on" novalidate>
      <fieldset class="form-fieldset">
        <legend class="visually-hidden">質問内容</legend>

        <label class="form-field" for="radio-name">
          <span class="field-label">ラジオネーム <span class="required">必須</span></span>
          <input id="radio-name" name="radio-name" type="text" inputmode="text" autocomplete="name" required>
        </label>

        <label class="form-field" for="question-text">
          <span class="field-label">質問・お悩み <span class="required">必須</span></span>
          <textarea id="question-text" name="question-text" rows="6" required placeholder="質問や相談内容を入力してください"></textarea>
        </label>

        <label class="form-field" for="group-number">
          <span class="field-label">班番号 <span class="optional">任意</span></span>
          <input id="group-number" name="group-number" type="text" inputmode="text" autocomplete="off" placeholder="例: 3">
          <small class="field-hint" id="group-hint">CSVを読み込むとラジオネームから自動入力されます。</small>
        </label>

        <label class="form-field" for="genre">
          <span class="field-label">ジャンル <span class="required">必須</span></span>
          <select id="genre" name="genre" required>
            <option value="学び">学び</option>
            <option value="活動">活動</option>
            <option value="暮らし">暮らし</option>
            <option value="食・スポット">食・スポット</option>
            <option value="移動・季節">移動・季節</option>
            <option value="その他">その他</option>
          </select>
        </label>

        <label class="form-field" for="schedule">
          <span class="field-label">日程 <span class="required">必須</span></span>
          <input id="schedule" name="schedule" type="text" required placeholder="例: 2024-05-01" readonly>
          <small class="field-hint" id="schedule-hint">このページのURLに含まれる日程情報が自動入力されます。</small>
        </label>

        <label class="form-field" for="answer-time">
          <span class="field-label">回答時間 <span class="optional">任意</span></span>
          <input id="answer-time" name="answer-time" type="text" inputmode="text" placeholder="例: 19:30頃">
        </label>
      </fieldset>

      <div class="form-actions">
        <button type="submit" class="submit-button">送信する</button>
        <p class="form-feedback" id="form-feedback" role="alert" aria-live="polite"></p>
      </div>
    </form>
  </main>

  <script src="question-form.js" type="module"></script>
</body>
</html>
