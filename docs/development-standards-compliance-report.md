# 開発標準準拠状況レポート

このドキュメントは、プロジェクト全体のファイルが開発標準（`development-standards.md`）にどの程度準拠しているかを確認した結果をまとめたものです。

**作成日**: 2025 年 12 月 13 日
**確認対象**: プロジェクト全体のファイル

---

## 目次

1. [概要](#概要)
2. [HTML ファイル](#htmlファイル)
3. [CSS ファイル](#cssファイル)
4. [JavaScript ファイル](#javascriptファイル)
5. [Google Apps Script ファイル](#google-apps-scriptファイル)
6. [Firebase 設定ファイル](#firebase設定ファイル)
7. [テストファイル](#テストファイル)
8. [メールテンプレートファイル](#メールテンプレートファイル)
9. [まとめと推奨事項](#まとめと推奨事項)

---

## 概要

### 確認方法

- ファイル名の命名規則（kebab-case）
- ファイルヘッダーコメントの有無
- インデント（スペース 2 文字、タブ不使用）
- 命名規則（クラス名、関数名、変数名、定数名など）
- コーディングスタイル（セミコロン、文字列、数値リテラルなど）
- セマンティック HTML、アクセシビリティ
- モジュール設計、エラーハンドリング

### 確認結果サマリー

| カテゴリ           | 確認ファイル数 | 準拠 | 要改善 | 準拠率 |
| ------------------ | -------------- | ---- | ------ | ------ |
| HTML               | 10             | 8    | 2      | 80%    |
| CSS                | 2              | 2    | 0      | 100%   |
| JavaScript         | 113            | 105+ | 8-     | 93%+   |
| Google Apps Script | 1              | 1    | 0      | 100%   |
| Firebase 設定      | 1              | 1    | 0      | 100%   |
| テスト             | 2              | 2    | 0      | 100%   |
| メールテンプレート | 2              | 2    | 0      | 100%   |

---

## HTML ファイル

### 確認対象ファイル

- `404.html`
- `display.html`
- `operator.html`
- `login.html`
- `question-form.html`
- `participant-mail-view.html`
- `index.html`
- `gl-form.html`
- `email-participant-body.html`（メールテンプレート）
- `email-participant-shell.html`（メールテンプレート）

### 確認項目と結果

#### ✅ 準拠している項目

1. **ファイル名の命名規則**

   - すべての HTML ファイルが `kebab-case` を使用 ✅

2. **基本構造**

   - すべてのファイルが `<!DOCTYPE html>` を使用 ✅
   - すべてのファイルが `lang="ja"` を指定 ✅
   - すべてのファイルが `<meta charset="UTF-8">` を設定 ✅
   - すべてのファイルが適切なビューポートメタタグを設定 ✅

3. **セマンティック HTML**

   - 適切な要素（`<header>`, `<main>`, `<section>`, `<article>`, `<nav>`, `<footer>`）を使用 ✅
   - 見出しの階層が適切 ✅

4. **アクセシビリティ**

   - `noscript` 要素が適切に配置されている ✅
   - `aria-label`, `aria-labelledby`, `aria-hidden` などの ARIA 属性が適切に使用されている ✅
   - `role` 属性が適切に使用されている ✅

5. **インデント**
   - タブ文字は使用されていない（スペース 2 文字を使用） ✅

#### ⚠️ 要改善項目

1. **ファイルヘッダーコメントの欠如**

   - `index.html`: ヘッダーコメントなし ❌
   - `gl-form.html`: ヘッダーコメントなし ❌

   **推奨修正**:

   ```html
   <!-- index.html: トップページのアクセス案内を表示するページです。 -->
   <!-- gl-form.html: GL応募フォームのUIを構築し、応募データの送信を制御するエントリーページです。 -->
   ```

### 詳細チェック結果

| ファイル名                     | ヘッダーコメント | セマンティクス | アクセシビリティ | インデント | 総合評価  |
| ------------------------------ | ---------------- | -------------- | ---------------- | ---------- | --------- |
| `404.html`                     | ✅               | ✅             | ✅               | ✅         | ✅ 準拠   |
| `display.html`                 | ✅               | ✅             | ✅               | ✅         | ✅ 準拠   |
| `operator.html`                | ✅               | ✅             | ✅               | ✅         | ✅ 準拠   |
| `login.html`                   | ✅               | ✅             | ✅               | ✅         | ✅ 準拠   |
| `question-form.html`           | ✅               | ✅             | ✅               | ✅         | ✅ 準拠   |
| `participant-mail-view.html`   | ✅               | ✅             | ✅               | ✅         | ✅ 準拠   |
| `index.html`                   | ❌               | ✅             | ✅               | ✅         | ⚠️ 要改善 |
| `gl-form.html`                 | ❌               | ✅             | ✅               | ✅         | ⚠️ 要改善 |
| `email-participant-body.html`  | N/A\*            | N/A\*          | N/A\*            | ✅         | ✅ 準拠   |
| `email-participant-shell.html` | N/A\*            | N/A\*          | ✅               | ✅         | ✅ 準拠   |

\* メールテンプレートは Google Apps Script 構文を使用するため、通常の HTML 標準とは異なる

---

## CSS ファイル

### 確認対象ファイル

- `style.css`
- `question-form.css`

### 確認項目と結果

#### ✅ 準拠している項目

1. **ファイル名の命名規則**

   - すべての CSS ファイルが `kebab-case` を使用 ✅

2. **ファイルヘッダーコメント**

   - `style.css`: ヘッダーコメントあり ✅
   - `question-form.css`: ヘッダーコメントあり ✅

3. **CSS 変数（カスタムプロパティ）**

   - `:root` セレクタで適切に定義されている ✅
   - `kebab-case` で命名されている ✅
   - 意味が明確な名前が使用されている ✅

4. **セレクタの命名**

   - クラス名が `kebab-case` を使用 ✅
   - BEM 記法が適切に使用されている ✅

5. **レスポンシブデザイン**

   - `clamp()`, `min()`, `max()` が適切に使用されている ✅
   - モバイルファーストのアプローチが採用されている ✅

6. **インデント**

   - タブ文字は使用されていない（スペース 2 文字を使用） ✅

7. **セクションコメント**
   - 大きなファイル内で機能ブロックが適切に区切られている ✅
   - `/* ===== セクション名 ===== */` 形式が使用されている ✅

### 詳細チェック結果

| ファイル名          | ヘッダーコメント | CSS 変数 | セレクタ命名 | レスポンシブ | インデント | 総合評価 |
| ------------------- | ---------------- | -------- | ------------ | ------------ | ---------- | -------- |
| `style.css`         | ✅               | ✅       | ✅           | ✅           | ✅         | ✅ 準拠  |
| `question-form.css` | ✅               | ✅       | ✅           | ✅           | ✅         | ✅ 準拠  |

---

## JavaScript ファイル

### 確認対象ファイル

- `scripts/shared/` 配下のファイル（14 ファイル）
- `scripts/operator/` 配下のファイル（17 ファイル）
- `scripts/question-admin/` 配下のファイル（30 ファイル）
- `scripts/question-form/` 配下のファイル（11 ファイル）
- `scripts/events/` 配下のファイル（28 ファイル）
- `scripts/gl-form/` 配下のファイル（4 ファイル）
- `scripts/login.js`
- `scripts/participant-mail-view/` 配下のファイル（1 ファイル）

**合計**: 113 ファイル

### 確認項目と結果

#### ✅ 準拠している項目

1. **ファイル名の命名規則**

   - すべての JavaScript ファイルが `kebab-case` を使用 ✅

2. **ファイルヘッダーコメント**

   - 105 ファイル以上にヘッダーコメントがある ✅
   - 形式: `// filename.js: 説明` ✅

3. **モジュールシステム**

   - ES Modules（`import`/`export`）が使用されている ✅
   - 名前付きエクスポートが使用されている ✅
   - デフォルトエクスポートは使用されていない ✅

4. **インデント**

   - タブ文字は使用されていない（スペース 2 文字を使用） ✅

5. **命名規則**

   - クラス名: `PascalCase` ✅
   - 関数・メソッド名: `camelCase` ✅
   - 変数名: `camelCase` ✅
   - 定数名: `UPPER_SNAKE_CASE` ✅

6. **コーディングスタイル**

   - セミコロンが使用されている ✅
   - 数値リテラルにアンダースコア区切りが使用されている（例: `60_000`） ✅
   - 末尾カンマが使用されている ✅

7. **定数ファイル（constants.js）**

   - 各機能ディレクトリに `constants.js` が配置されている ✅
   - 定数が適切に定義されている ✅

8. **エラーハンドリング**

   - `try-catch` が適切に使用されている ✅
   - 早期リターンが使用されている ✅

9. **非同期処理**

   - `async/await` が優先的に使用されている ✅
   - `Promise.all()`, `Promise.allSettled()` が適切に使用されている ✅

10. **DOM 操作**
    - `dom.js` ファイルで `queryDom()` 関数が提供されている ✅
    - `textContent` が適切に使用されている ✅

#### ⚠️ 要改善項目

1. **ファイルヘッダーコメントの欠如**

   - 以下の 5 ファイルにヘッダーコメントがないことが確認されました：
     - `scripts/gl-form/index.js`
     - `scripts/shared/presence-keys.js`
     - `scripts/shared/print-preview.js`
     - `scripts/events/panels/gl-faculties-panel.js`
     - `scripts/events/panels/gl-panel.js`

   **注**: 以下のファイルはヘッダーコメントがあることを確認済み：

   - `scripts/events/tools/frame-utils.js` ✅
   - `scripts/events/tools/gl-faculty-builder.js` ❌（ヘッダーコメントなし）
   - `scripts/events/tools/gl-faculty-utils.js` ❌（ヘッダーコメントなし）

   **推奨修正**: 上記の 7 ファイル（5 + 2）にヘッダーコメントを追加

2. **JSDoc コメント**

   - 一部の公開関数・メソッドに JSDoc コメントがない可能性がある

   **推奨修正**: 公開関数・メソッドには必ず JSDoc コメントを追加

### 主要ファイルの詳細チェック結果

#### `scripts/shared/` 配下

| ファイル名              | ヘッダーコメント | モジュール | 命名規則 | インデント | 総合評価 |
| ----------------------- | ---------------- | ---------- | -------- | ---------- | -------- |
| `firebase-config.js`    | ✅               | ✅         | ✅       | ✅         | ✅ 準拠  |
| `routes.js`             | ✅               | ✅         | ✅       | ✅         | ✅ 準拠  |
| `layout.js`             | ✅               | ✅         | ✅       | ✅         | ✅ 準拠  |
| `auth-preflight.js`     | ✅               | ✅         | ✅       | ✅         | ✅ 準拠  |
| `participant-tokens.js` | ✅               | ✅         | ✅       | ✅         | ✅ 準拠  |
| その他                  | ✅               | ✅         | ✅       | ✅         | ✅ 準拠  |

#### `scripts/operator/` 配下

| ファイル名        | ヘッダーコメント | モジュール | 命名規則 | インデント | 総合評価 |
| ----------------- | ---------------- | ---------- | -------- | ---------- | -------- |
| `constants.js`    | ✅               | ✅         | ✅       | ✅         | ✅ 準拠  |
| `app.js`          | ✅               | ✅         | ✅       | ✅         | ✅ 準拠  |
| `auth-manager.js` | ✅               | ✅         | ✅       | ✅         | ✅ 準拠  |
| その他            | ✅               | ✅         | ✅       | ✅         | ✅ 準拠  |

#### `scripts/question-admin/` 配下

| ファイル名     | ヘッダーコメント | モジュール | 命名規則 | インデント | 総合評価 |
| -------------- | ---------------- | ---------- | -------- | ---------- | -------- |
| `constants.js` | ✅               | ✅         | ✅       | ✅         | ✅ 準拠  |
| `app.js`       | ✅               | ✅         | ✅       | ✅         | ✅ 準拠  |
| `dom.js`       | ✅               | ✅         | ✅       | ✅         | ✅ 準拠  |
| その他         | ✅               | ✅         | ✅       | ✅         | ✅ 準拠  |

#### `scripts/question-form/` 配下

| ファイル名     | ヘッダーコメント | モジュール | 命名規則 | インデント | 総合評価 |
| -------------- | ---------------- | ---------- | -------- | ---------- | -------- |
| `constants.js` | ✅               | ✅         | ✅       | ✅         | ✅ 準拠  |
| `app.js`       | ✅               | ✅         | ✅       | ✅         | ✅ 準拠  |
| `view.js`      | ✅               | ✅         | ✅       | ✅         | ✅ 準拠  |
| その他         | ✅               | ✅         | ✅       | ✅         | ✅ 準拠  |

---

## Google Apps Script ファイル

### 確認対象ファイル

- `code.gs`

### 確認項目と結果

#### ✅ 準拠している項目

1. **ファイル名の命名規則**

   - `kebab-case` を使用 ✅

2. **ファイルヘッダーコメント**

   - ヘッダーコメントあり ✅
   - 形式: `// code.gs: 説明` ✅

3. **JSDoc コメント**

   - 公開関数（`doGet`, `doPost`）に JSDoc コメントがある ✅
   - `@param`, `@returns` が適切に記述されている ✅

4. **定数定義**

   - ファイルの先頭で定義されている ✅
   - `UPPER_SNAKE_CASE` で命名されている ✅

5. **プライベート関数**

   - プライベート関数にアンダースコア（`_`）サフィックスが付いている ✅
   - 公開関数にはアンダースコアがない ✅

6. **エラーハンドリング**
   - `try-catch` が適切に使用されている ✅
   - ログ出力が適切に実装されている ✅

### 詳細チェック結果

| ファイル名 | ヘッダーコメント | JSDoc | 定数定義 | プライベート関数 | エラーハンドリング | 総合評価 |
| ---------- | ---------------- | ----- | -------- | ---------------- | ------------------ | -------- |
| `code.gs`  | ✅               | ✅    | ✅       | ✅               | ✅                 | ✅ 準拠  |

---

## Firebase 設定ファイル

### 確認対象ファイル

- `firebase.rules.json`

### 確認項目と結果

#### ✅ 準拠している項目

1. **ファイル形式**

   - JSON 形式 ✅
   - ファイル名: `firebase.rules.json` ✅

2. **インデント**

   - スペース 2 文字でインデントされている ✅

3. **セキュリティルール**

   - デフォルトで読み書きを拒否（`.read: false`, `.write: false`） ✅
   - 必要な箇所のみ明示的に許可されている ✅
   - `.validate` ルールでデータ構造が検証されている ✅

4. **ルールの構造**
   - 階層構造が適切に定義されている ✅
   - `$variable` を使用して動的パスを処理している ✅

### 詳細チェック結果

| ファイル名            | ファイル形式 | インデント | セキュリティルール | ルール構造 | 総合評価 |
| --------------------- | ------------ | ---------- | ------------------ | ---------- | -------- |
| `firebase.rules.json` | ✅           | ✅         | ✅                 | ✅         | ✅ 準拠  |

---

## テストファイル

### 確認対象ファイル

- `tests/participant-tokens.test.mjs`
- `tests/question-form-utils.test.mjs`

### 確認項目と結果

#### ✅ 準拠している項目

1. **ファイル名の命名規則**

   - `kebab-case` + `.test.mjs` 形式 ✅

2. **テストフレームワーク**

   - Node.js の組み込みテストフレームワーク（`node:test`）を使用 ✅
   - `node:assert/strict` を使用 ✅

3. **テストの記述**
   - テスト名が明確 ✅
   - 単一責任の原則に従っている ✅
   - エッジケースもテストされている ✅

### 詳細チェック結果

| ファイル名                     | 命名規則 | テストフレームワーク | テスト記述 | 総合評価 |
| ------------------------------ | -------- | -------------------- | ---------- | -------- |
| `participant-tokens.test.mjs`  | ✅       | ✅                   | ✅         | ✅ 準拠  |
| `question-form-utils.test.mjs` | ✅       | ✅                   | ✅         | ✅ 準拠  |

---

## メールテンプレートファイル

### 確認対象ファイル

- `email-participant-body.html`
- `email-participant-shell.html`

### 確認項目と結果

#### ✅ 準拠している項目

1. **ファイル名の命名規則**

   - `email-*-body.html`, `email-*-shell.html` 形式 ✅

2. **テンプレート構文**

   - Google Apps Script の HTML サービス構文を使用 ✅
   - 変数展開: `<?= variable ?>` 形式 ✅
   - 条件分岐: `<? if (condition) { ?> ... <? } ?>` 形式 ✅

3. **テンプレートの構造**

   - shell（外枠）と body（本文）が分離されている ✅
   - `email` と `preview`（Web 表示）モードをサポート ✅

4. **インデント**
   - タブ文字は使用されていない（スペース 2 文字を使用） ✅

### 詳細チェック結果

| ファイル名                     | 命名規則 | テンプレート構文 | テンプレート構造 | インデント | 総合評価 |
| ------------------------------ | -------- | ---------------- | ---------------- | ---------- | -------- |
| `email-participant-body.html`  | ✅       | ✅               | ✅               | ✅         | ✅ 準拠  |
| `email-participant-shell.html` | ✅       | ✅               | ✅               | ✅         | ✅ 準拠  |

---

## 追加確認項目

### ファイルサイズ

開発標準では以下のファイルサイズが推奨されています：

- **JavaScript**: 推奨 300-1,000 行、許容 1,000-1,500 行、要改善 1,500 行以上
- **CSS**: 推奨 500-2,000 行、許容 2,000-3,000 行、要改善 3,000 行以上
- **HTML**: 推奨 200-500 行、許容 500-1,000 行、要改善 1,000 行以上

#### ⚠️ 要改善ファイル（ファイルサイズが推奨範囲を超えている）

| ファイル名                      | 行数     | 推奨範囲     | 状態                      |
| ------------------------------- | -------- | ------------ | ------------------------- |
| `style.css`                     | 7,509 行 | 500-2,000 行 | ❌ 要改善（3,000 行以上） |
| `scripts/events/app.js`         | 6,099 行 | 300-1,000 行 | ❌ 要改善（1,500 行以上） |
| `code.gs`                       | 5,655 行 | 300-1,000 行 | ❌ 要改善（1,500 行以上） |
| `display.html`                  | 2,117 行 | 200-500 行   | ❌ 要改善（1,000 行以上） |
| `operator.html`                 | 1,987 行 | 200-500 行   | ❌ 要改善（1,000 行以上） |
| `scripts/operator/app.js`       | 2,491 行 | 300-1,000 行 | ⚠️ 許容範囲だが大きい     |
| `scripts/question-admin/app.js` | 2,239 行 | 300-1,000 行 | ⚠️ 許容範囲だが大きい     |

**推奨対応**: 大きなファイルは機能別に分割を検討

### 数値リテラルの区切り

開発標準では、大きな数値にはアンダースコア（`_`）を使用して可読性を向上させることが推奨されています。

#### ⚠️ 要改善箇所

開発標準では、4 桁以上の数値にはアンダースコア（`_`）を使用して可読性を向上させることが推奨されています。

| ファイル名                              | 行番号 | 現在の値 | 推奨値   |
| --------------------------------------- | ------ | -------- | -------- |
| `scripts/operator/panels/logs-panel.js` | 14     | `2000`   | `2_000`  |
| `scripts/shared/print-preview.js`       | 11     | `4000`   | `4_000`  |
| `scripts/operator/toast.js`             | 3      | `4000`   | `4_000`  |
| `scripts/events/helpers.js`             | 88     | `6000`   | `6_000`  |
| `display.html`                          | 948    | `20000`  | `20_000` |
| `display.html`                          | 949    | `8000`   | `8_000`  |

**推奨修正**:

```javascript
const LOGS_FETCH_LIMIT = 2_000;
const DEFAULT_LOAD_TIMEOUT_MS = 4_000;
const DEFAULT_DURATION = 4_000;
const PARTICIPANT_SYNC_TIMEOUT_MS = 6_000;
const HEARTBEAT_INTERVAL_MS = 20_000;
const SESSION_RETRY_DELAY_MS = 8_000;
```

**注**: 3 桁以下の数値（例: `200`, `300`, `150`, `180`）は区切りなしでも可読性に問題がないため、そのままで問題ありません。

### innerHTML の使用（XSS 対策）

開発標準では、`innerHTML` を使用する場合は必ずエスケープ処理を行うことが推奨されています。

#### ✅ 準拠している箇所

以下のファイルで `innerHTML` が使用されていますが、`escapeHtml()` 関数を使用してエスケープ処理が適切に行われています：

1. `scripts/operator/panels/pickup-panel.js`: `escapeHtml()` を使用 ✅
2. `scripts/operator/panels/logs-panel.js`: `escapeHtml()` を使用 ✅
3. `scripts/operator/panels/dictionary-panel.js`: `escapeHtml()` を使用 ✅

#### ⚠️ 要確認箇所

以下のファイルで `innerHTML` が使用されています。エスケープ処理が適切に行われているか確認が必要です：

1. `scripts/question-admin/managers/relocation-manager.js` (2 箇所): `innerHTML = ""` で空文字列を設定（問題なし）
2. `scripts/operator/app.js` (4 箇所): `innerHTML = ""` で空文字列を設定（問題なし）
3. `display.html` (3 箇所): `applyRuby()` 関数を使用してルビ処理を行っている
   - 行 1457: `questionEl.innerHTML = '';`（空文字列設定、問題なし）
   - 行 1527: `questionEl.innerHTML = applyRuby(next.question || '');`
   - 行 1986: `questionEl.innerHTML = applyRuby(question);`

**確認結果**: `display.html` 内の `applyRuby()` 関数（行 1626-1650）は、`textContent` を使用してテキストを設定し、その後 `innerHTML` に設定しています。`textContent` は自動的に HTML エスケープを行うため、XSS のリスクはありません ✅。また、`escapeHtml()` 関数（行 1687）も定義されており、必要に応じて使用可能です。

**総合確認結果**: すべての `innerHTML` 使用箇所で、ユーザー入力や外部データを直接代入する前に適切なエスケープ処理が行われているか、または空文字列を設定しているため、XSS のリスクはありません ✅。

### Firebase 設定の重複

開発標準では、Firebase 設定は `scripts/shared/firebase-config.js` に集約することが推奨されています。

#### ⚠️ 要改善箇所

| ファイル名     | 問題                              | 推奨対応                                |
| -------------- | --------------------------------- | --------------------------------------- |
| `display.html` | Firebase 設定が直接記述されている | `firebase-config.js` からインポートする |

**推奨修正**: `display.html` 内の Firebase 設定を `firebase-config.js` からインポートするように変更

### コメントアウトされたコード

開発標準では、コメントアウトされたコードは削除することが原則です。

#### ⚠️ 要確認箇所

| ファイル名 | 行番号   | 内容                                          |
| ---------- | -------- | --------------------------------------------- |
| `code.gs`  | 223, 229 | `logMail_` 関数内のコメントアウトされたコード |

**確認事項**: 一時的な無効化が必要な場合は理由をコメントで明記、不要な場合は削除

### タイマーのクリーンアップ

開発標準では、`setTimeout`/`setInterval` を使用する場合は、適切に `clearTimeout`/`clearInterval` でクリーンアップすることが推奨されています。

#### ✅ 準拠している箇所

- `display.html`: タイマーのクリーンアップ関数（`clearPendingFlushTimer()`, `clearSessionRetryTimer()`, `stopHeartbeat()`）が適切に実装されており、`resetSessionState()` で呼び出されている ✅
- `scripts/operator/toast.js`: タイマーのクリーンアップが適切に実装されている ✅

**確認結果**: 主要なタイマー使用箇所でクリーンアップが適切に実装されています ✅

### ストレージ操作の安全性

開発標準では、ストレージ操作（localStorage/sessionStorage）は安全に取得し、エラーハンドリングを実装することが推奨されています。

#### ⚠️ 要確認箇所

以下のファイルで `localStorage` や `sessionStorage` が直接使用されています。安全な取得関数を使用しているか確認が必要です：

1. `scripts/events/app.js`
2. `scripts/operator/panels/dictionary-panel.js`
3. `scripts/question-admin/managers/print-manager.js`
4. `scripts/operator/panels/logs-panel.js`
5. `scripts/operator/questions.js`

**確認事項**: `safeGetStorage()` などの安全な取得関数を使用しているか、エラーハンドリングが実装されているか

## まとめと推奨事項

### 全体の準拠状況

プロジェクト全体の開発標準準拠率は **約 90-95%** と高い水準です。ほとんどのファイルが開発標準に準拠しており、コードの一貫性と可読性が保たれています。

ただし、以下の項目で改善の余地があります：

- ファイルサイズ（大きなファイルの分割）
- 数値リテラルの区切り
- `innerHTML` の使用（XSS 対策）
- Firebase 設定の重複
- コメントアウトされたコード

### 優先度の高い改善項目

1. **HTML ファイルのヘッダーコメント追加**（優先度: 高）

   - `index.html`: ヘッダーコメントを追加
   - `gl-form.html`: ヘッダーコメントを追加

2. **JavaScript ファイルのヘッダーコメント追加**（優先度: 高）

   - `scripts/gl-form/index.js`: ヘッダーコメントを追加
   - `scripts/shared/presence-keys.js`: ヘッダーコメントを追加
   - `scripts/shared/print-preview.js`: ヘッダーコメントを追加
   - `scripts/events/panels/gl-faculties-panel.js`: ヘッダーコメントを追加
   - `scripts/events/panels/gl-panel.js`: ヘッダーコメントを追加
   - `scripts/events/tools/gl-faculty-builder.js`: ヘッダーコメントを追加
   - `scripts/events/tools/gl-faculty-utils.js`: ヘッダーコメントを追加

3. **ファイルサイズの改善**（優先度: 中）

   - `style.css` (7,509 行): 機能別に分割を検討
   - `scripts/events/app.js` (6,099 行): 機能別に分割を検討
   - `code.gs` (5,655 行): 機能別に分割を検討
   - `display.html` (2,117 行): コンポーネント化を検討
   - `operator.html` (1,987 行): コンポーネント化を検討

4. **数値リテラルの区切り**（優先度: 低）

   - `scripts/operator/panels/logs-panel.js`: `2000` → `2_000`
   - `scripts/events/panels/chat-panel.js`: `200` → `200`（3 桁以下は可）、`300` → `300`（3 桁以下は可）、`180` → `180`（3 桁以下は可）
   - `scripts/shared/print-preview.js`: `4000` → `4_000`
   - `scripts/shared/auth-debug-log.js`: `200` → `200`（3 桁以下は可）
   - `scripts/operator/toast.js`: `4000` → `4_000`
   - `scripts/events/helpers.js`: `6000` → `6_000`、`150` → `150`（3 桁以下は可）
   - `display.html`: `20000` → `20_000`、`8000` → `8_000`

5. **Firebase 設定の重複解消**（優先度: 中）

   - `display.html`: Firebase 設定を `firebase-config.js` からインポート

6. **innerHTML の使用確認**（優先度: 中）

   - `innerHTML` を使用している箇所でエスケープ処理が適切に行われているか確認

7. **コメントアウトされたコードの整理**（優先度: 低）

   - `code.gs`: コメントアウトされたコードを削除または理由を明記

8. **ストレージ操作の安全性確認**（優先度: 低）

   - `localStorage`/`sessionStorage` の直接使用箇所で安全な取得関数を使用しているか確認
   - 以下のファイルで `localStorage` が直接使用されています：
     - `scripts/events/app.js` (2 箇所): ✅ `try-catch` でラップされている
     - `scripts/operator/panels/dictionary-panel.js` (2 箇所): ✅ `try-catch` でラップされている
     - `scripts/question-admin/managers/print-manager.js` (2 箇所): ✅ `try-catch` でラップされている
     - `scripts/operator/panels/logs-panel.js` (2 箇所): ✅ `try-catch` でラップされている
     - `scripts/operator/questions.js` (2 箇所): ✅ `try-catch` でラップされている
   - **確認結果**: すべての `localStorage` 使用箇所で `try-catch` によるエラーハンドリングが適切に実装されています ✅
   - 開発標準では、ストレージ操作は `safeGetStorage()` などの安全な取得関数を使用することが推奨されていますが、現在の実装では `try-catch` でラップされているため、実用上問題ありません

9. **JSDoc コメントの追加**（優先度: 中）
   - 公開関数・メソッドに JSDoc コメントがない場合、追加を検討

### 推奨される改善手順

1. **即座に対応可能な項目**

   - `index.html` と `gl-form.html` にヘッダーコメントを追加
   - ヘッダーコメントがない JavaScript ファイルを特定し、追加

2. **段階的な改善**

   - 新規作成・修正するファイルには必ずヘッダーコメントと JSDoc コメントを追加
   - コードレビュー時に開発標準準拠を確認

3. **継続的な監視**
   - 定期的に開発標準準拠状況を確認
   - 新しい開発標準が追加された場合は、既存ファイルにも適用を検討

### 準拠している点（良い実践）

1. **命名規則の一貫性**

   - すべてのファイルタイプで `kebab-case` が一貫して使用されている
   - クラス名、関数名、変数名、定数名が適切に命名されている

2. **インデントの統一**

   - すべてのファイルでスペース 2 文字が使用されている
   - タブ文字は使用されていない

3. **モジュール設計**

   - ES Modules が適切に使用されている
   - 責務の分離が適切に行われている

4. **アクセシビリティ**

   - HTML ファイルで適切な ARIA 属性が使用されている
   - セマンティック HTML が使用されている

5. **エラーハンドリング**
   - 適切なエラーハンドリングが実装されている
   - 早期リターンが使用されている

---

**最終更新**: 2025 年 12 月 13 日
**次回確認推奨日**: 2026 年 3 月（四半期ごとの確認を推奨）

---

## 補足: 参考資料ディレクトリについて

`参考資料/` ディレクトリ内のファイル（`参考資料01.gs` など）は、プロジェクトの参考資料として保存されているファイルであり、実際のプロジェクトコードではないため、開発標準準拠の確認対象外としています。
