<!DOCTYPE html>
<!-- operator.html: 管理者向けのイベント制御フローUI全体を構築するメインエントリーポイントです。 -->
<html lang="ja" class="flow-page-root">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="referrer" content="same-origin">
  <title>イベントコントロールセンター</title>
  <link rel="icon" type="image/svg+xml" href="assets/favicon.svg">
  <link rel="stylesheet" href="style.css">
  <script type="module" src="./scripts/shared/layout.js"></script>
</head>
<body class="op-theme events-page flow-page">
  <noscript>
    <div class="noscript-banner" role="alert">
      このサービスを利用するにはブラウザの JavaScript を有効にしてください。
    </div>
  </noscript>
  <telop-header tagline="Broadcast Subtitle Console" context-label="管理フロー">
    <div slot="actions" class="flow-header-actions">
      <button
        id="events-backup-button"
        class="btn btn-ghost btn-sm"
        type="button"
        aria-pressed="false"
      >
        バックアップ
      </button>
      <button
        id="events-restore-button"
        class="btn btn-ghost btn-sm"
        type="button"
        aria-pressed="false"
      >
        復元
      </button>
      <button
        id="events-fullscreen-button"
        class="btn btn-ghost btn-sm"
        type="button"
        aria-pressed="false"
      >
        フルスクリーン <kbd>F</kbd>
      </button>
    </div>
    <div slot="meta" class="flow-user-info">
      <span id="flow-user-label" class="user-label flow-user-info__label" hidden></span>
      <div class="flow-user-info__footer">
        <div id="events-meta" class="hub-meta-note flow-user-info__meta" hidden></div>
        <button id="flow-logout-button" class="btn btn-ghost btn-sm flow-user-info__logout" type="button">ログアウト <kbd>L</kbd></button>
      </div>
    </div>
  </telop-header>

  <!-- メインステージ: 左の進行ガイドと右のパネル群で業務フローを構成 -->
  <main id="events-main" class="flow-main" data-stage="events">
    <!-- ステップ進捗: 現在の作業段階を視覚的に示す -->
    <section class="flow-stage" aria-live="polite">
      <ol class="flow-progress" aria-label="進行ステップ">
        <li class="flow-progress__item is-active" data-stage-indicator="events" aria-current="step">
          <span class="flow-progress__step">1</span>
          <span class="flow-progress__label">イベント</span>
        </li>
        <li class="flow-progress__item" data-stage-indicator="schedules">
          <span class="flow-progress__step">2</span>
          <span class="flow-progress__label">日程</span>
        </li>
        <li class="flow-progress__item" data-stage-indicator="tabs">
          <span class="flow-progress__step">3</span>
          <span class="flow-progress__label">参加者 / テロップ</span>
        </li>
      </ol>
    </section>

    <div class="events-layout">
      <!-- モバイル用トグル: スマホ表示でのサイドバー/チャット切替 -->
      <div class="events-mobile-controls" aria-label="サイドメニューの開閉">
        <button
          id="events-sidebar-toggle"
          class="btn btn-ghost events-mobile-button"
          type="button"
          aria-controls="events-sidebar"
          aria-expanded="false"
          data-mobile-target="sidebar"
        >
          <svg class="events-mobile-button__icon" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
            <path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z" />
          </svg>
          <span class="events-mobile-button__label">メニュー</span>
        </button>
        <button
          id="events-chat-toggle"
          class="btn btn-ghost events-mobile-button"
          type="button"
          aria-controls="events-chat"
          aria-expanded="false"
          data-mobile-target="chat"
        >
          <svg class="events-mobile-button__icon" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
            <path d="M4 4h16a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H7.17L4 19.17V5a1 1 0 0 1 1-1zm3 4v2h10V8H7zm0 4v2h6v-2H7z" />
          </svg>
          <span class="events-mobile-button__label">チャット</span>
          <span id="events-chat-badge" class="events-mobile-button__badge" aria-hidden="true" hidden></span>
          <span id="events-chat-badge-text" class="visually-hidden" aria-live="polite"></span>
        </button>
      </div>

      <!-- サイドバー: イベントとツールの選択操作を集約 -->
      <aside id="events-sidebar" class="events-sidebar">
        <button
          type="button"
          class="events-mobile-close"
          aria-label="サイドメニューを閉じる"
          data-mobile-close="sidebar"
        >
          <svg class="events-mobile-close__icon" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
            <path d="M6.7 5.3 5.3 6.7 10.6 12l-5.3 5.3 1.4 1.4L12 13.4l5.3 5.3 1.4-1.4L13.4 12l5.3-5.3-1.4-1.4L12 10.6z" />
          </svg>
        </button>
        <button id="flow-event-summary-pane" class="sidebar-card sidebar-card--action" type="button" data-panel-target="events">
          <span class="sidebar-card__title">選択中のイベント <kbd>1</kbd></span>
          <span id="flow-event-summary-name" class="sidebar-card__name">—</span>
          <span class="sidebar-card__stats" role="presentation">
            <span class="sidebar-card__stat"><span class="sidebar-card__stat-label">日程数</span><span id="flow-event-summary-schedules" class="sidebar-card__stat-value">—</span></span>
            <span class="sidebar-card__stat"><span class="sidebar-card__stat-label">参加者</span><span id="flow-event-summary-participants" class="sidebar-card__stat-value">—</span></span>
          </span>
        </button>
        <div id="flow-event-summary-actions" class="sidebar-card-actions" hidden>
          <button id="flow-event-summary-copy" class="sidebar-card-actions__button" type="button" disabled>
            表示URLをコピー
          </button>
          <button
            id="flow-event-summary-goto-schedule"
            class="sidebar-card-actions__button"
            type="button"
            disabled
          >
            テロップ操作の日程へ移動
          </button>
          <span id="flow-event-summary-copy-status" class="visually-hidden" aria-live="polite"></span>
        </div>
        <button id="flow-schedule-summary-pane" class="sidebar-card sidebar-card--action" type="button" data-panel-target="schedules">
          <span class="sidebar-card__title">選択中の日程 <kbd>2</kbd></span>
          <span id="flow-schedule-summary" class="flow-selection-summary" hidden>
            <span class="flow-selection-summary__item"><span class="flow-selection-summary__label">日程</span><span id="flow-schedule-summary-label">—</span></span>
            <span class="flow-selection-summary__item" id="flow-schedule-summary-range-row" hidden><span class="flow-selection-summary__label">時間</span><span id="flow-schedule-summary-range">—</span></span>
            <span class="flow-selection-summary__item" id="flow-schedule-summary-location-row" hidden><span class="flow-selection-summary__label">場所</span><span id="flow-schedule-summary-location">—</span></span>
          </span>
          <span id="flow-schedule-summary-empty" class="sidebar-card__placeholder">イベントと日程を選択してください。</span>
        </button>

        <div id="op-channel-banner" role="region" aria-live="polite" hidden>
          <div class="channel-banner__heading">
            <span id="op-channel-status" class="channel-banner__status">ディスプレイの状態を確認しています…</span>
            <button id="op-channel-lock-button" class="btn btn-primary btn-sm" type="button">この日程に固定</button>
          </div>
          <div class="channel-banner__body">
            <div class="channel-banner__assignment" role="status">
              <span class="channel-banner__assignment-label">ディスプレイ</span>
              <span id="op-channel-assignment" class="channel-banner__assignment-value">—</span>
            </div>
            <div>
              <div class="channel-banner__assignment-label">オペレーターの選択状況</div>
              <ul id="op-channel-presence-list" class="channel-presence-list" aria-live="polite"></ul>
              <p id="op-channel-presence-empty" hidden>このイベントで選択中のオペレーターはいません。</p>
            </div>
          </div>
        </div>
        <nav class="sidebar-nav" aria-label="パネル選択">
          <button id="flow-tab-participants" class="sidebar-nav__button" type="button" data-panel-target="participants">参加者リスト <kbd>3</kbd></button>
          <button id="flow-tab-gl" class="sidebar-nav__button" type="button" data-panel-target="gl">GLリスト <kbd>4</kbd></button>
          <button id="flow-tab-gl-faculties" class="sidebar-nav__button" type="button" data-panel-target="gl-faculties" >学部・学科設定 <kbd>5</kbd></button>
          <button id="flow-tab-operator" class="sidebar-nav__button" type="button" data-panel-target="operator">テロップ操作 <kbd>6</kbd></button>
          <button id="flow-tab-dictionary" class="sidebar-nav__button" type="button" data-panel-target="dictionary">ルビ辞書 <kbd>7</kbd></button>
          <button id="flow-tab-pickup" class="sidebar-nav__button" type="button" data-panel-target="pickup">Pick Up Question <kbd>8</kbd></button>
          <button id="flow-tab-logs" class="sidebar-nav__button" type="button" data-panel-target="logs">操作ログ <kbd>9</kbd></button>
        </nav>
      </aside>
      <!-- 右ペイン: 各種管理モジュールの本体 -->
      <div id="flow-stage-panels" class="flow-panels">
        <!-- イベント一覧パネル: 運用前に対象イベントを確定させる -->
        <section class="module module--primary admin-module flow-card flow-card--events flow-stage-panel is-active" aria-labelledby="events-title" data-panel="events">
        <div class="module-header">
          <div class="module-heading">
            <h2 id="events-title">イベントの管理</h2>
            <p class="module-description">イベントを追加・編集・削除できます。イベントを選択し、次のステップへ引き継ぎます。<br>キーボードショートカット: <kbd>↑</kbd><kbd>↓</kbd> でイベントを選択, <kbd>Enter</kbd> で確定, <kbd>A</kbd> で追加, <kbd>E</kbd> で編集, <kbd>Delete</kbd> で削除</p>
          </div>
          <div class="module-actions">
            <button id="flow-add-event-button" class="btn btn-primary btn-sm" type="button" disabled>イベントを追加 <kbd>A</kbd></button>
            <button id="flow-events-print-button" class="btn btn-ghost btn-sm" type="button" disabled>印刷 <kbd>Ctrl</kbd><span class="kbd-separator">/</span><kbd>⌘</kbd><kbd>P</kbd></button>
            <button id="flow-events-refresh-button" class="btn btn-ghost btn-sm" type="button">再読み込み <kbd>R</kbd></button>
          </div>
        </div>
        <div class="module-body">
          <div class="flow-pane flow-pane--primary">
            <div id="flow-events-loading" class="hub-loading" role="status" aria-live="polite" hidden>
              <span class="spinner" aria-hidden="true"></span>
              <span id="flow-events-loading-text">イベント情報を読み込んでいます…</span>
            </div>
            <div id="flow-events-alert" class="hub-alert" role="alert" hidden></div>
            <p id="flow-event-selection-note" class="flow-selection-note" hidden>進めるイベントをカードから選択してください。</p>
            <ul id="flow-event-list" class="entity-list" aria-live="polite"></ul>
            <p id="flow-event-empty" class="entity-empty" hidden>まだイベントが登録されていません。まずはイベントを追加してください。</p>
          </div>
        </div>
        <div id="flow-event-action-panel" class="action-panel is-idle">
          <div class="action-panel__toolbar">
            <button id="flow-event-edit-button" class="btn btn-ghost btn-sm" type="button" disabled>編集</button>
            <button id="flow-event-delete-button" class="btn btn-ghost btn-sm" type="button" disabled>削除</button>
          </div>
          <span id="flow-event-selected-info" class="action-panel__meta">イベントを選択してください</span>
          <div class="action-panel-right">
            <button id="flow-event-batch-delete-button" class="btn btn-danger btn-sm" type="button" hidden>選択項目を削除</button>
          </div>
        </div>
        <div class="flow-navigation">
          <button class="btn btn-ghost btn-sm flow-nav-button flow-nav-button--prev" type="button" data-flow-nav-direction="prev" data-flow-nav-target="events">前へ</button>
          <button class="btn btn-primary btn-sm flow-nav-button flow-nav-button--next" type="button" data-flow-nav-direction="next" data-flow-nav-target="schedules">確定</button>
        </div>
        </section>

        <!-- 日程パネル: イベント決定後に担当日程を選択・整合 -->
        <section class="module module--primary admin-module flow-card flow-card--schedules flow-stage-panel" aria-labelledby="schedule-admin-title" data-panel="schedules">
        <div class="module-header">
          <div class="module-heading">
            <h2 id="schedule-admin-title">日程の管理</h2>
            <p class="module-description">選択したイベントに紐づく日程を整理できます。日程を選択し、次のツールに引き継ぎます。<br>キーボードショートカット: <kbd>↑</kbd><kbd>↓</kbd> で日程を選択, <kbd>A</kbd> で追加, <kbd>R</kbd> で再読み込み, <kbd>E</kbd> で編集, <kbd>Delete</kbd> で削除</p>
          </div>
          <div class="module-actions">
            <button id="flow-add-schedule-button" class="btn btn-primary btn-sm" type="button" disabled>日程を追加 <kbd>A</kbd></button>
            <button id="flow-schedule-refresh-button" class="btn btn-ghost btn-sm" type="button" disabled>再読み込み <kbd>R</kbd></button>
          </div>
        </div>
        <div class="module-body">
          <div class="flow-pane flow-pane--primary">
            <div id="flow-schedule-loading" class="hub-loading" role="status" aria-live="polite" hidden>
              <span class="spinner" aria-hidden="true"></span>
              <span id="flow-schedule-loading-text">日程情報を読み込んでいます…</span>
            </div>
            <p id="flow-schedule-selection-note" class="flow-selection-note" hidden>次のステップに進む日程をカードから選択してください。</p>
            <p id="flow-schedule-committed-note" class="flow-selection-note flow-selection-note--status" hidden>
              現在のテロップ操作: <span id="flow-schedule-committed-label">—</span>
            </p>
            <ul id="flow-schedule-list" class="entity-list" aria-live="polite"></ul>
            <p id="flow-schedule-empty" class="entity-empty" hidden>このイベントにはまだ日程が登録されていません。まずは日程を追加してください。</p>
          </div>
        </div>
        <div id="flow-schedule-action-panel" class="action-panel is-idle">
          <div class="action-panel__toolbar">
            <button id="flow-schedule-edit-button" class="btn btn-ghost btn-sm" type="button" disabled>編集</button>
            <button id="flow-schedule-delete-button" class="btn btn-ghost btn-sm" type="button" disabled>削除</button>
          </div>
          <span id="flow-schedule-selected-info" class="action-panel__meta">日程を選択してください</span>
          <div class="action-panel-right">
            <button id="flow-schedule-batch-delete-button" class="btn btn-danger btn-sm" type="button" hidden>選択項目を削除</button>
          </div>
        </div>
        <div class="flow-navigation">
          <button class="btn btn-ghost btn-sm flow-nav-button flow-nav-button--prev" type="button" data-flow-nav-direction="prev" data-flow-nav-target="events">前へ</button>
          <button class="btn btn-primary btn-sm flow-nav-button flow-nav-button--next" type="button" data-flow-nav-direction="next" data-flow-nav-target="participants">確定</button>
        </div>
        </section>

        <!-- 参加者ツールパネル: CSV連携や専用リンク生成を担う埋め込み -->
        <section id="flow-panel-participants" class="flow-tool-panel flow-stage-panel" data-panel="participants" aria-labelledby="flow-panel-participants-title" hidden>
        <h2 id="flow-panel-participants-title" class="visually-hidden">参加者リスト</h2>
        <div id="participants-tool" class="embedded-tool" data-tool="participants">
                <div class="embedded-tool__surface qa-embedded" data-qa-embed>
                  <main id="qa-admin-main" class="admin-main" hidden>
                    <div id="qa-admin-primary" class="qa-admin-primary">
                      <div id="qa-loading-overlay" class="loading-overlay" aria-live="polite" hidden>
                        <div class="loading-backdrop"></div>
                        <div class="loading-panel" role="status" aria-label="読み込み中">
                          <div class="spinner" aria-hidden="true"></div>
                          <div class="loading-text"><span id="qa-loading-text">初期化中…</span></div>
                          <div class="loading-sub">数秒かかる場合があります</div>
                          <ol id="qa-loader-steps" class="loader-steps" aria-label="初期化ステップ"></ol>
                        </div>
                      </div>

                      <section id="qa-participant-module" class="module module--primary admin-module" aria-labelledby="qa-participant-title">
                        <div class="module-header">
                        <div class="module-heading">
                          <div class="module-title-row">
                            <h2 id="qa-participant-title">参加者リストの管理</h2>
                            <span id="qa-upload-status" class="status-pill status-pill--inline">イベントコントロールセンターで対象の日程を選択してください。</span>
                          </div>
                          <p class="module-description" id="qa-participant-description">
                            <span id="qa-participant-description-main">選択したイベント・日程の参加者情報を管理できます。各参加者ごとに質問フォームの専用リンクを発行でき、「編集」から詳細や班番号を更新できます。電話番号とメールアドレスは内部で管理され、編集時のみ確認できます。同じイベント内で名前と学部学科が一致する参加者は重複候補として件数付きで表示されます。専用リンクは各行のボタンまたはURLから取得できます。</span>
                            <span id="qa-admin-summary" class="module-description__meta" aria-live="polite"></span>
                          </p>
                        </div>
                        <div class="module-actions">
                          <button id="open-staff-print-view-button" class="btn btn-ghost btn-sm" type="button" disabled>
                            スタッフ印刷
                          </button>
                          <button id="open-print-view-button" class="btn btn-ghost btn-sm" type="button" disabled>
                            印刷
                          </button>
                          <button id="qa-send-mail-button" class="btn btn-primary btn-sm" type="button" disabled>
                            参加者へ案内メール送信
                          </button>
                        </div>
                      </div>
                      <div class="module-body">
                        <div class="qa-participant-card-switcher">
                          <div class="qa-participant-card-tabs">
                            <span class="qa-participant-card-tabs__label" aria-hidden="true">表示モード</span>
                            <div id="qa-participant-tablist" class="qa-participant-card-tabs__buttons" role="tablist" aria-label="参加者ツールの表示を切り替え">
                              <button id="qa-participant-tab-manage" class="qa-participant-card-tab is-active" type="button" role="tab" aria-selected="true" aria-controls="qa-participant-tabpanel-manage" tabindex="0">
                                <span class="qa-participant-card-tab__label">参加者リスト管理</span>
                              </button>
                              <button id="qa-participant-tab-csv" class="qa-participant-card-tab" type="button" role="tab" aria-selected="false" aria-controls="qa-participant-tabpanel-csv" tabindex="-1">
                                <span class="qa-participant-card-tab__label">CSVの形式</span>
                              </button>
                            </div>
                          </div>
                          <div class="qa-participant-tabpanels">
                            <section id="qa-participant-tabpanel-manage" class="qa-participant-tabpanel" role="tabpanel" aria-labelledby="qa-participant-tab-manage">
                              <div class="qa-participant-card qa-participant-card--manage">
                                <div class="qa-participant-card__body">
                                  <div class="admin-controls">
                                    <div class="admin-controls__row admin-controls__row--imports">
                                      <button id="qa-add-participant-button" class="btn btn-primary btn-sm" type="button">参加者を追加</button>
                                      <button id="qa-download-team-template" class="btn btn-ghost btn-sm" type="button" disabled>班番号CSVテンプレのDL</button>
                                      <label class="btn btn-ghost file-input" for="qa-team-csv-input">
                                        <span id="qa-team-file-label">班番号CSVをアップロード</span>
                                        <input id="qa-team-csv-input" type="file" accept=".csv,text/csv">
                                      </label>
                                    </div>
                                  </div>
                                  <div id="qa-change-preview" class="change-preview" hidden aria-live="polite">
                                    <div class="change-preview__header">
                                      <span class="change-preview__title">未保存の変更があります</span>
                                      <span id="qa-change-preview-count" class="change-preview__count"></span>
                                    </div>
                                    <ul id="qa-change-preview-list" class="change-preview__list" aria-label="未保存の変更一覧"></ul>
                                    <p id="qa-change-preview-note" class="change-preview__note">「適用」で変更を確定し、「取消」で破棄できます。</p>
                                  </div>
                                  <div class="participant-card-shell">
                                    <div id="qa-participant-card-list" class="participant-card-list" role="list" aria-live="polite"></div>
                                  </div>
                                </div>
                              </div>
                            </section>
                            <section id="qa-participant-tabpanel-csv" class="qa-participant-tabpanel" role="tabpanel" aria-labelledby="qa-participant-tab-csv" hidden aria-hidden="true">
                              <div class="qa-participant-card qa-participant-card--info">
                                <div class="qa-participant-card__header">
                                  <h2 id="qa-format-title">CSVの形式について</h2>
                                  <p class="qa-participant-card__description">ヘッダー行として、1列目から順に「名前」「フリガナ」「性別」「学部学科」「携帯電話」「メールアドレス」を配置してください。アップロード時には必ずヘッダー行が必要です。テンプレボタンからダウンロードできます。ファイル名は「イベントID_日程ID_participants.csv」を使用してください。電話番号とメールアドレスは内部で保存され、編集ダイアログでのみ確認できます。</p>
                                </div>
                                <div class="qa-participant-card__body">
                                  <ul>
                                    <li>ヘッダー行が必須です。</li>
                                    <li>同じUIDや同じ氏名・学部学科の行が複数あっても全て読み込み、一覧上で重複候補として確認できます。</li>
                                    <li>CSVにNo.列は不要です。読み込み時に学部学科→フリガナの順で並べ替え、表示用のNo.は自動採番されます。</li>
                                    <li>同じイベント内で名前と学部学科が一致する参加者は重複候補として件数付きで表示されます。</li>
                                    <li>各列は空欄でもアップロードできますが、氏名は必須です。</li>
                                    <li>保存後はフォームに即座に反映されます。</li>
                                    <li>班番号は別途、<code>学部学科,性別,名前,班番号,uid</code>形式のCSV（ヘッダー必須）をアップロードすると一括で紐付けられます（「キャンセル」はキャンセル済み、「別日」は別日移動として扱われます）。テンプレートには現在のUIDがあらかじめ記載されます。ファイル名は「イベントID_日程ID_teams.csv」としてください。</li>
                                  </ul>
                                </div>
                              </div>
                            </section>
                          </div>
                        </div>
                      </div>
                      <div id="qa-participant-action-panel" class="action-panel is-idle" role="region" aria-label="参加者リストの操作" aria-live="polite">
                        <button id="qa-edit-selected-participant-button" class="btn btn-ghost btn-sm" type="button" disabled>編集</button>
                        <button id="qa-cancel-selected-participant-button" class="btn btn-ghost btn-sm" type="button" disabled>キャンセル</button>
                        <button id="qa-relocate-selected-participant-button" class="btn btn-ghost btn-sm" type="button" disabled>別日</button>
                        <button id="qa-delete-selected-participant-button" class="btn btn-danger btn-sm" type="button" disabled>削除</button>
                        <div class="action-panel-right">
                          <span id="qa-participant-action-info" class="action-panel__meta">操作可能なボタンはありません。</span>
                          <button id="qa-discard-button" class="btn btn-ghost btn-sm" type="button" disabled>取消</button>
                          <button id="qa-save-button" class="btn btn-primary" type="button" disabled>適用</button>
                          <button id="qa-clear-participants-button" class="btn btn-danger btn-sm" type="button" disabled>参加者リストを全削除</button>
                        </div>
                      </div>
                      </section>
                    </div>
                  </main>

                  <div id="qa-participant-dialog" class="modal" role="dialog" aria-modal="true" aria-labelledby="qa-participant-dialog-title" hidden>
                    <div class="modal-backdrop" data-dialog-dismiss="true"></div>
                    <div class="modal-panel">
                      <form id="qa-participant-form">
                        <div class="modal-header">
                          <h2 id="qa-participant-dialog-title">参加者情報を編集</h2>
                        </div>
                        <div class="modal-body">
                          <div class="modal-field">
                            <label for="qa-participant-name-input">氏名</label>
                            <input id="qa-participant-name-input" name="participant-name" class="input" type="text" autocomplete="off" required>
                          </div>
                          <div class="modal-field">
                            <label for="qa-participant-phonetic-input">フリガナ</label>
                            <input id="qa-participant-phonetic-input" name="participant-phonetic" class="input" type="text" autocomplete="off">
                          </div>
                          <div class="modal-field">
                            <label for="qa-participant-gender-input">性別</label>
                            <input id="qa-participant-gender-input" name="participant-gender" class="input" type="text" autocomplete="off">
                          </div>
                          <div class="modal-field">
                            <label for="qa-participant-department-input">学部学科</label>
                            <input id="qa-participant-department-input" name="participant-department" class="input" type="text" autocomplete="off">
                          </div>
                          <div class="modal-field">
                            <label for="qa-participant-team-input">班番号</label>
                            <input id="qa-participant-team-input" name="participant-team" class="input" type="text" autocomplete="off" placeholder="例: A-1 / キャンセル / 別日など">
                          </div>
                          <div id="qa-participant-relocation-summary" class="modal-field" hidden>
                            <div class="modal-label">別日への移動情報</div>
                            <p id="qa-participant-relocation-summary-text" class="modal-helper"></p>
                          </div>
                          <div class="modal-field">
                            <label for="qa-participant-phone-input">携帯電話</label>
                            <input id="qa-participant-phone-input" name="participant-phone" class="input" type="tel" autocomplete="tel">
                          </div>
                          <div class="modal-field">
                            <label for="qa-participant-email-input">メールアドレス</label>
                            <input id="qa-participant-email-input" name="participant-email" class="input" type="email" autocomplete="email">
                          </div>
                          <div class="modal-field">
                            <span class="modal-label">案内メール</span>
                            <label class="chk">
                              <input id="qa-participant-mail-sent-input" name="participant-mail-sent" type="checkbox">
                              <span>案内メールを送信済として扱う</span>
                            </label>
                            <p class="modal-helper">手動で切り替えた場合は参加者カードのメール送信状況に反映されます。</p>
                          </div>
                          <p id="qa-participant-error" class="form-error" role="alert" hidden></p>
                        </div>
                        <div class="modal-footer">
                          <button type="button" class="btn btn-ghost" data-dialog-dismiss="true">キャンセル</button>
                          <button type="submit" class="btn btn-primary">保存</button>
                        </div>
                      </form>
                  </div>
                </div>

                  <div id="qa-add-participant-dialog" class="modal" role="dialog" aria-modal="true" aria-labelledby="qa-add-participant-dialog-title" hidden>
                    <div class="modal-backdrop" data-dialog-dismiss="true"></div>
                    <div class="modal-panel">
                      <div class="modal-header">
                        <h2 id="qa-add-participant-dialog-title">参加者を追加</h2>
                      </div>
                      <div class="modal-body">
                        <div class="qa-participant-card-tabs">
                          <div id="qa-add-participant-tablist" class="qa-participant-card-tabs__buttons" role="tablist" aria-label="追加方法を選択">
                            <button id="qa-add-participant-tab-manual" class="qa-participant-card-tab is-active" type="button" role="tab" aria-selected="true" aria-controls="qa-add-participant-tabpanel-manual" tabindex="0">
                              <span class="qa-participant-card-tab__label">手動追加</span>
                            </button>
                            <button id="qa-add-participant-tab-csv" class="qa-participant-card-tab" type="button" role="tab" aria-selected="false" aria-controls="qa-add-participant-tabpanel-csv" tabindex="-1">
                              <span class="qa-participant-card-tab__label">CSVインポート</span>
                            </button>
                          </div>
                        </div>
                        <div class="qa-participant-tabpanels">
                          <section id="qa-add-participant-tabpanel-manual" class="qa-participant-tabpanel" role="tabpanel" aria-labelledby="qa-add-participant-tab-manual">
                            <form id="qa-add-participant-form">
                              <div class="modal-field">
                                <label for="qa-add-participant-name-input">氏名 <span class="field-tag field-tag--required">必須</span></label>
                                <input id="qa-add-participant-name-input" name="add-participant-name" class="input" type="text" autocomplete="off" required>
                              </div>
                              <div class="modal-field">
                                <label for="qa-add-participant-phonetic-input">フリガナ</label>
                                <input id="qa-add-participant-phonetic-input" name="add-participant-phonetic" class="input" type="text" autocomplete="off">
                              </div>
                              <div class="modal-field">
                                <label for="qa-add-participant-gender-input">性別</label>
                                <input id="qa-add-participant-gender-input" name="add-participant-gender" class="input" type="text" autocomplete="off">
                              </div>
                              <div class="modal-field">
                                <label for="qa-add-participant-department-input">学部学科</label>
                                <input id="qa-add-participant-department-input" name="add-participant-department" class="input" type="text" autocomplete="off">
                              </div>
                              <div class="modal-field">
                                <label for="qa-add-participant-team-input">班番号</label>
                                <input id="qa-add-participant-team-input" name="add-participant-team" class="input" type="text" autocomplete="off" placeholder="例: A-1 / キャンセル / 別日など">
                              </div>
                              <div class="modal-field">
                                <label for="qa-add-participant-phone-input">携帯電話</label>
                                <input id="qa-add-participant-phone-input" name="add-participant-phone" class="input" type="tel" autocomplete="tel">
                              </div>
                              <div class="modal-field">
                                <label for="qa-add-participant-email-input">メールアドレス</label>
                                <input id="qa-add-participant-email-input" name="add-participant-email" class="input" type="email" autocomplete="email">
                              </div>
                              <p id="qa-add-participant-error" class="form-error" role="alert" hidden></p>
                            </form>
                          </section>
                          <section id="qa-add-participant-tabpanel-csv" class="qa-participant-tabpanel" role="tabpanel" aria-labelledby="qa-add-participant-tab-csv" hidden aria-hidden="true">
                            <form id="qa-add-participant-csv-form">
                              <div class="modal-field">
                                <label for="qa-add-participant-csv-input" class="file-input">
                                  <span id="qa-add-participant-file-label">参加者CSVをアップロード</span>
                                  <input id="qa-add-participant-csv-input" type="file" accept=".csv,text/csv">
                                </label>
                                <p class="modal-helper">ファイル名は「イベントID_日程ID_participants.csv」を使用してください。</p>
                              </div>
                              <div class="modal-field">
                                <span class="modal-label">インポート方法</span>
                                <div class="radio-group">
                                  <label class="radio-label">
                                    <input type="radio" name="qa-add-participant-csv-mode" value="append" checked>
                                    <span>追記（既存の参加者に追加）</span>
                                  </label>
                                  <label class="radio-label">
                                    <input type="radio" name="qa-add-participant-csv-mode" value="replace">
                                    <span>置き換え（既存の参加者を削除して置き換え）</span>
                                  </label>
                                </div>
                                <p class="modal-helper">追記を選択した場合、既存の参加者情報は保持され、CSVの参加者が追加されます。置き換えを選択した場合、既存の参加者情報は削除され、CSVの参加者のみが残ります。</p>
                              </div>
                              <div class="modal-field">
                                <button id="qa-add-participant-download-template" class="btn btn-ghost btn-sm" type="button">参加者CSVテンプレのDL</button>
                              </div>
                              <p id="qa-add-participant-csv-error" class="form-error" role="alert" hidden></p>
                            </form>
                          </section>
                        </div>
                      </div>
                      <div class="modal-footer">
                        <button type="button" class="btn btn-ghost" data-dialog-dismiss="true">キャンセル</button>
                        <button id="qa-add-participant-submit-button" type="button" class="btn btn-primary">追加</button>
                      </div>
                    </div>
                  </div>

                  <div id="qa-relocation-dialog" class="modal" role="dialog" aria-modal="true" aria-labelledby="qa-relocation-dialog-title" hidden>
                    <div class="modal-backdrop" data-dialog-dismiss="true"></div>
                    <div class="modal-panel">
                      <form id="qa-relocation-form">
                        <div class="modal-header">
                          <h2 id="qa-relocation-dialog-title">別日への移動先を確認</h2>
                        </div>
                        <div class="modal-body">
                          <p id="qa-relocation-description" class="modal-helper">CSVで「別日」と入力された参加者、または「別日」ボタンから設定した参加者の移動先を選択してください。</p>
                          <ul id="qa-relocation-list" class="relocation-list" aria-live="polite"></ul>
                          <p id="qa-relocation-error" class="form-error" role="alert" hidden></p>
                        </div>
                        <div class="modal-footer">
                          <button type="button" class="btn btn-ghost" data-dialog-dismiss="true">キャンセル</button>
                          <button type="submit" class="btn btn-primary">設定を適用</button>
                        </div>
                      </form>
                    </div>
                  </div>


                  <div id="qa-confirm-dialog" class="modal" role="dialog" aria-modal="true" aria-labelledby="qa-confirm-dialog-title" hidden>
                    <div class="modal-backdrop" data-dialog-dismiss="true"></div>
                    <div class="modal-panel">
                      <div class="modal-header">
                        <h2 id="qa-confirm-dialog-title">確認</h2>
                      </div>
                      <div class="modal-body">
                        <p id="qa-confirm-dialog-message"></p>
                      </div>
                      <div class="modal-footer">
                        <button type="button" class="btn btn-ghost" id="qa-confirm-cancel-button" data-dialog-dismiss="true">キャンセル</button>
                        <button type="button" class="btn btn-danger" id="qa-confirm-accept-button">実行</button>
                      </div>
                    </div>
                  </div>

                </div>
              </div>
        </section>
        <!-- GL管理パネル: 応募設定と班割りの整理を行う -->
        <section
          id="flow-panel-gl"
          class="module module--primary admin-module flow-card flow-card--tabs flow-tool-panel flow-stage-panel"
          data-panel="gl"
          aria-labelledby="flow-panel-gl-title"
          hidden
        >
          <div class="module-header">
            <div class="module-heading">
              <h2 id="flow-panel-gl-title">GLリストの管理</h2>
              <p class="module-description">
                選択したイベントのGL応募情報を確認し、募集設定や班割りステータスを更新できます。募集URLのコピー、募集期間の調整、学部学科や班リストの編集が可能です。
              </p>
            </div>
          </div>
          <div class="module-body">
            <div class="flow-pane flow-pane--primary gl-panel">
              <div class="gl-panel-switcher">
                <div class="gl-panel-tabs">
                  <span class="gl-panel-tabs__label" aria-hidden="true">表示モード</span>
                  <div id="gl-tablist" class="gl-panel-tabs__buttons" role="tablist" aria-label="GLリストの表示を切り替え">
                    <button
                      id="gl-tab-config"
                      class="gl-panel-tab is-active"
                      type="button"
                      role="tab"
                      aria-selected="true"
                      aria-controls="gl-tabpanel-config"
                      tabindex="0"
                    >
                      <span class="gl-panel-tab__label">募集設定</span>
                    </button>
                    <button
                      id="gl-tab-applications"
                      class="gl-panel-tab"
                      type="button"
                      role="tab"
                      aria-selected="false"
                      aria-controls="gl-tabpanel-applications"
                      tabindex="-1"
                    >
                      <span class="gl-panel-tab__label">応募一覧</span>
                    </button>
                  </div>
                </div>
                <div class="gl-panel-surfaces">
                  <section id="gl-tabpanel-config" class="gl-panel-tabpanel" role="tabpanel" aria-labelledby="gl-tab-config">
                    <div class="gl-panel-scroll">
                      <section class="gl-config-card" aria-labelledby="gl-config-title">
                        <div class="gl-card-header">
                          <h3 id="gl-config-title" class="gl-card-title">募集設定</h3>
                          <p id="gl-config-status" class="gl-card-status" role="status" aria-live="polite"></p>
                        </div>
                        <div class="gl-card-body">
                          <p id="gl-config-event-note" class="gl-card-note" hidden>イベントを選択してください。</p>
                          <div id="gl-config-content" class="gl-config-content" hidden>
                            <div class="gl-config-row">
                              <label class="gl-config-label" for="gl-period-start">募集開始</label>
                              <div class="gl-config-control">
                                <input id="gl-period-start" class="input" type="datetime-local">
                              </div>
                            </div>
                            <div class="gl-config-row">
                              <label class="gl-config-label" for="gl-period-end">募集終了</label>
                              <div class="gl-config-control">
                                <input id="gl-period-end" class="input" type="datetime-local">
                              </div>
                            </div>
                            <div class="gl-config-row">
                              <label class="gl-config-label" for="gl-team-count">班の数</label>
                              <div class="gl-config-control">
                                <input
                                  id="gl-team-count"
                                  class="input input--dense"
                                  type="number"
                                  inputmode="numeric"
                                  min="0"
                                  max="50"
                                  step="1"
                                  placeholder="例: 12"
                                >
                                <p class="gl-config-hint">班は「1班」「2班」のように自動生成されます。欠席・運営は自動で含まれます。</p>
                              </div>
                            </div>
                            <div class="gl-config-row gl-config-row--schedule-teams">
                              <span class="gl-config-label">日程ごとの班数</span>
                              <div class="gl-config-control gl-config-control--schedule-teams">
                                <p class="gl-config-hint">空欄の場合は上記のデフォルト班数を利用します。</p>
                                <div id="gl-schedule-teams" class="gl-schedule-teams">
                                  <p id="gl-schedule-teams-empty" class="gl-schedule-teams__empty">日程がありません。日程を追加するとここに表示されます。</p>
                                  <div id="gl-schedule-teams-body" class="gl-schedule-teams__list"></div>
                                </div>
                              </div>
                            </div>
                            <div class="gl-config-actions">
                              <button id="gl-config-save" class="btn btn-primary btn-sm" type="button">設定を保存</button>
                              <button id="gl-config-copy" class="btn btn-ghost btn-sm" type="button" disabled>応募URLをコピー</button>
                              <span id="gl-config-copy-status" class="visually-hidden" aria-live="polite"></span>
                            </div>
                          </div>
                        </div>
                      </section>
                      <template id="gl-schedule-team-template">
                        <div class="gl-schedule-team" data-schedule-id="">
                          <div class="gl-schedule-team__header">
                            <div class="gl-schedule-team__title">
                              <span class="gl-schedule-team__label" data-role="schedule-label"></span>
                              <span class="gl-schedule-team__date" data-role="schedule-date"></span>
                            </div>
                            <label class="gl-schedule-team__field">
                              <span class="gl-schedule-team__field-label">班の数</span>
                              <input
                                class="input input--dense gl-schedule-team__input"
                                type="number"
                                min="0"
                                max="50"
                                step="1"
                                inputmode="numeric"
                                data-schedule-team-input
                              >
                            </label>
                          </div>
                          <p class="gl-schedule-team__note" data-role="schedule-note"></p>
                        </div>
                      </template>
                    </div>
                  </section>
                  <section
                    id="gl-tabpanel-applications"
                    class="gl-panel-tabpanel"
                    role="tabpanel"
                    aria-labelledby="gl-tab-applications"
                    hidden
                    aria-hidden="true"
                  >
                    <div class="gl-panel-scroll">
                      <section class="gl-applications-card" aria-labelledby="gl-application-title">
                        <div class="gl-card-header">
                          <h3 id="gl-application-title" class="gl-card-title">応募一覧</h3>
                          <div class="gl-card-tools">
                            <label class="gl-filter-label" for="gl-source-filter">区分</label>
                            <select id="gl-source-filter" class="input input--dense">
                              <option value="all" selected>すべて</option>
                              <option value="external">外部</option>
                              <option value="internal">内部</option>
                            </select>
                            <label class="gl-filter-label" for="gl-role-filter">役割</label>
                            <select id="gl-role-filter" class="input input--dense">
                              <option value="all" selected>すべて</option>
                              <option value="司会">司会</option>
                              <option value="受付">受付</option>
                              <option value="ラジオ">ラジオ</option>
                              <option value="機材">機材</option>
                              <option value="GL">GL</option>
                              <option value="撮影">撮影</option>
                              <option value="その他">その他</option>
                            </select>
                            <label class="gl-filter-label" for="gl-filter">表示</label>
                            <select id="gl-filter" class="input input--dense">
                              <option value="all" selected>すべて</option>
                              <option value="unassigned">未割当</option>
                              <option value="assigned">班割当のみ</option>
                              <option value="absent">欠席</option>
                              <option value="staff">運営待機</option>
                            </select>
                            <button id="gl-print-button" class="btn btn-secondary btn-sm" type="button">印刷</button>
                          </div>
                        </div>
                        <div class="gl-card-body">
                          <p id="gl-application-event-note" class="gl-card-note">イベントを選択してください。</p>
                          <p id="gl-application-empty" class="gl-card-note" hidden>該当する応募はありません。フォームの公開や条件を確認してください。</p>
                          <div id="gl-application-loading" class="hub-loading" role="status" hidden>
                            <span class="spinner" aria-hidden="true"></span>
                            <span>応募情報を読み込んでいます…</span>
                          </div>
                          <div id="gl-application-views" class="gl-application-views" hidden>
                            <div id="gl-application-view-tabs" class="gl-application-view-tabs" role="tablist" aria-label="応募一覧の表示切替">
                              <button
                                id="gl-view-schedule"
                                class="gl-application-view-tab is-active"
                                type="button"
                                role="tab"
                                aria-selected="true"
                                aria-controls="gl-application-view-schedule"
                              >
                                日程別
                              </button>
                              <button
                                id="gl-view-applicant"
                                class="gl-application-view-tab"
                                type="button"
                                role="tab"
                                aria-selected="false"
                                aria-controls="gl-application-view-applicant"
                                tabindex="-1"
                              >
                                応募者別
                              </button>
                              <button
                                id="gl-view-internal"
                                class="gl-application-view-tab"
                                type="button"
                                role="tab"
                                aria-selected="false"
                                aria-controls="gl-application-view-internal"
                                tabindex="-1"
                              >
                                内部スタッフ
                              </button>
                            </div>
                            <section
                              id="gl-application-view-schedule"
                              class="gl-application-view"
                              role="tabpanel"
                              aria-labelledby="gl-view-schedule"
                            >
                              <div id="gl-application-board" class="gl-shift-board" aria-live="polite"></div>
                            </section>
                            <section
                              id="gl-application-view-applicant"
                              class="gl-application-view"
                              role="tabpanel"
                              aria-labelledby="gl-view-applicant"
                              hidden
                              aria-hidden="true"
                            >
                              <div id="gl-application-list" class="gl-applicant-matrix-container"></div>
                            </section>
                            <section
                              id="gl-application-view-internal"
                              class="gl-application-view"
                              role="tabpanel"
                              aria-labelledby="gl-view-internal"
                              hidden
                              aria-hidden="true"
                            >
                              <section class="gl-internal-card" aria-labelledby="gl-internal-title">
                                <div class="gl-card-header gl-card-header--sub">
                                  <div>
                                    <h4 id="gl-internal-title" class="gl-card-subtitle">内部スタッフの登録・編集</h4>
                                    <p id="gl-internal-status" class="gl-card-status" role="status" aria-live="polite"></p>
                                  </div>
                                  <div class="gl-internal-actions">
                                    <button id="gl-internal-reset" class="btn btn-ghost btn-sm" type="button">クリア</button>
                                    <button id="gl-internal-delete" class="btn btn-danger btn-sm" type="button" disabled>削除</button>
                                    <button id="gl-internal-submit" class="btn btn-primary btn-sm" type="submit" form="gl-internal-form">
                                      内部スタッフを追加
                                    </button>
                                  </div>
                                </div>
                                <div class="gl-card-body gl-internal-body">
                                  <div class="gl-internal-list__container">
                                    <div class="gl-internal-list__header">
                                      <h5 class="gl-internal-list__title">内部スタッフ一覧</h5>
                                      <p class="gl-internal-list__hint">クリックするとフォームに読み込み、編集できます。</p>
                                    </div>
                                    <ul id="gl-internal-list" class="gl-internal-list" aria-live="polite"></ul>
                                  </div>
                                  <form id="gl-internal-form" class="gl-internal-form">
                                    <input id="gl-internal-id" type="hidden">
                                    <div class="gl-internal-grid">
                                      <label class="gl-input">
                                        <span class="gl-input__label">氏名</span>
                                        <input id="gl-internal-name" class="input" type="text" required placeholder="例: 山田 太郎">
                                      </label>
                                      <label class="gl-input">
                                        <span class="gl-input__label">氏名 (フリガナ)</span>
                                        <input id="gl-internal-phonetic" class="input" type="text" placeholder="例: ヤマダ タロウ">
                                      </label>
                                      <label class="gl-input">
                                        <span class="gl-input__label">メールアドレス</span>
                                        <input id="gl-internal-email" class="input" type="email" required placeholder="example@example.com">
                                      </label>
                                      <label class="gl-input">
                                        <span class="gl-input__label">学年</span>
                                        <select id="gl-internal-grade" class="input"></select>
                                      </label>
                                      <label class="gl-input">
                                        <span class="gl-input__label">性別</span>
                                        <select id="gl-internal-gender" class="input">
                                          <option value="" data-placeholder="true" disabled selected>性別を選択してください</option>
                                          <option value="男性">男性</option>
                                          <option value="女性">女性</option>
                                          <option value="その他">その他</option>
                                          <option value="回答しない">回答しない</option>
                                        </select>
                                      </label>
                                      <label class="gl-input">
                                        <span class="gl-input__label">学部</span>
                                        <select id="gl-internal-faculty" class="input"></select>
                                      </label>
                                      <div class="gl-input gl-input--full">
                                        <span class="gl-input__label">学部以下の所属</span>
                                        <div id="gl-internal-academic-fields" class="gl-internal-academic-fields"></div>
                                        <template id="gl-internal-academic-select-template">
                                          <div class="gl-academic-field">
                                            <label class="gl-academic-label"></label>
                                            <select class="input gl-academic-select"></select>
                                          </div>
                                        </template>
                                        <div id="gl-internal-academic-custom-field" class="gl-academic-custom" hidden>
                                          <label for="gl-internal-academic-custom" id="gl-internal-academic-custom-label" class="gl-input__label">
                                            所属（その他入力）
                                          </label>
                                          <input
                                            id="gl-internal-academic-custom"
                                            class="input"
                                            type="text"
                                            autocomplete="off"
                                            placeholder="所属名を入力してください"
                                          >
                                        </div>
                                      </div>
                                      <label class="gl-input">
                                        <span class="gl-input__label">サークル / 所属</span>
                                        <input id="gl-internal-club" class="input" type="text">
                                      </label>
                                      <label class="gl-input">
                                        <span class="gl-input__label">学籍番号</span>
                                        <input id="gl-internal-student-id" class="input" type="text">
                                      </label>
                                      <label class="gl-input gl-input--full">
                                        <span class="gl-input__label">備考</span>
                                        <textarea id="gl-internal-note" class="input" rows="2"></textarea>
                                      </label>
                                    </div>
                                    <fieldset class="gl-internal-shifts">
                                      <legend class="gl-internal-shifts__title">参加可能日程</legend>
                                      <p class="gl-internal-shifts__note">デフォルトで全日程にチェックが入ります。出られない日程は外してください。</p>
                                      <div id="gl-internal-shifts" class="gl-internal-shifts__list"></div>
                                    </fieldset>
                                  </form>
                                </div>
                              </section>
                            </section>
                          </div>
                        </div>
                      </section>
                    </div>
                  </section>
                </div>
              </div>
            </div>
          </div>
        </section>
        <section
          id="flow-panel-gl-faculties"
          class="module module--primary admin-module flow-card"
          data-panel="gl-faculties"
          aria-labelledby="flow-panel-gl-faculties-title"
          hidden
        >
          <div class="module-header">
            <div class="module-heading">
              <h2 id="flow-panel-gl-faculties-title">学部・学科設定</h2>
              <p class="module-description">
                GL応募フォームで共通利用する学部・学科の階層構造を編集します。イベントごとにコピーして活用できます。
              </p>
            </div>
          </div>
          <div class="module-body">
            <div class="flow-pane flow-pane--primary gl-panel">
              <section class="gl-config-card" aria-labelledby="gl-faculty-admin-title">
                <div class="gl-card-header">
                  <h3 id="gl-faculty-admin-title" class="gl-card-title">学部・学科リスト</h3>
                  <p id="gl-faculty-admin-status" class="gl-card-status" role="status" aria-live="polite"></p>
                </div>
                <div class="gl-card-body">
                  <p id="gl-faculty-admin-loading" class="gl-card-note" role="status">共通設定を読み込んでいます…</p>
                  <div id="gl-faculty-admin-content" hidden>
                    <p id="gl-faculty-admin-updated" class="gl-config-meta"></p>
                    <div id="gl-faculty-builder" class="gl-faculty-builder">
                      <div class="gl-faculty-builder-header">
                        <button id="gl-faculty-add" class="btn btn-secondary btn-sm" type="button">学部を追加</button>
                        <p class="gl-faculty-builder-note">弘前大学の「学部 → 学科 / 課程 → 専攻 → コース」のような階層をカード形式で設定できます。</p>
                      </div>
                      <p id="gl-faculty-empty" class="gl-faculty-empty">学部カードを追加して所属の階層構造を設定してください。</p>
                      <div id="gl-faculty-list" class="gl-faculty-list" aria-live="polite"></div>
                    </div>
                    <p class="gl-config-hint">各カードで学部名と階層ラベル（例: 学科・課程・専攻）を入力し、必要に応じて選択肢や下位階層を追加してください。選択肢を作成しない場合は自由入力欄として扱われます。</p>
                    <div class="gl-config-actions">
                      <button id="gl-faculty-admin-save" class="btn btn-primary btn-sm" type="button">共通設定を保存</button>
                      <button id="gl-faculty-admin-reset" class="btn btn-ghost btn-sm" type="button">変更を破棄</button>
                    </div>
                  </div>
                  <datalist id="gl-faculty-level-suggestions">
                    <option value="学科"></option>
                    <option value="課程"></option>
                    <option value="専攻"></option>
                    <option value="コース"></option>
                    <option value="プログラム"></option>
                    <option value="領域"></option>
                  </datalist>
                  <template id="gl-faculty-template">
                    <article class="gl-faculty-card" data-faculty-card>
                      <header class="gl-faculty-card-header">
                        <div class="gl-faculty-card-title">
                          <label class="gl-faculty-label">学部名
                            <input type="text" class="input" data-faculty-name placeholder="学部名を入力してください">
                          </label>
                        </div>
                        <div class="gl-faculty-card-actions">
                          <button type="button" class="btn btn-ghost btn-sm" data-move-up aria-label="1つ上に移動">↑</button>
                          <button type="button" class="btn btn-ghost btn-sm" data-move-down aria-label="1つ下に移動">↓</button>
                          <button type="button" class="btn btn-danger btn-sm" data-remove-faculty>削除</button>
                        </div>
                      </header>
                      <div class="gl-faculty-card-body">
                        <div class="gl-faculty-field">
                          <label class="gl-faculty-label">最上位の階層名
                            <input type="text" class="input" data-faculty-fallback list="gl-faculty-level-suggestions" placeholder="例: 学科">
                          </label>
                          <p class="gl-faculty-hint">選択肢を追加しない場合は、この名称の自由入力欄になります。</p>
                        </div>
                        <div data-level-container class="gl-faculty-level-root"></div>
                      </div>
                    </article>
                  </template>
                  <template id="gl-faculty-level-template">
                    <section class="gl-faculty-level" data-level>
                      <header class="gl-faculty-level-header">
                        <label class="gl-faculty-label">階層ラベル
                          <input type="text" class="input" data-level-label list="gl-faculty-level-suggestions" placeholder="例: 学科">
                        </label>
                        <label class="gl-faculty-checkbox">
                          <input type="checkbox" data-level-allow-custom checked>
                          <span>「その他」の自由入力を許可</span>
                        </label>
                        <button type="button" class="btn btn-ghost btn-sm" data-remove-level>階層を削除</button>
                      </header>
                      <div class="gl-faculty-options" data-options></div>
                      <div class="gl-faculty-level-footer">
                        <button type="button" class="btn btn-secondary btn-sm" data-add-option>選択肢を追加</button>
                      </div>
                    </section>
                  </template>
                  <template id="gl-faculty-option-template">
                    <article class="gl-faculty-option" data-option>
                      <div class="gl-faculty-option-header">
                        <label class="gl-faculty-label">名称
                          <input type="text" class="input" data-option-label placeholder="選択肢名を入力">
                        </label>
                        <button type="button" class="btn btn-ghost btn-sm" data-remove-option aria-label="選択肢を削除">削除</button>
                      </div>
                      <div class="gl-faculty-option-children" data-option-children></div>
                      <div class="gl-faculty-option-footer">
                        <button type="button" class="btn btn-ghost btn-sm" data-add-child>下位階層を追加</button>
                        <button type="button" class="btn btn-ghost btn-sm" data-remove-child hidden>下位階層を削除</button>
                      </div>
                    </article>
                  </template>
                </div>
              </section>
            </div>
          </div>
        </section>
        <!-- テロップ操作ツール: 本番テロップの送出面を iframe で統合 -->
        <section id="flow-panel-operator" class="flow-tool-panel flow-stage-panel" data-panel="operator" aria-labelledby="flow-panel-operator-title" hidden>
              <h2 id="flow-panel-operator-title" class="visually-hidden">テロップ操作</h2>
              <div id="operator-tool" class="embedded-tool" data-tool="operator">
                <div class="embedded-tool__surface operator-embedded" data-operator-embed>
                  <div id="op-loading-overlay" class="loading-overlay" aria-live="polite" hidden>
                    <div class="loading-backdrop"></div>
                    <div class="loading-panel" role="status" aria-label="読み込み中">
                      <div class="spinner" aria-hidden="true"></div>
                      <div class="loading-text"><span id="op-loading-text">初期化中…</span></div>
                      <div class="loading-sub">数秒かかる場合があります</div>
                      <ol id="op-loader-steps" class="loader-steps" aria-label="初期化ステップ"></ol>
                    </div>
                  </div>

                  <main id="op-main-container" class="layout-grid" hidden>
                    <section class="module module--primary" id="op-questions-panel" aria-labelledby="op-questions-title">
                      <div class="module-header">
                        <div class="module-heading">
                          <h1 id="op-questions-title">テロップ操作パネル</h1>
                          <p class="module-description">質問を選択・送出できます。</p>
                        </div>
                        <div class="status-bar" role="group" aria-label="送出状況">
                          <div class="render-indicator" title="OnAir 状態">
                            <span id="op-render-lamp" class="lamp" aria-hidden="true"></span>
                            <span id="op-render-phase" class="lamp-label">-</span>
                          </div>
                          <div class="render-summary" id="op-render-summary">
                            <div class="render-line">
                              <span class="label">オンエア:</span>
                              <span id="op-render-title" class="text-strong">—</span>
                            </div>
                            <div id="op-render-question" class="text-soft">—</div>
                            <div id="op-render-updated" class="text-meta">—</div>
                          </div>
                        </div>
                      </div>
                      <div class="module-body" id="op-questions-content">
                        <div class="cards-sticky">
                          <div class="tab-group tab-group--genre">
                            <span class="tab-group__label">ジャンル</span>
                            <div id="op-genre-tab-buttons" class="genre-tabs" role="tablist" aria-label="ジャンル">
                              <button class="genre-tab-button active" data-genre="all" role="tab" aria-selected="true">すべて</button>
                              <button class="genre-tab-button" data-genre="学び" role="tab" aria-selected="false">学び</button>
                              <button class="genre-tab-button" data-genre="活動" role="tab" aria-selected="false">活動</button>
                              <button class="genre-tab-button" data-genre="暮らし" role="tab" aria-selected="false">暮らし</button>
                              <button class="genre-tab-button" data-genre="食・スポット" role="tab" aria-selected="false">食・スポット</button>
                              <button class="genre-tab-button" data-genre="移動・季節" role="tab" aria-selected="false">移動・季節</button>
                              <button class="genre-tab-button" data-genre="その他" role="tab" aria-selected="false">その他</button>
                            </div>
                          </div>
                          <div class="tab-group tab-group--sub">
                            <span class="tab-group__label">質問種別</span>
                            <div id="op-sub-tab-buttons" class="sub-tabs" role="tablist" aria-label="質問種別">
                              <button class="sub-tab-button active" data-sub-tab="all" role="tab" aria-selected="true">すべて</button>
                              <button class="sub-tab-button" data-sub-tab="normal" role="tab" aria-selected="false">通常質問</button>
                              <button class="sub-tab-button" data-sub-tab="puq" role="tab" aria-selected="false">Pick Up Question</button>
                            </div>
                          </div>
                          <div class="cards-toolbar">
                            <div class="toolbar-left">
                              <label for="op-export-scope">出力範囲</label>
                              <select id="op-export-scope" class="input">
                                <option value="schedule">テロップ操作の日程</option>
                                <option value="event">イベント全日程</option>
                              </select>
                              <button id="op-export-csv-unanswered" class="btn btn-ghost btn-sm" type="button">未回答CSV</button>
                              <button id="op-export-csv-answered" class="btn btn-ghost btn-sm" type="button">回答済CSV</button>
                            </div>
                            <div class="toolbar-right">
                              <label class="chk">
                                <input id="op-select-all-checkbox" type="checkbox">
                                全選択
                              </label>
                            </div>
                          </div>
                        </div>
                        <div class="cards-scroll">
                          <div id="op-questions-cards" class="cards-list" aria-live="polite"></div>
                        </div>
                      </div>
                      <div id="op-action-panel" class="action-panel" hidden>
                        <button id="op-btn-display" class="btn btn-primary" data-mode="single" disabled>送出</button>
                        <button id="op-btn-unanswer" class="btn" data-mode="single" disabled>未回答へ戻す</button>
                        <button id="op-btn-edit" class="btn" data-mode="single" disabled>原稿修正</button>
                        <button id="op-btn-clear" class="btn btn-danger" data-mode="any">送出クリア</button>
                        <span id="op-selected-info">行を選択してください</span>
                        <div class="action-panel-right">
                          <button id="op-btn-batch-unanswer" class="btn btn-ghost" data-mode="multi">選択項目を未回答へ戻す</button>
                        </div>
                      </div>
                    </section>
                  </main>

                  <div id="op-edit-dialog" class="modal" role="dialog" aria-modal="true" aria-labelledby="op-edit-dialog-title" hidden>
                    <div class="modal-backdrop" data-dialog-dismiss="true"></div>
                    <div class="modal-panel">
                      <div class="modal-header">
                        <h2 id="op-edit-dialog-title">質問原稿の編集</h2>
                      </div>
                      <div class="modal-body">
                        <div class="modal-field">
                          <label for="op-edit-textarea">質問内容</label>
                          <textarea id="op-edit-textarea" class="input" rows="8" data-autofocus></textarea>
                        </div>
                        <p class="modal-helper">送出前に内容を整えてください。更新するとディスプレイにも即座に反映されます。</p>
                      </div>
                      <div class="modal-footer">
                        <button type="button" class="btn btn-ghost" id="op-edit-cancel-button">キャンセル</button>
                        <button type="button" class="btn btn-primary" id="op-edit-save-button">更新</button>
                      </div>
                    </div>
                  </div>

                  <div id="op-confirm-dialog" class="modal" role="dialog" aria-modal="true" aria-labelledby="op-confirm-dialog-title" hidden>
                    <div class="modal-backdrop" data-dialog-dismiss="true"></div>
                    <div class="modal-panel">
                      <div class="modal-header">
                        <h2 id="op-confirm-dialog-title">確認</h2>
                      </div>
                      <div class="modal-body">
                        <p id="op-confirm-dialog-message"></p>
                      </div>
                      <div class="modal-footer">
                        <button type="button" class="btn btn-ghost" id="op-confirm-cancel-button" data-dialog-dismiss="true">キャンセル</button>
                        <button type="button" class="btn btn-primary" id="op-confirm-accept-button">実行する</button>
                      </div>
                    </div>
                  </div>

                  <div id="op-conflict-dialog" class="modal" role="dialog" aria-modal="true" aria-labelledby="op-conflict-dialog-title" hidden>
                    <div class="modal-backdrop" data-dialog-dismiss="true"></div>
                    <div class="modal-panel">
                      <form id="op-conflict-form" class="modal-form">
                        <div class="modal-header">
                          <h2 id="op-conflict-dialog-title">日程の調整が必要です</h2>
                        </div>
                        <div class="modal-body">
                          <p id="op-conflict-description" class="modal-helper">複数のオペレーターが異なる日程を選択しています。送出する日程を選んでください。</p>
                          <fieldset id="op-conflict-options"></fieldset>
                          <div id="op-conflict-error" class="hub-alert hub-alert--error" role="alert" hidden></div>
                        </div>
                        <div class="modal-footer">
                          <button type="button" class="btn btn-ghost" id="op-conflict-cancel-button" data-dialog-dismiss="true">あとで決める</button>
                          <button type="submit" class="btn btn-primary" id="op-conflict-confirm-button">この日程に固定</button>
                        </div>
                      </form>
                    </div>
                  </div>
                </div>
              </div>
        </section>
        <!-- ルビ辞書ツール: テロップ読み上げ用の変換データを編集 -->
        <section id="op-dictionary-panel" class="module module--secondary flow-tool-panel flow-stage-panel" data-panel="dictionary" aria-labelledby="op-dictionary-title" hidden>
              <div class="module-header">
                <div class="module-heading">
                  <h2 id="op-dictionary-title">ルビ辞書管理</h2>
                  <p class="module-description">登録語句の追加や更新が即座にディスプレイへ反映されます。</p>
                </div>
                <div class="module-actions">
                  <button id="op-fetch-dictionary-button" class="btn btn-ghost" type="button">辞書を更新</button>
                </div>
              </div>
              <div class="module-body dictionary-body">
                <div id="op-dictionary-loading-overlay" class="loading-overlay" aria-live="polite" hidden>
                  <div class="loading-backdrop"></div>
                  <div class="loading-panel" role="status" aria-label="読み込み中">
                    <div class="spinner" aria-hidden="true"></div>
                    <div class="loading-text"><span id="op-dictionary-loading-text">辞書パネルを初期化しています…</span></div>
                    <div class="loading-sub">数秒かかる場合があります</div>
                    <ol id="op-dictionary-loader-steps" class="loader-steps" aria-label="辞書の初期化ステップ"></ol>
                  </div>
                </div>
                <form id="op-add-term-form" class="dictionary-form">
                  <input type="text" id="op-new-term" class="input" placeholder="単語" required>
                  <input type="text" id="op-new-ruby" class="input" placeholder="ルビ" required>
                  <button type="submit" class="btn btn-primary">追加</button>
                </form>
                <div class="dictionary-toolbar">
                  <label class="chk">
                    <input type="checkbox" id="op-dictionary-select-all" disabled>
                    全選択
                  </label>
                  <span id="op-dictionary-count" class="dictionary-count" aria-live="polite">登録なし</span>
                </div>
                <div class="cards-scroll">
                  <div id="op-dictionary-cards" class="dictionary-cards" aria-live="polite"></div>
                </div>
                <div id="op-dictionary-confirm-dialog" class="modal modal--inline" role="dialog" aria-modal="true" aria-labelledby="op-dictionary-confirm-dialog-title" hidden>
                  <div class="modal-backdrop" data-dialog-dismiss="true"></div>
                  <div class="modal-panel">
                    <div class="modal-header">
                      <h2 id="op-dictionary-confirm-dialog-title">確認</h2>
                    </div>
                    <div class="modal-body">
                      <p id="op-dictionary-confirm-dialog-message"></p>
                    </div>
                    <div class="modal-footer">
                      <button type="button" class="btn btn-ghost" id="op-dictionary-confirm-cancel-button" data-dialog-dismiss="true">キャンセル</button>
                      <button type="button" class="btn btn-danger" id="op-dictionary-confirm-accept-button">削除する</button>
                    </div>
                  </div>
                </div>
                <div id="op-dictionary-edit-dialog" class="modal modal--inline" role="dialog" aria-modal="true" aria-labelledby="op-dictionary-edit-dialog-title" hidden>
                  <div class="modal-backdrop" data-dialog-dismiss="true"></div>
                  <div class="modal-panel">
                    <div class="modal-header">
                      <h2 id="op-dictionary-edit-dialog-title">語句を編集</h2>
                    </div>
                    <form id="op-dictionary-edit-form" class="modal-form">
                      <div class="modal-body">
                        <div class="modal-field">
                          <label for="op-dictionary-edit-term">単語</label>
                          <input id="op-dictionary-edit-term" class="input" type="text" required data-autofocus>
                        </div>
                        <div class="modal-field">
                          <label for="op-dictionary-edit-ruby">ルビ</label>
                          <input id="op-dictionary-edit-ruby" class="input" type="text" required>
                        </div>
                      </div>
                      <div class="modal-footer">
                        <button type="button" class="btn btn-ghost" id="op-dictionary-edit-cancel-button">キャンセル</button>
                        <button type="submit" class="btn btn-primary" id="op-dictionary-edit-save-button">更新</button>
                      </div>
                    </form>
                  </div>
                </div>
              </div>
              <div id="op-dictionary-action-panel" class="action-panel is-idle">
                <button id="op-dictionary-btn-enable" class="btn btn-primary" type="button" disabled>有効にする</button>
                <button id="op-dictionary-btn-disable" class="btn" type="button" disabled>無効にする</button>
                <button id="op-dictionary-btn-edit" class="btn" type="button" disabled>編集</button>
                <button id="op-dictionary-btn-delete" class="btn btn-danger" type="button" disabled>削除</button>
                <span id="op-dictionary-selected-info">単語を選択してください</span>
                <div class="action-panel-right">
                  <button id="op-dictionary-btn-batch-enable" class="btn btn-ghost" type="button" hidden>選択項目を有効にする</button>
                  <button id="op-dictionary-btn-batch-disable" class="btn btn-ghost" type="button" hidden>選択項目を無効にする</button>
                  <button id="op-dictionary-btn-batch-delete" class="btn btn-danger" type="button" hidden>選択項目を削除</button>
                </div>
              </div>
        </section>
        <!-- Pick Up Question: オンエア中の質問選出ワークスペース -->
        <section id="op-pickup-panel" class="module module--secondary flow-tool-panel flow-stage-panel" data-panel="pickup" aria-labelledby="op-pickup-title" hidden>
          <div class="module-header">
            <div class="module-heading">
              <h2 id="op-pickup-title">Pick Up Question 管理</h2>
              <p class="module-description">Pick Up Question の候補を追加・編集し、ジャンルを整理できます。</p>
            </div>
            <div class="module-actions">
              <button id="op-pickup-open-add-button" class="btn btn-primary" type="button">質問を追加</button>
              <button id="op-pickup-refresh-button" class="btn btn-ghost" type="button">再読み込み</button>
            </div>
          </div>
          <div class="module-body pickup-body">
            <div id="op-pickup-loading-overlay" class="loading-overlay" aria-live="polite" hidden>
              <div class="loading-backdrop"></div>
              <div class="loading-panel" role="status" aria-label="読み込み中">
                <div class="spinner" aria-hidden="true"></div>
                <div class="loading-text"><span id="op-pickup-loading-text">Pick Upパネルを初期化しています…</span></div>
                <div class="loading-sub">数秒かかる場合があります</div>
                <ol id="op-pickup-loader-steps" class="loader-steps" aria-label="Pick Up 初期化ステップ"></ol>
              </div>
            </div>
            <div id="op-pickup-alert" class="hub-alert" role="alert" hidden></div>
            <div id="op-pickup-tabs" class="pickup-tabs" role="tablist" aria-label="ジャンルで絞り込む"></div>
            <div class="cards-scroll">
              <ul id="op-pickup-list" class="pickup-list" aria-live="polite"></ul>
              <p id="op-pickup-empty" class="entity-empty" hidden>条件に一致する Pick Up Question がありません。質問を追加するか、別のジャンルを選択してください。</p>
            </div>
            <div id="op-pickup-edit-dialog" class="modal modal--inline" role="dialog" aria-modal="true" aria-labelledby="op-pickup-edit-dialog-title" hidden>
              <div class="modal-backdrop" data-dialog-dismiss="true"></div>
              <div class="modal-panel">
                <div class="modal-header">
                  <h2 id="op-pickup-edit-dialog-title">Pick Up Question を編集</h2>
                </div>
                <form id="op-pickup-edit-form" class="modal-form">
                  <div class="modal-body">
                    <div class="modal-field">
                      <label for="op-pickup-edit-question">質問内容</label>
                      <textarea id="op-pickup-edit-question" class="input" rows="6" required data-autofocus></textarea>
                    </div>
                    <div class="modal-field">
                      <label for="op-pickup-edit-genre">ジャンル</label>
                      <select id="op-pickup-edit-genre" class="input" required></select>
                    </div>
                  </form>
                </div>
              </div>
              <div id="op-pickup-confirm-dialog" class="modal modal--inline" role="dialog" aria-modal="true" aria-labelledby="op-pickup-confirm-dialog-title" hidden>
                <div class="modal-backdrop" data-dialog-dismiss="true"></div>
                <div class="modal-panel">
                  <div class="modal-header">
                    <h2 id="op-pickup-confirm-dialog-title">確認</h2>
                  </div>
                  <div class="modal-body">
                    <p id="op-pickup-confirm-message"></p>
                  </div>
                  <div class="modal-footer">
                    <button type="button" class="btn btn-ghost" id="op-pickup-confirm-cancel-button" data-dialog-dismiss="true">キャンセル</button>
                    <button type="button" class="btn btn-danger" id="op-pickup-confirm-accept-button">削除する</button>
                  </div>
                  <div class="modal-footer">
                    <button type="button" class="btn btn-ghost" id="op-pickup-edit-cancel-button">キャンセル</button>
                    <button type="submit" class="btn btn-primary" id="op-pickup-edit-save-button">更新</button>
                  </div>
                </form>
              </div>
            </div>
            <div id="op-pickup-confirm-dialog" class="modal modal--inline" role="dialog" aria-modal="true" aria-labelledby="op-pickup-confirm-dialog-title" hidden>
              <div class="modal-backdrop" data-dialog-dismiss="true"></div>
              <div class="modal-panel">
                <div class="modal-header">
                  <h2 id="op-pickup-confirm-dialog-title">確認</h2>
                </div>
                <div class="modal-body">
                  <p id="op-pickup-confirm-message"></p>
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-ghost" id="op-pickup-confirm-cancel-button" data-dialog-dismiss="true">キャンセル</button>
                  <button type="button" class="btn btn-danger" id="op-pickup-confirm-accept-button">削除する</button>
                </div>
              </div>
            </div>
          </div>
          <div id="op-pickup-action-panel" class="action-panel is-idle">
            <button id="op-pickup-btn-edit" class="btn" type="button" disabled>編集</button>
            <button id="op-pickup-btn-delete" class="btn btn-danger" type="button" disabled>削除</button>
            <span id="op-pickup-selected-info">質問を選択してください</span>
          </div>
        </section>
        <!-- 操作ログ: 問題切り分け時に参照するトレースビュー -->
        <section id="op-logs-panel" class="module module--secondary flow-tool-panel flow-stage-panel" data-panel="logs" aria-labelledby="op-logs-title" hidden>
              <div class="module-header">
                <div class="module-heading">
                  <h2 id="op-logs-title">操作ログ</h2>
                  <p class="module-description">直近の操作履歴を確認し、異常を素早く検知できます。</p>
                </div>
                <div class="module-actions">
                  <button id="op-logs-refresh-button" class="btn btn-ghost" type="button">ログを更新</button>
                </div>
              </div>
              <div class="module-body logs-body">
                <div id="op-logs-loading-overlay" class="loading-overlay" aria-live="polite" hidden>
                  <div class="loading-backdrop"></div>
                  <div class="loading-panel" role="status" aria-label="読み込み中">
                    <div class="spinner" aria-hidden="true"></div>
                    <div class="loading-text"><span id="op-logs-loading-text">操作ログパネルを初期化しています…</span></div>
                    <div class="loading-sub">数秒かかる場合があります</div>
                    <ol id="op-logs-loader-steps" class="loader-steps" aria-label="操作ログの初期化ステップ"></ol>
                  </div>
                </div>
                <div id="op-logs-toolbar" class="logs-toolbar">
                  <input id="op-log-search" class="input" placeholder="検索 (user/action/details)">
                  <label class="chk"><input type="checkbox" id="op-log-autoscroll" checked> 自動スクロール</label>
                </div>
            <div id="op-logs-stream-view">
              <div id="op-log-stream" class="log-stream"></div>
            </div>
          </div>
        </section>
      </div>
      <aside id="events-chat" class="events-chat" aria-label="オペレーターチャット">
        <button
          type="button"
          class="events-mobile-close"
          aria-label="チャットを閉じる"
          data-mobile-close="chat"
        >
          <svg class="events-mobile-close__icon" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
            <path d="M6.7 5.3 5.3 6.7 10.6 12l-5.3 5.3 1.4 1.4L12 13.4l5.3 5.3 1.4-1.4L13.4 12l5.3-5.3-1.4-1.4L12 10.6z" />
          </svg>
        </button>
        <section id="flow-chat-panel" class="chat-panel" aria-labelledby="flow-chat-title">
          <div class="chat-panel__header">
            <div class="chat-panel__heading">
              <h2 id="flow-chat-title">オペレーターチャット</h2>
              <span id="flow-chat-status" class="chat-status" aria-live="polite">未接続</span>
            </div>
            <div
              id="flow-chat-attention"
              class="chat-attention"
              role="status"
              aria-live="polite"
              hidden
            >
              <span class="chat-attention__label">新着</span>
              <span id="flow-chat-attention-count" class="chat-attention__count"></span>
              <span id="flow-chat-attention-text" class="visually-hidden"></span>
            </div>
          </div>
          <div class="chat-panel__body">
            <div
              id="flow-chat-scroll"
              class="chat-scroll"
              role="log"
              aria-live="polite"
              aria-relevant="additions"
              tabindex="0"
            >
              <p id="flow-chat-empty" class="chat-empty">まだメッセージがありません。最初のメッセージを送信しましょう。</p>
              <div id="flow-chat-messages" class="chat-messages"></div>
            </div>
            <button id="flow-chat-unread-button" class="chat-unread" type="button" hidden>
              新着メッセージ <span id="flow-chat-unread-count"></span>
            </button>
            <div id="flow-chat-menu" class="chat-context" role="menu" hidden>
              <button type="button" class="chat-context__item" data-chat-action="reply" role="menuitem">
                リプライ
              </button>
              <button type="button" class="chat-context__item" data-chat-action="copy" role="menuitem">
                コピー
              </button>
              <button
                type="button"
                id="flow-chat-menu-cancel"
                class="chat-context__item"
                data-chat-action="cancel"
                role="menuitem"
              >
                送信取り消し
              </button>
            </div>
          </div>
          <form id="flow-chat-form" class="chat-form" novalidate>
            <label class="visually-hidden" for="flow-chat-input">メッセージ</label>
            <div class="chat-composer">
              <div class="chat-composer__input">
                <div id="flow-chat-reply" class="chat-reply" hidden>
                  <span class="chat-reply__bar" aria-hidden="true"></span>
                  <div class="chat-reply__content">
                    <span id="flow-chat-reply-author" class="chat-reply__author"></span>
                    <p id="flow-chat-reply-text" class="chat-reply__text"></p>
                  </div>
                  <button
                    type="button"
                    id="flow-chat-reply-cancel"
                    class="chat-reply__dismiss"
                    aria-label="引用をキャンセル"
                  >
                    <span aria-hidden="true">×</span>
                  </button>
                </div>
                <textarea
                  id="flow-chat-input"
                  class="chat-input input"
                  name="message"
                  rows="1"
                  maxlength="500"
                  placeholder="ログインするとメッセージを送信できます"
                  disabled
                ></textarea>
              </div>
              <button id="flow-chat-send-button" class="chat-composer__submit" type="submit" disabled>
                送信
              </button>
            </div>
            <div class="chat-form__footer">
              <p id="flow-chat-error" class="chat-error" role="alert" hidden></p>
              <p class="chat-form__shortcut" aria-hidden="true"><kbd>/</kbd> で入力にフォーカス, <kbd>Ctrl</kbd><span class="kbd-separator">/</span><kbd>⌘</kbd><kbd>Enter</kbd> で送信, <kbd>Esc</kbd> で入力から回復, <kbd>M</kbd> でフォーカスを戻す</p>
            </div>
          </form>
        </section>

        <section id="side-telop-panel" class="module module--secondary side-telop-panel" aria-labelledby="side-telop-title">
          <div class="side-telop-panel__header">
            <div class="side-telop-panel__heading">
              <h2 id="side-telop-title">右サイドテロップ</h2>
              <p class="side-telop-panel__description">
                表示する文言をあらかじめ登録し、どれか1つを常に表示します。日程を選択すると編集できます。<br>キーボードショートカット: <kbd>Alt</kbd><span class="kbd-separator">/</span><kbd>⌥</kbd><kbd>T</kbd> でこのパネルにフォーカス, <kbd>↑</kbd><kbd>↓</kbd> で選択, <kbd>A</kbd> で追加, <kbd>E</kbd> で編集, <kbd>D</kbd> で削除, <kbd>M</kbd> でフォーカスを戻す
              </p>
            </div>
          </div>
          <div class="side-telop-panel__body">
            <p id="side-telop-empty" class="side-telop-empty">まだ文言がありません。追加ボタンから追加してください。</p>
            <ol id="side-telop-list" class="side-telop-list"></ol>
          </div>
          <div class="side-telop-panel__actions">
            <div class="side-telop-panel__toolbar">
              <button id="side-telop-add" class="btn btn-primary btn-sm" type="button">追加 <kbd>A</kbd></button>
              <button id="side-telop-edit" class="btn btn-ghost btn-sm" type="button" disabled>編集 <kbd>E</kbd></button>
              <button id="side-telop-delete" class="btn btn-ghost btn-sm" type="button" disabled>削除 <kbd>D</kbd></button>
            </div>
            <span id="side-telop-selection-label" class="side-telop-selection" role="status">テロップを選択してください</span>
          </div>
          <form id="side-telop-form" class="side-telop-form" novalidate hidden>
            <label for="side-telop-text">文言 <kbd>A</kbd></label>
            <textarea
              id="side-telop-text"
              class="input"
              rows="3"
              placeholder="右サイドテロップに表示する文言を入力"
              required
            ></textarea>
            <div class="side-telop-form__actions">
              <div class="side-telop-form__toolbar">
                <button id="side-telop-edit" class="btn btn-ghost btn-sm" type="button" disabled>編集 <kbd>E</kbd></button>
                <button id="side-telop-delete" class="btn btn-ghost btn-sm" type="button" disabled>削除 <kbd>D</kbd></button>
                <span id="side-telop-selection-label" class="side-telop-selection" role="status">テロップを選択してください</span>
              </div>
              <div class="side-telop-form__submit">
                <button id="side-telop-submit" class="btn btn-primary btn-sm" type="submit">追加</button>
                <button id="side-telop-cancel" class="btn btn-ghost btn-sm" type="button" hidden>キャンセル</button>
              </div>
            </div>
          </form>
        </section>
      </aside>
    </div>
  </main>

  <div
    id="events-mobile-overlay"
    class="events-mobile-overlay"
    data-mobile-overlay
    hidden
  >
    <div class="events-mobile-overlay__backdrop" data-mobile-overlay-dismiss aria-hidden="true"></div>
  </div>

  <div id="flow-event-dialog" class="modal" role="dialog" aria-modal="true" aria-labelledby="flow-event-dialog-title" hidden>
    <div class="modal-backdrop" data-dialog-dismiss="true"></div>
    <div class="modal-panel">
      <form id="flow-event-form">
        <div class="modal-header">
          <h2 id="flow-event-dialog-title">イベントを追加</h2>
        </div>
        <div class="modal-body">
          <div class="modal-field">
            <label for="flow-event-name-input">イベント名</label>
            <input id="flow-event-name-input" name="event-name" class="input" type="text" autocomplete="off" required data-autofocus>
          </div>
          <p class="modal-helper">イベント名を入力してください。</p>
          <p id="flow-event-error" class="form-error" role="alert" hidden></p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-ghost" data-dialog-dismiss="true">キャンセル</button>
          <button type="submit" class="btn btn-primary">追加</button>
        </div>
      </form>
    </div>
  </div>

  <div id="op-pickup-add-dialog" class="modal" role="dialog" aria-modal="true" aria-labelledby="op-pickup-add-dialog-title" hidden>
    <div class="modal-backdrop" data-dialog-dismiss="true"></div>
    <div class="modal-panel">
      <form id="op-pickup-form" class="modal-form">
        <div class="modal-header">
          <h2 id="op-pickup-add-dialog-title">Pick Up Question を追加</h2>
        </div>
        <div class="modal-body pickup-add-body">
          <div class="modal-field">
            <label for="op-pickup-question">質問内容</label>
            <textarea id="op-pickup-question" class="input" rows="6" placeholder="質問内容" required data-autofocus></textarea>
          </div>
          <div class="modal-field">
            <label for="op-pickup-genre">ジャンル</label>
            <select id="op-pickup-genre" class="input" required></select>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-ghost" id="op-pickup-add-cancel-button" data-dialog-dismiss="true">キャンセル</button>
          <button type="submit" class="btn btn-primary">追加</button>
        </div>
      </form>
    </div>
  </div>

  <div id="side-telop-dialog" class="modal" role="dialog" aria-modal="true" aria-labelledby="side-telop-dialog-title" hidden>
    <div class="modal-backdrop" data-dialog-dismiss="true"></div>
    <div class="modal-panel">
      <form id="side-telop-dialog-form" class="modal-form">
        <div class="modal-header">
          <h2 id="side-telop-dialog-title">右サイドテロップを追加</h2>
        </div>
        <div class="modal-body">
          <div class="modal-field">
            <label for="side-telop-dialog-text">文言</label>
            <textarea id="side-telop-dialog-text" class="input" rows="4" placeholder="右サイドテロップに表示する文言を入力" required data-autofocus></textarea>
          </div>
          <p id="side-telop-dialog-error" class="form-error" role="alert" hidden></p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-ghost" id="side-telop-dialog-cancel" data-dialog-dismiss="true">キャンセル</button>
          <button type="submit" class="btn btn-primary" id="side-telop-dialog-submit">追加</button>
        </div>
      </form>
    </div>
  </div>

  <div id="flow-schedule-dialog" class="modal" role="dialog" aria-modal="true" aria-labelledby="flow-schedule-dialog-title" hidden>
    <div class="modal-backdrop" data-dialog-dismiss="true"></div>
    <div class="modal-panel">
      <form id="flow-schedule-form">
        <div class="modal-header">
          <h2 id="flow-schedule-dialog-title">日程を追加</h2>
        </div>
        <div class="modal-body">
          <div class="modal-field">
            <label for="flow-schedule-label-input">日程の表示名</label>
            <input id="flow-schedule-label-input" name="schedule-label" class="input" type="text" autocomplete="off" required data-autofocus>
          </div>
          <div class="modal-field">
            <label for="flow-schedule-location-input">場所</label>
            <input
              id="flow-schedule-location-input"
              name="schedule-location"
              class="input"
              type="text"
              list="flow-schedule-location-list"
              autocomplete="off"
              placeholder="会場や集合場所など"
            >
            <datalist id="flow-schedule-location-list"></datalist>
          </div>
          <div class="modal-field">
            <label for="flow-schedule-date-input">日付</label>
            <input id="flow-schedule-date-input" name="schedule-date" class="input" type="date" required>
          </div>
          <div class="modal-field">
            <div id="flow-schedule-dialog-calendar" class="dialog-calendar" aria-hidden="false">
              <div class="dialog-calendar-header">
                <button
                  id="flow-schedule-dialog-calendar-prev"
                  class="dialog-calendar-nav"
                  type="button"
                  aria-label="前の月を表示"
                >
                  <span aria-hidden="true">‹</span>
                </button>
                <div id="flow-schedule-dialog-calendar-title" class="dialog-calendar-title" aria-live="polite"></div>
                <button
                  id="flow-schedule-dialog-calendar-next"
                  class="dialog-calendar-nav"
                  type="button"
                  aria-label="次の月を表示"
                >
                  <span aria-hidden="true">›</span>
                </button>
              </div>
              <div class="dialog-calendar-weekdays" aria-hidden="true">
                <span>日</span>
                <span>月</span>
                <span>火</span>
                <span>水</span>
                <span>木</span>
                <span>金</span>
                <span>土</span>
              </div>
              <div
                id="flow-schedule-dialog-calendar-grid"
                class="dialog-calendar-grid"
                role="grid"
                aria-label="日付を選択"
              ></div>
            </div>
          </div>
          <div class="modal-field">
            <label for="flow-schedule-start-input">開始時刻</label>
            <input id="flow-schedule-start-input" name="schedule-start" class="input" type="time" required>
          </div>
          <div class="modal-field">
            <label for="flow-schedule-end-input">終了時刻</label>
            <input id="flow-schedule-end-input" name="schedule-end" class="input" type="time" required>
          </div>
          <p class="modal-helper">開始から終了の時刻は参加者の案内に使用されます。</p>
          <div class="modal-field">
            <label class="checkbox-label">
              <input id="flow-schedule-recruit-gl-input" name="schedule-recruit-gl" class="checkbox" type="checkbox" checked>
              <span>GLを募集する</span>
            </label>
            <p class="modal-helper">練習用の日程など、GL募集を行わない場合はチェックを外してください。</p>
          </div>
          <p id="flow-schedule-error" class="form-error" role="alert" hidden></p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-ghost" data-dialog-dismiss="true">キャンセル</button>
          <button type="submit" class="btn btn-primary">追加</button>
        </div>
      </form>
    </div>
  </div>

  <div
    id="flow-schedule-conflict-dialog"
    class="modal"
    role="dialog"
    aria-modal="true"
    aria-labelledby="flow-schedule-conflict-title"
    hidden
  >
    <div class="modal-backdrop" data-dialog-dismiss="true"></div>
    <div class="modal-panel">
      <form id="flow-schedule-conflict-form" class="modal-form">
        <div class="modal-header">
          <h2 id="flow-schedule-conflict-title">テロップ操作の日程を選択</h2>
        </div>
        <div class="modal-body">
          <p id="flow-schedule-conflict-description" class="modal-helper">
            同じイベントで複数の日程が選択されています。テロップ操作パネルで操作する日程を選んでください。
          </p>
          <div class="modal-field">
            <h3 id="flow-schedule-conflict-presence-heading" class="modal-label">現在の選択状況</h3>
            <ul
              id="flow-schedule-conflict-presence"
              class="channel-presence-list"
              aria-labelledby="flow-schedule-conflict-presence-heading"
            ></ul>
            <p
              id="flow-schedule-conflict-presence-empty"
              class="modal-helper"
              aria-live="polite"
              hidden
            >他のオペレーターの選択情報はありません。</p>
          </div>
          <fieldset
            id="flow-schedule-conflict-options"
            class="modal-field"
            aria-describedby="flow-schedule-conflict-description"
          >
            <legend class="modal-label">テロップ操作で使用する日程</legend>
          </fieldset>
          <div id="flow-schedule-conflict-error" class="hub-alert hub-alert--error" role="alert" hidden></div>
        </div>
        <div class="modal-footer">
          <button
            type="submit"
            class="btn btn-primary"
            id="flow-schedule-conflict-confirm-button"
            data-autofocus="true"
          >この日程で確定する</button>
        </div>
      </form>
    </div>
  </div>

  <div
    id="flow-operator-mode-dialog"
    class="modal"
    role="dialog"
    aria-modal="true"
    aria-labelledby="flow-operator-mode-title"
    hidden
  >
    <div class="modal-backdrop" data-dialog-dismiss="true"></div>
    <div class="modal-panel">
      <form id="flow-operator-mode-form" class="modal-form">
        <div class="modal-header">
          <h2 id="flow-operator-mode-title">テロップ操作のモードを選択</h2>
        </div>
        <div class="modal-body">
          <p id="flow-operator-mode-summary" class="modal-helper"></p>
          <fieldset
            id="flow-operator-mode-options"
            class="modal-field"
            aria-describedby="flow-operator-mode-summary"
          >
            <legend class="modal-label">利用モード</legend>
          </fieldset>
          <div id="flow-operator-mode-error" class="hub-alert hub-alert--error" role="alert" hidden></div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-ghost" id="flow-operator-mode-cancel-button" data-dialog-dismiss="true">キャンセル</button>
          <button type="submit" class="btn btn-primary" id="flow-operator-mode-confirm-button" data-autofocus="true">決定する</button>
        </div>
      </form>
    </div>
  </div>

  <div
    id="flow-schedule-fallback-dialog"
    class="modal"
    role="dialog"
    aria-modal="true"
    aria-labelledby="flow-schedule-fallback-title"
    hidden
  >
    <div class="modal-backdrop" data-dialog-dismiss="true"></div>
    <div class="modal-panel">
      <form id="flow-schedule-fallback-form" class="modal-form">
        <div class="modal-header">
          <h2 id="flow-schedule-fallback-title">テロップ操作の対応を選択</h2>
        </div>
        <div class="modal-body">
          <p id="flow-schedule-fallback-summary" class="modal-helper"></p>
          <p id="flow-schedule-fallback-current" class="modal-helper"></p>
          <fieldset
            id="flow-schedule-fallback-options"
            class="modal-field"
            aria-describedby="flow-schedule-fallback-summary"
          >
            <legend class="modal-label">対応方法</legend>
          </fieldset>
          <div id="flow-schedule-fallback-error" class="hub-alert hub-alert--error" role="alert" hidden></div>
        </div>
        <div class="modal-footer">
          <button
            type="button"
            class="btn btn-ghost"
            id="flow-schedule-fallback-cancel-button"
            data-dialog-dismiss="true"
          >キャンセル</button>
          <button
            type="submit"
            class="btn btn-primary"
            id="flow-schedule-fallback-confirm-button"
            data-autofocus="true"
          >決定する</button>
        </div>
      </form>
    </div>
  </div>

  <div
    id="flow-schedule-consensus-toast"
    class="flow-consensus-toast"
    role="status"
    aria-live="assertive"
    hidden
  ></div>

  <div
    id="flow-schedule-completion-dialog"
    class="modal"
    role="dialog"
    aria-modal="true"
    aria-labelledby="flow-schedule-completion-title"
    hidden
  >
    <div class="modal-backdrop" data-dialog-dismiss="true"></div>
    <div class="modal-panel">
      <div class="modal-header">
        <h2 id="flow-schedule-completion-title">日程が確定されました</h2>
      </div>
      <div class="modal-body">
        <p class="modal-helper">以下のツールにアクセスできます。キーボードショートカット（<kbd>3</kbd>〜<kbd>9</kbd>）も使用できます。</p>
        <nav class="modal-nav" aria-label="ツール選択">
          <button id="flow-completion-participants" class="btn btn-primary btn-sm" type="button" data-panel-target="participants">参加者リスト <kbd>3</kbd></button>
          <button id="flow-completion-gl" class="btn btn-primary btn-sm" type="button" data-panel-target="gl">GLリスト <kbd>4</kbd></button>
          <button id="flow-completion-gl-faculties" class="btn btn-primary btn-sm" type="button" data-panel-target="gl-faculties">学部・学科設定 <kbd>5</kbd></button>
          <button id="flow-completion-operator" class="btn btn-primary btn-sm" type="button" data-panel-target="operator">テロップ操作 <kbd>6</kbd></button>
          <button id="flow-completion-dictionary" class="btn btn-primary btn-sm" type="button" data-panel-target="dictionary">ルビ辞書 <kbd>7</kbd></button>
          <button id="flow-completion-pickup" class="btn btn-primary btn-sm" type="button" data-panel-target="pickup">Pick Up Question <kbd>8</kbd></button>
          <button id="flow-completion-logs" class="btn btn-primary btn-sm" type="button" data-panel-target="logs">操作ログ <kbd>9</kbd></button>
        </nav>
        <div class="modal-field">
          <button id="flow-completion-copy-url" class="btn btn-ghost btn-sm" type="button">表示URLをコピー</button>
          <span id="flow-completion-copy-status" class="visually-hidden" aria-live="polite"></span>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-ghost" id="flow-schedule-completion-close-button" data-dialog-dismiss="true">閉じる</button>
      </div>
    </div>
  </div>


  <div
    id="flow-fullscreen-dialog"
    class="modal"
    role="dialog"
    aria-modal="true"
    aria-labelledby="flow-fullscreen-dialog-title"
    hidden
  >
    <div class="modal-backdrop" data-dialog-dismiss="true"></div>
    <div class="modal-panel">
      <div class="modal-header">
        <h2 id="flow-fullscreen-dialog-title">表示モードを選択</h2>
      </div>
      <div class="modal-body">
        <p class="modal-helper">ログインが完了しました。フルスクリーンで続けますか？</p>
        <p id="flow-fullscreen-support-note" class="modal-helper" hidden>このブラウザではフルスクリーンが利用できません。</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary" id="flow-fullscreen-enter-button" data-autofocus="true">フルスクリーンで続行 <kbd>F</kbd></button>
        <button type="button" class="btn btn-ghost" id="flow-fullscreen-stay-button" data-dialog-dismiss="true">通常表示のまま <kbd>N</kbd></button>
      </div>
    </div>
  </div>


  <div id="print-dialog" class="modal modal--fullscreen" role="dialog" aria-modal="true" aria-labelledby="print-dialog-title" hidden>
    <div class="modal-backdrop" data-dialog-dismiss="true"></div>
    <div class="modal-panel modal-panel--print modal-panel--fullscreen">
      <div class="modal-header print-modal__header">
        <div class="print-modal__headline">
          <h2 id="print-dialog-title">印刷</h2>
          <p id="print-preview-meta" class="print-preview__meta"></p>
        </div>
        <div class="print-preview__actions">
          <button id="print-preview-print" class="btn btn-primary btn-sm" type="button" disabled>印刷</button>
          <button id="print-preview-close" class="btn btn-ghost btn-sm" type="button">閉じる</button>
        </div>
      </div>
      <div class="modal-body print-modal__body">
        <div id="print-preview" class="print-preview print-preview--immersive">
          <div class="print-preview__body">
            <div class="print-preview__panel">
              <div class="print-preview__frame">
                <iframe
                  id="print-preview-frame"
                  title="参加者リストの印刷プレビュー"
                  referrerpolicy="no-referrer"
                ></iframe>
              </div>
              <div
                id="print-preview-note"
                class="print-preview__note"
                role="status"
                aria-live="polite"
                aria-atomic="true"
              >
                印刷設定を選ぶとここに最新のプレビューが表示されます。
              </div>
            </div>
            <div class="print-preview__settings" aria-labelledby="print-settings-title">
              <form id="print-settings-form" class="print-settings-form">
                <div class="print-settings-form__header">
                  <h3 id="print-settings-title" class="print-settings-form__title">印刷設定</h3>
                  <p class="print-settings-form__helper">用紙やヘッダー/フッターを整えてから印刷してください。</p>
                </div>
                <div class="print-settings-form__fields">
                  <div class="modal-field">
                    <label for="print-paper-size">用紙サイズ</label>
                    <select id="print-paper-size" name="print-paper-size" class="input" data-autofocus>
                      <option value="Letter">Letter (21.6cm × 27.9cm)</option>
                      <option value="Tabloid">Tabloid (27.9cm × 43.2cm)</option>
                      <option value="Legal">Legal (21.6cm × 35.6cm)</option>
                      <option value="Statement">Statement (14.0cm × 21.6cm)</option>
                      <option value="Executive">Executive (18.4cm × 26.7cm)</option>
                      <option value="Folio">Folio (21.6cm × 33.0cm)</option>
                      <option value="A3">A3 (29.7cm × 42.0cm)</option>
                      <option value="A4">A4 (21.0cm × 29.7cm)</option>
                      <option value="A5">A5 (14.8cm × 21.0cm)</option>
                      <option value="B4">B4 (25.0cm × 35.3cm)</option>
                      <option value="B5">B5 (17.6cm × 25.0cm)</option>
                      <option value="Custom">カスタムサイズ</option>
                    </select>
                  </div>
                  <div id="print-custom-size" class="modal-field print-settings__custom" hidden>
                    <div class="print-settings__custom-inputs">
                      <label class="print-settings__custom-field" for="print-custom-width">
                        <span class="print-settings__custom-field-label">幅</span>
                        <div class="print-settings__custom-control">
                          <input
                            id="print-custom-width"
                            name="print-custom-width"
                            class="input input--dense"
                            type="number"
                            min="10"
                            max="2000"
                            step="1"
                            inputmode="decimal"
                          >
                          <span class="print-settings__custom-suffix" aria-hidden="true">mm</span>
                        </div>
                      </label>
                      <span class="print-settings__custom-separator" aria-hidden="true">×</span>
                      <label class="print-settings__custom-field" for="print-custom-height">
                        <span class="print-settings__custom-field-label">高さ</span>
                        <div class="print-settings__custom-control">
                          <input
                            id="print-custom-height"
                            name="print-custom-height"
                            class="input input--dense"
                            type="number"
                            min="10"
                            max="2000"
                            step="1"
                            inputmode="decimal"
                          >
                          <span class="print-settings__custom-suffix" aria-hidden="true">mm</span>
                        </div>
                      </label>
                    </div>
                    <p class="modal-helper">用紙の縦横は「ページの向き」に合わせて自動で入れ替わります。</p>
                  </div>
                  <div class="modal-field">
                    <label for="print-orientation">ページの向き</label>
                    <select id="print-orientation" name="print-orientation" class="input">
                      <option value="portrait">縦</option>
                      <option value="landscape">横</option>
                    </select>
                  </div>
                  <div class="modal-field">
                    <label for="print-margin">余白</label>
                    <select id="print-margin" name="print-margin" class="input">
                      <option value="5mm">せまめ (5mm)</option>
                      <option value="10mm">ふつう (10mm)</option>
                      <option value="15mm">ひろめ (15mm)</option>
                    </select>
                  </div>
                  <fieldset class="modal-field">
                    <legend class="modal-label">ヘッダー</legend>
                    <label class="chk">
                      <input id="print-show-header" name="print-show-header" type="checkbox" checked>
                      <span>ヘッダー (タイトルとメタ情報) を表示する</span>
                    </label>
                    <label class="chk">
                      <input id="print-repeat-header" name="print-repeat-header" type="checkbox">
                      <span>複数ページの先頭にヘッダーを繰り返す</span>
                    </label>
                  </fieldset>
                  <fieldset class="modal-field">
                    <legend class="modal-label">フッター</legend>
                    <label class="chk">
                      <input id="print-show-page-number" name="print-show-page-number" type="checkbox" checked>
                      <span>ページ番号を表示する</span>
                    </label>
                    <label class="chk">
                      <input id="print-show-date" name="print-show-date" type="checkbox" checked>
                      <span>現在の日付を表示する</span>
                    </label>
                    <label class="chk">
                      <input id="print-show-time" name="print-show-time" type="checkbox" checked>
                      <span>現在の時刻を表示する</span>
                    </label>
                  </fieldset>
                  <fieldset class="modal-field">
                    <legend class="modal-label">参加者の連絡先</legend>
                    <label class="chk">
                      <input id="print-show-phone" name="print-show-phone" type="checkbox" checked>
                      <span>電話番号を表示する</span>
                    </label>
                    <label class="chk">
                      <input id="print-show-email" name="print-show-email" type="checkbox" checked>
                      <span>メールアドレスを表示する</span>
                    </label>
                  </fieldset>
                </div>
                <div class="print-settings-form__footer">
                  <button type="submit" class="btn btn-primary btn-sm">プレビュー更新</button>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div id="flow-confirm-dialog" class="modal" role="dialog" aria-modal="true" aria-labelledby="flow-confirm-dialog-title" hidden>
    <div class="modal-backdrop" data-dialog-dismiss="true"></div>
    <div class="modal-panel">
      <div class="modal-header">
        <h2 id="flow-confirm-dialog-title">確認</h2>
      </div>
      <div class="modal-body">
        <p id="flow-confirm-dialog-message"></p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-ghost" id="flow-confirm-cancel-button" data-dialog-dismiss="true">キャンセル</button>
        <button type="button" class="btn btn-danger" id="flow-confirm-accept-button">実行する</button>
      </div>
    </div>
  </div>

  <div id="flow-internal-staff-registration-dialog" class="modal" role="dialog" aria-modal="true" aria-labelledby="flow-internal-staff-registration-dialog-title" hidden>
    <div class="modal-backdrop" data-dialog-dismiss="true"></div>
    <div class="modal-panel modal-panel--large">
      <div class="modal-header">
        <h2 id="flow-internal-staff-registration-dialog-title">内部スタッフ登録</h2>
      </div>
      <div class="modal-body">
        <p class="modal-helper">GLリスト管理パネルの内部スタッフとして登録されていません。登録を完了してください。</p>
        <form id="flow-internal-staff-registration-form">
          <div class="modal-field">
            <label for="flow-internal-staff-event-select">イベント <span class="required">必須</span></label>
            <select id="flow-internal-staff-event-select" name="event" class="input" required data-autofocus>
              <option value="">イベントを選択してください</option>
            </select>
          </div>
          <div class="modal-field">
            <label for="flow-internal-staff-name">氏名 <span class="required">必須</span></label>
            <input id="flow-internal-staff-name" name="name" type="text" class="input" required>
          </div>
          <div class="modal-field">
            <label for="flow-internal-staff-email">メールアドレス <span class="required">必須</span></label>
            <input id="flow-internal-staff-email" name="email" type="email" class="input" required>
          </div>
          <div class="modal-field">
            <label for="flow-internal-staff-phonetic">フリガナ</label>
            <input id="flow-internal-staff-phonetic" name="phonetic" type="text" class="input">
          </div>
          <div class="modal-field">
            <label for="flow-internal-staff-grade">学年</label>
            <select id="flow-internal-staff-grade" name="grade" class="input">
              <option value="" data-placeholder="true" disabled selected>学年を選択してください</option>
            </select>
          </div>
          <div class="modal-field">
            <label for="flow-internal-staff-gender">性別</label>
            <select id="flow-internal-staff-gender" name="gender" class="input">
              <option value="" data-placeholder="true" disabled selected>性別を選択してください</option>
              <option value="男性">男性</option>
              <option value="女性">女性</option>
              <option value="その他">その他</option>
              <option value="回答しない">回答しない</option>
            </select>
          </div>
          <div class="modal-field">
            <label for="flow-internal-staff-faculty">学部 <span class="required">必須</span></label>
            <select id="flow-internal-staff-faculty" name="faculty" class="input" required>
              <option value="" data-placeholder="true" disabled selected>学部を選択してください</option>
            </select>
          </div>
          <div class="modal-field">
            <span class="modal-label">学部以下の所属</span>
            <div id="flow-internal-staff-academic-fields" class="gl-internal-academic-fields"></div>
            <template id="flow-internal-staff-academic-select-template">
              <div class="gl-academic-field">
                <label class="gl-academic-label"></label>
                <select class="input gl-academic-select"></select>
              </div>
            </template>
            <div id="flow-internal-staff-academic-custom-field" class="gl-academic-custom" hidden>
              <label for="flow-internal-staff-academic-custom" id="flow-internal-staff-academic-custom-label" class="gl-input__label">
                所属（その他入力）
              </label>
              <input
                id="flow-internal-staff-academic-custom"
                class="input"
                type="text"
                autocomplete="off"
                placeholder="所属名を入力してください"
              >
            </div>
          </div>
          <div class="modal-field">
            <label for="flow-internal-staff-club">サークル / 所属</label>
            <input id="flow-internal-staff-club" name="club" type="text" class="input">
          </div>
          <div class="modal-field">
            <label for="flow-internal-staff-student-id">学籍番号</label>
            <input id="flow-internal-staff-student-id" name="student-id" type="text" class="input">
          </div>
          <div class="modal-field">
            <label for="flow-internal-staff-note">備考</label>
            <textarea id="flow-internal-staff-note" name="note" class="input" rows="3"></textarea>
          </div>
          <p id="flow-internal-staff-registration-error" class="form-error" role="alert" hidden></p>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-ghost" id="flow-internal-staff-registration-cancel-button" data-dialog-dismiss="true">後で登録</button>
        <button type="submit" form="flow-internal-staff-registration-form" class="btn btn-primary" id="flow-internal-staff-registration-submit-button">登録する</button>
      </div>
    </div>
  </div>

  <telop-footer year="2025"></telop-footer>

  <script type="module" src="./scripts/events/index.js"></script>
</body>
</html>
