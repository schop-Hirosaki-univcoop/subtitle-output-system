<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="referrer" content="same-origin">
  <title>イベントコントロールセンター</title>
  <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg%20xmlns%3D%27http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%27%20viewBox%3D%270%200%2064%2064%27%3E%3Crect%20width%3D%2764%27%20height%3D%2764%27%20rx%3D%2712%27%20fill%3D%2705111f%27%2F%3E%3Ctext%20x%3D%2732%27%20y%3D%2742%27%20text-anchor%3D%27middle%27%20font-family%3D%27Arial%2C%20sans-serif%27%20font-size%3D%2736%27%20fill%3D%2700eaff%27%3EE%3C%2Ftext%3E%3C%2Fsvg%3E">
  <link rel="stylesheet" href="style.css">
  <script type="module" src="./scripts/shared/layout.js"></script>
</head>
<body class="op-theme events-page flow-page">
  <noscript>
    <div class="noscript-banner" role="alert">
      このサービスを利用するにはブラウザの JavaScript を有効にしてください。
    </div>
  </noscript>
  <telop-header tagline="Broadcast Subtitle Console" context-label="管理フロー">
    <div slot="meta" class="flow-user-info">
      <span id="flow-user-label" class="user-label flow-user-info__label" hidden></span>
      <div class="flow-user-info__footer">
        <div id="events-meta" class="hub-meta-note flow-user-info__meta" hidden></div>
        <button id="flow-logout-button" class="btn btn-ghost btn-sm flow-user-info__logout" type="button">ログアウト</button>
      </div>
    </div>
  </telop-header>

  <main id="events-main" class="flow-main" data-stage="events">
    <section class="flow-stage" aria-live="polite">
      <ol class="flow-progress" aria-label="進行ステップ">
        <li class="flow-progress__item is-active" data-stage-indicator="events" aria-current="step">
          <span class="flow-progress__step">1</span>
          <span class="flow-progress__label">イベント</span>
        </li>
        <li class="flow-progress__item" data-stage-indicator="schedules">
          <span class="flow-progress__step">2</span>
          <span class="flow-progress__label">日程</span>
        </li>
        <li class="flow-progress__item" data-stage-indicator="tabs">
          <span class="flow-progress__step">3</span>
          <span class="flow-progress__label">参加者 / テロップ</span>
        </li>
      </ol>
    </section>

    <div class="events-layout">
      <aside class="events-sidebar">
        <button id="flow-event-summary-pane" class="sidebar-card sidebar-card--action" type="button" data-panel-target="events">
          <span class="sidebar-card__title">選択中のイベント</span>
          <span id="flow-event-summary-name" class="sidebar-card__name">—</span>
          <span class="sidebar-card__stats" role="presentation">
            <span class="sidebar-card__stat"><span class="sidebar-card__stat-label">日程数</span><span id="flow-event-summary-schedules" class="sidebar-card__stat-value">—</span></span>
            <span class="sidebar-card__stat"><span class="sidebar-card__stat-label">参加者</span><span id="flow-event-summary-participants" class="sidebar-card__stat-value">—</span></span>
          </span>
        </button>
        <button id="flow-schedule-summary-pane" class="sidebar-card sidebar-card--action" type="button" data-panel-target="schedules">
          <span class="sidebar-card__title">選択中の日程</span>
          <span id="flow-schedule-summary" class="flow-selection-summary" hidden>
            <span class="flow-selection-summary__item"><span class="flow-selection-summary__label">イベント</span><span id="flow-schedule-summary-event">—</span></span>
            <span class="flow-selection-summary__item"><span class="flow-selection-summary__label">日程</span><span id="flow-schedule-summary-label">—</span></span>
            <span class="flow-selection-summary__item" id="flow-schedule-summary-range-row" hidden><span class="flow-selection-summary__label">時間</span><span id="flow-schedule-summary-range">—</span></span>
          </span>
          <span id="flow-schedule-summary-empty" class="sidebar-card__placeholder">イベントと日程を選択してください。</span>
        </button>
        <nav class="sidebar-nav" aria-label="パネル選択">
          <button id="flow-tab-participants" class="sidebar-nav__button" type="button" data-panel-target="participants">参加者リスト</button>
          <button id="flow-tab-operator" class="sidebar-nav__button" type="button" data-panel-target="operator">テロップ操作</button>
          <button id="flow-tab-dictionary" class="sidebar-nav__button" type="button" data-panel-target="dictionary">ルビ辞書</button>
          <button id="flow-tab-logs" class="sidebar-nav__button" type="button" data-panel-target="logs">操作ログ</button>
        </nav>
      </aside>
      <div id="flow-stage-panels" class="flow-panels">
        <section class="module module--primary admin-module flow-card flow-card--events flow-stage-panel is-active" aria-labelledby="events-title" data-panel="events">
        <div class="module-header">
          <div class="module-heading">
            <h2 id="events-title">イベントの管理</h2>
            <p class="module-description">質問フォームで使用するイベントを追加・編集・削除し、選択したイベントを次のステップへ引き継ぎます。</p>
          </div>
          <div class="module-actions">
            <button id="flow-add-event-button" class="btn btn-primary btn-sm" type="button" disabled>イベントを追加</button>
            <button id="flow-events-refresh-button" class="btn btn-ghost btn-sm" type="button">再読み込み</button>
          </div>
        </div>
        <div class="module-body">
          <div class="flow-pane flow-pane--primary">
            <div id="flow-events-loading" class="hub-loading" role="status" aria-live="polite" hidden>
              <span class="spinner" aria-hidden="true"></span>
              <span id="flow-events-loading-text">イベント情報を読み込んでいます…</span>
            </div>
            <div id="flow-events-alert" class="hub-alert" role="alert" hidden></div>
            <p id="flow-event-selection-note" class="flow-selection-note" hidden>進めるイベントをカードから選択してください。</p>
            <ul id="flow-event-list" class="entity-list" aria-live="polite"></ul>
            <p id="flow-event-empty" class="entity-empty" hidden>まだイベントが登録されていません。まずはイベントを追加してください。</p>
          </div>
        </div>
        <div class="flow-navigation">
          <button class="btn btn-ghost btn-sm flow-nav-button flow-nav-button--prev" type="button" data-flow-nav-direction="prev" data-flow-nav-target="events">前へ</button>
          <button class="btn btn-primary btn-sm flow-nav-button flow-nav-button--next" type="button" data-flow-nav-direction="next" data-flow-nav-target="schedules">次へ</button>
        </div>
        </section>

        <section class="module module--primary admin-module flow-card flow-card--schedules flow-stage-panel" aria-labelledby="schedule-admin-title" data-panel="schedules">
        <div class="module-header">
          <div class="module-heading">
            <h2 id="schedule-admin-title">日程の管理</h2>
            <p class="module-description">選択したイベントに紐づく日程を整理し、次のツールに引き継ぐ日程を決めます。</p>
          </div>
          <div class="module-actions">
            <button id="flow-add-schedule-button" class="btn btn-primary btn-sm" type="button" disabled>日程を追加</button>
            <button id="flow-schedule-refresh-button" class="btn btn-ghost btn-sm" type="button" disabled>再読み込み</button>
          </div>
        </div>
        <div class="module-body">
          <div class="flow-pane flow-pane--primary">
            <div id="flow-schedule-loading" class="hub-loading" role="status" aria-live="polite" hidden>
              <span class="spinner" aria-hidden="true"></span>
              <span id="flow-schedule-loading-text">日程情報を読み込んでいます…</span>
            </div>
            <p id="flow-schedule-selection-note" class="flow-selection-note" hidden>次のステップに進む日程をカードから選択してください。</p>
            <ul id="flow-schedule-list" class="entity-list" aria-live="polite"></ul>
            <p id="flow-schedule-empty" class="entity-empty" hidden>このイベントにはまだ日程が登録されていません。まずは日程を追加してください。</p>
          </div>
        </div>
        <div class="flow-navigation">
          <button class="btn btn-ghost btn-sm flow-nav-button flow-nav-button--prev" type="button" data-flow-nav-direction="prev" data-flow-nav-target="events">前へ</button>
          <button class="btn btn-primary btn-sm flow-nav-button flow-nav-button--next" type="button" data-flow-nav-direction="next" data-flow-nav-target="participants">次へ</button>
        </div>
        </section>

        <section id="flow-panel-participants" class="flow-tool-panel flow-stage-panel" data-panel="participants" aria-labelledby="flow-panel-participants-title" hidden>
        <h2 id="flow-panel-participants-title" class="visually-hidden">参加者リスト</h2>
        <div id="participants-tool" class="embedded-tool" data-tool="participants">
                <div class="embedded-tool__surface qa-embedded" data-qa-embed>
                  <main id="qa-admin-main" class="admin-main" hidden>
                    <div id="qa-admin-primary" class="qa-admin-primary">
                      <div id="qa-loading-overlay" class="loading-overlay" aria-live="polite" hidden>
                        <div class="loading-backdrop"></div>
                        <div class="loading-panel" role="status" aria-label="読み込み中">
                          <div class="spinner" aria-hidden="true"></div>
                          <div class="loading-text"><span id="qa-loading-text">初期化中…</span></div>
                          <div class="loading-sub">数秒かかる場合があります</div>
                          <ol id="qa-loader-steps" class="loader-steps" aria-label="初期化ステップ"></ol>
                        </div>
                      </div>

                      <section id="qa-participant-module" class="module module--primary admin-module" aria-labelledby="qa-participant-title">
                        <div class="module-header">
                        <div class="module-heading">
                          <div class="module-title-row">
                            <h2 id="qa-participant-title">参加者リストの管理</h2>
                            <span id="qa-upload-status" class="status-pill status-pill--inline">イベントコントロールセンターで対象の日程を選択してください。</span>
                          </div>
                          <p class="module-description" id="qa-participant-description">
                            <span id="qa-participant-description-main">イベントコントロールセンター（events.html）のフローで日程を選択してこのページを開くと、参加者情報（CSVの列順はテンプレートをご利用ください。参加者ID列は不要で、読み込み時に自動採番されます）をアップロードして管理できます。保存後は各参加者ごとに専用リンクを発行でき、一覧の「編集」から詳細や班番号を更新できます。電話番号とメールアドレスは内部で管理され、編集時のみ確認できます。同じイベント内で名前と学部学科が一致する参加者は、日程が同じでも異なっても重複候補として件数付きで表示されます。専用リンクは各行のボタンまたはURLから取得できます。</span>
                            <span id="qa-admin-summary" class="module-description__meta" aria-live="polite"></span>
                          </p>
                        </div>
                        <div class="module-actions"></div>
                      </div>
                      <div class="module-body">
                        <div class="admin-controls">
                          <div class="admin-controls__row admin-controls__row--imports">
                            <button id="qa-download-participant-template" class="btn btn-ghost btn-sm" type="button">参加者CSVテンプレート</button>
                            <label class="btn btn-ghost file-input" for="qa-csv-input">
                              <span id="qa-file-label">CSVファイルを選択</span>
                              <input id="qa-csv-input" type="file" accept=".csv,text/csv">
                            </label>
                            <button id="qa-download-team-template" class="btn btn-ghost btn-sm" type="button" disabled>班番号テンプレート</button>
                            <label class="btn btn-ghost file-input" for="qa-team-csv-input">
                              <span id="qa-team-file-label">班番号CSVを選択</span>
                              <input id="qa-team-csv-input" type="file" accept=".csv,text/csv">
                            </label>
                          </div>
                          <div class="admin-controls__row admin-controls__row--actions">
                            <button id="qa-discard-button" class="btn btn-ghost btn-sm" type="button" disabled>変更を取り消す</button>
                            <button id="qa-save-button" class="btn btn-primary" type="button" disabled>参加者リストを保存</button>
                            <button id="qa-clear-participants-button" class="btn btn-danger btn-sm" type="button" disabled>参加者リストを全削除</button>
                          </div>
                        </div>
                        <div id="qa-change-preview" class="change-preview" hidden aria-live="polite">
                          <div class="change-preview__header">
                            <span class="change-preview__title">未保存の変更があります</span>
                            <span id="qa-change-preview-count" class="change-preview__count"></span>
                          </div>
                          <ul id="qa-change-preview-list" class="change-preview__list" aria-label="未保存の変更一覧"></ul>
                          <p id="qa-change-preview-note" class="change-preview__note">「参加者リストを保存」で変更を確定し、「変更を取り消す」で破棄できます。</p>
                        </div>
                        <div class="table-scroller">
                          <table class="mapping-table" aria-describedby="qa-participant-description">
                            <thead>
                              <tr>
                                <th scope="col" class="is-numeric">参加者ID</th>
                                <th scope="col">氏名</th>
                                <th scope="col">性別</th>
                                <th scope="col">学部学科</th>
                                <th scope="col" class="is-numeric">班番号</th>
                                <th scope="col">専用リンク</th>
                              </tr>
                            </thead>
                            <tbody id="qa-mapping-tbody"></tbody>
                          </table>
                        </div>
                      </div>
                      </section>
                    </div>

                    <section class="module module--secondary admin-module" aria-labelledby="qa-format-title">
                      <div class="module-header">
                        <div class="module-heading">
                          <h2 id="qa-format-title">CSVの形式について</h2>
                          <p class="module-description">1列目から順に「名前」「フリガナ」「性別」「学部学科」「携帯電話」「メールアドレス」を配置してください。アップロード時には必ずヘッダー行が必要です。テンプレートボタンからダウンロードできます。ファイル名は「イベントID_日程ID_participants.csv」を使用してください。電話番号とメールアドレスは内部で保存され、編集ダイアログでのみ確認できます。</p>
                        </div>
                      </div>
                      <div class="module-body">
                        <ul>
                          <li>ヘッダー行（例: <code>名前,フリガナ,性別,学部学科,携帯電話,メールアドレス</code>）が必須です。</li>
                          <li>同じ参加者IDや同じ氏名・学部学科の行が複数あっても全て読み込み、一覧上で重複候補として確認できます。</li>
                          <li>CSVに参加者ID列は不要です。読み込み時に学部学科→フリガナの順で並べ替え、必要な参加者IDを自動発番します。</li>
                          <li>同じイベント内で名前と学部学科が一致する参加者は、日程が同じでも異なっても重複候補（件数付き）として一覧に表示されます。</li>
                          <li>各列は空欄でもアップロードできますが、氏名は必須です。</li>
                          <li>保存後はフォームに即座に反映されます。</li>
                          <li>班番号は別途、<code>参加者ID,班番号</code>形式のCSV（ヘッダー必須）をアップロードすると一括で紐付けられます（キャンセルの場合は班番号に「キャンセル」と入力してください）。テンプレートには現在の参加者IDがあらかじめ記載されます。ファイル名は「イベントID_日程ID_teams.csv」としてください。</li>
                        </ul>
                      </div>
                    </section>
                  </main>

                  <div id="qa-participant-dialog" class="modal" role="dialog" aria-modal="true" aria-labelledby="qa-participant-dialog-title" hidden>
                    <div class="modal-backdrop" data-dialog-dismiss="true"></div>
                    <div class="modal-panel">
                      <form id="qa-participant-form">
                        <div class="modal-header">
                          <h2 id="qa-participant-dialog-title">参加者情報を編集</h2>
                        </div>
                        <div class="modal-body">
                          <div class="modal-field">
                            <label for="qa-participant-id-input">参加者ID</label>
                            <input id="qa-participant-id-input" name="participant-id" class="input" type="text" readonly>
                          </div>
                          <div class="modal-field">
                            <label for="qa-participant-name-input">氏名 / ラジオネーム</label>
                            <input id="qa-participant-name-input" name="participant-name" class="input" type="text" autocomplete="off" required>
                          </div>
                          <div class="modal-field">
                            <label for="qa-participant-phonetic-input">フリガナ</label>
                            <input id="qa-participant-phonetic-input" name="participant-phonetic" class="input" type="text" autocomplete="off">
                          </div>
                          <div class="modal-field">
                            <label for="qa-participant-gender-input">性別</label>
                            <input id="qa-participant-gender-input" name="participant-gender" class="input" type="text" autocomplete="off">
                          </div>
                          <div class="modal-field">
                            <label for="qa-participant-department-input">学部学科</label>
                            <input id="qa-participant-department-input" name="participant-department" class="input" type="text" autocomplete="off">
                          </div>
                          <div class="modal-field">
                            <label for="qa-participant-team-input">班番号</label>
                            <input id="qa-participant-team-input" name="participant-team" class="input" type="text" autocomplete="off" placeholder="例: A-1 / キャンセルなど">
                          </div>
                          <div class="modal-field">
                            <label for="qa-participant-phone-input">携帯電話</label>
                            <input id="qa-participant-phone-input" name="participant-phone" class="input" type="tel" autocomplete="tel">
                          </div>
                          <div class="modal-field">
                            <label for="qa-participant-email-input">メールアドレス</label>
                            <input id="qa-participant-email-input" name="participant-email" class="input" type="email" autocomplete="email">
                          </div>
                          <p id="qa-participant-error" class="form-error" role="alert" hidden></p>
                        </div>
                        <div class="modal-footer">
                          <button type="button" class="btn btn-ghost" data-dialog-dismiss="true">キャンセル</button>
                          <button type="submit" class="btn btn-primary">保存</button>
                        </div>
                      </form>
                    </div>
                  </div>

                  <div id="qa-confirm-dialog" class="modal" role="dialog" aria-modal="true" aria-labelledby="qa-confirm-dialog-title" hidden>
                    <div class="modal-backdrop" data-dialog-dismiss="true"></div>
                    <div class="modal-panel">
                      <div class="modal-header">
                        <h2 id="qa-confirm-dialog-title">確認</h2>
                      </div>
                      <div class="modal-body">
                        <p id="qa-confirm-dialog-message"></p>
                      </div>
                      <div class="modal-footer">
                        <button type="button" class="btn btn-ghost" id="qa-confirm-cancel-button" data-dialog-dismiss="true">キャンセル</button>
                        <button type="button" class="btn btn-danger" id="qa-confirm-accept-button">実行する</button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
        </section>
        <section id="flow-panel-operator" class="flow-tool-panel flow-stage-panel" data-panel="operator" aria-labelledby="flow-panel-operator-title" hidden>
              <h2 id="flow-panel-operator-title" class="visually-hidden">テロップ操作</h2>
              <div id="operator-tool" class="embedded-tool" data-tool="operator">
                <div class="embedded-tool__surface operator-embedded" data-operator-embed>
                  <div id="op-loading-overlay" class="loading-overlay" aria-live="polite" hidden>
                    <div class="loading-backdrop"></div>
                    <div class="loading-panel" role="status" aria-label="読み込み中">
                      <div class="spinner" aria-hidden="true"></div>
                      <div class="loading-text"><span id="op-loading-text">初期化中…</span></div>
                      <div class="loading-sub">数秒かかる場合があります</div>
                      <ol id="op-loader-steps" class="loader-steps" aria-label="初期化ステップ"></ol>
                    </div>
                  </div>

                  <main id="op-main-container" class="layout-grid" hidden>
                    <section class="module module--primary" id="op-questions-panel" aria-labelledby="op-questions-title">
                      <div class="module-header">
                        <div class="module-heading">
                          <h1 id="op-questions-title">テロップ操作パネル</h1>
                          <p class="module-description">質問の選択・送出とログ監視を一つの画面で行えます。</p>
                        </div>
                        <div class="status-bar" role="group" aria-label="送出状況">
                          <div class="render-indicator" title="OnAir 状態">
                            <span id="op-render-lamp" class="lamp" aria-hidden="true"></span>
                            <span id="op-render-phase" class="lamp-label">-</span>
                          </div>
                          <div class="render-summary" id="op-render-summary">
                            <div class="render-line">
                              <span class="label">オンエア:</span>
                              <span id="op-render-title" class="text-strong">—</span>
                            </div>
                            <div id="op-render-question" class="text-soft">—</div>
                            <div id="op-render-updated" class="text-meta">—</div>
                          </div>
                        </div>
                      </div>
                      <div class="module-body" id="op-questions-content">
                        <div class="cards-sticky">
                          <div id="op-genre-tab-buttons" class="genre-tabs" role="tablist" aria-label="ジャンル">
                            <button class="genre-tab-button active" data-genre="学び" role="tab" aria-selected="true">学び</button>
                            <button class="genre-tab-button" data-genre="活動" role="tab" aria-selected="false">活動</button>
                            <button class="genre-tab-button" data-genre="暮らし" role="tab" aria-selected="false">暮らし</button>
                            <button class="genre-tab-button" data-genre="食・スポット" role="tab" aria-selected="false">食・スポット</button>
                            <button class="genre-tab-button" data-genre="移動・季節" role="tab" aria-selected="false">移動・季節</button>
                            <button class="genre-tab-button" data-genre="その他" role="tab" aria-selected="false">その他</button>
                          </div>
                          <div id="op-sub-tab-buttons" class="sub-tabs" role="tablist" aria-label="質問種別">
                            <button class="sub-tab-button active" data-sub-tab="all" role="tab" aria-selected="true">すべて</button>
                            <button class="sub-tab-button" data-sub-tab="normal" role="tab" aria-selected="false">通常質問</button>
                            <button class="sub-tab-button" data-sub-tab="puq" role="tab" aria-selected="false">Pick Up Question</button>
                          </div>
                          <div class="cards-toolbar">
                            <div class="toolbar-right">
                              <label class="chk">
                                <input id="op-select-all-checkbox" type="checkbox">
                                全選択
                              </label>
                            </div>
                          </div>
                        </div>
                        <div class="cards-scroll">
                          <div id="op-questions-cards" class="cards-list" aria-live="polite"></div>
                        </div>
                      </div>
                    </section>
                  </main>

                  <div id="op-action-panel" class="action-panel" hidden>
                    <button id="op-btn-display" class="btn btn-primary" disabled>送出</button>
                    <button id="op-btn-unanswer" class="btn" disabled>未回答へ戻す</button>
                    <button id="op-btn-edit" class="btn" disabled>原稿修正</button>
                    <button id="op-btn-clear" class="btn btn-danger">送出クリア</button>
                    <span id="op-selected-info">行を選択してください</span>
                    <div class="action-panel-right">
                      <button id="op-btn-batch-unanswer" class="btn btn-ghost" hidden>選択項目を未回答へ戻す</button>
                    </div>
                  </div>

                  <div id="op-edit-dialog" class="modal" role="dialog" aria-modal="true" aria-labelledby="op-edit-dialog-title" hidden>
                    <div class="modal-backdrop" data-dialog-dismiss="true"></div>
                    <div class="modal-panel">
                      <div class="modal-header">
                        <h2 id="op-edit-dialog-title">質問原稿の編集</h2>
                      </div>
                      <div class="modal-body">
                        <div class="modal-field">
                          <label for="op-edit-textarea">質問内容</label>
                          <textarea id="op-edit-textarea" class="input" rows="8" data-autofocus></textarea>
                        </div>
                        <p class="modal-helper">送出前に内容を整えてください。更新するとディスプレイにも即座に反映されます。</p>
                      </div>
                      <div class="modal-footer">
                        <button type="button" class="btn btn-ghost" id="op-edit-cancel-button">キャンセル</button>
                        <button type="button" class="btn btn-primary" id="op-edit-save-button">更新</button>
                      </div>
                    </div>
                  </div>

                  <div id="op-confirm-dialog" class="modal" role="dialog" aria-modal="true" aria-labelledby="op-confirm-dialog-title" hidden>
                    <div class="modal-backdrop" data-dialog-dismiss="true"></div>
                    <div class="modal-panel">
                      <div class="modal-header">
                        <h2 id="op-confirm-dialog-title">確認</h2>
                      </div>
                      <div class="modal-body">
                        <p id="op-confirm-dialog-message"></p>
                      </div>
                      <div class="modal-footer">
                        <button type="button" class="btn btn-ghost" id="op-confirm-cancel-button" data-dialog-dismiss="true">キャンセル</button>
                        <button type="button" class="btn btn-primary" id="op-confirm-accept-button">実行する</button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
        </section>
        <section id="op-dictionary-panel" class="module module--secondary flow-tool-panel flow-stage-panel" data-panel="dictionary" aria-labelledby="op-dictionary-title" hidden>
              <div class="module-header">
                <div class="module-heading">
                  <h2 id="op-dictionary-title">ルビ辞書管理</h2>
                  <p class="module-description">登録語句の追加や更新が即座にディスプレイへ反映されます。</p>
                </div>
                <div class="module-actions">
                  <button id="op-fetch-dictionary-button" class="btn btn-ghost" type="button">辞書を更新</button>
                </div>
              </div>
              <div class="module-body dictionary-body">
                <form id="op-add-term-form" class="dictionary-form">
                  <input type="text" id="op-new-term" class="input" placeholder="単語" required>
                  <input type="text" id="op-new-ruby" class="input" placeholder="ルビ" required>
                  <button type="submit" class="btn btn-primary">追加</button>
                </form>
                <div class="dictionary-toolbar">
                  <label class="chk">
                    <input type="checkbox" id="op-dictionary-select-all" disabled>
                    全選択
                  </label>
                  <span id="op-dictionary-count" class="dictionary-count" aria-live="polite">登録なし</span>
                </div>
                <div class="cards-scroll">
                  <div id="op-dictionary-cards" class="dictionary-cards" aria-live="polite"></div>
                </div>
                <div id="op-dictionary-confirm-dialog" class="modal modal--inline" role="dialog" aria-modal="true" aria-labelledby="op-dictionary-confirm-dialog-title" hidden>
                  <div class="modal-backdrop" data-dialog-dismiss="true"></div>
                  <div class="modal-panel">
                    <div class="modal-header">
                      <h2 id="op-dictionary-confirm-dialog-title">確認</h2>
                    </div>
                    <div class="modal-body">
                      <p id="op-dictionary-confirm-dialog-message"></p>
                    </div>
                    <div class="modal-footer">
                      <button type="button" class="btn btn-ghost" id="op-dictionary-confirm-cancel-button" data-dialog-dismiss="true">キャンセル</button>
                      <button type="button" class="btn btn-danger" id="op-dictionary-confirm-accept-button">削除する</button>
                    </div>
                  </div>
                </div>
              </div>
              <div id="op-dictionary-action-panel" class="action-panel" hidden>
                <button id="op-dictionary-btn-enable" class="btn btn-primary" type="button" disabled>有効にする</button>
                <button id="op-dictionary-btn-disable" class="btn" type="button" disabled>無効にする</button>
                <button id="op-dictionary-btn-delete" class="btn btn-danger" type="button" disabled>削除</button>
                <span id="op-dictionary-selected-info">単語を選択してください</span>
                <div class="action-panel-right">
                  <button id="op-dictionary-btn-batch-enable" class="btn btn-ghost" type="button" hidden>選択項目を有効にする</button>
                  <button id="op-dictionary-btn-batch-disable" class="btn btn-ghost" type="button" hidden>選択項目を無効にする</button>
                  <button id="op-dictionary-btn-batch-delete" class="btn btn-danger" type="button" hidden>選択項目を削除</button>
                </div>
              </div>
        </section>
        <section id="op-logs-panel" class="module module--secondary flow-tool-panel flow-stage-panel" data-panel="logs" aria-labelledby="op-logs-title" hidden>
              <div class="module-header">
                <div class="module-heading">
                  <h2 id="op-logs-title">操作ログ</h2>
                  <p class="module-description">直近の操作履歴を確認し、異常を素早く検知できます。</p>
                </div>
                <div class="module-actions">
                  <button id="op-logs-refresh-button" class="btn btn-ghost" type="button">ログを更新</button>
                </div>
              </div>
              <div class="module-body logs-body">
                <div id="op-logs-toolbar" class="logs-toolbar">
                  <input id="op-log-search" class="input" placeholder="検索 (user/action/details)">
                  <label class="chk"><input type="checkbox" id="op-log-autoscroll" checked> 自動スクロール</label>
                </div>
            <div id="op-logs-stream-view">
              <div id="op-log-stream" class="log-stream"></div>
            </div>
          </div>
        </section>
      </div>
    </div>
  </main>

  <div id="flow-event-dialog" class="modal" role="dialog" aria-modal="true" aria-labelledby="flow-event-dialog-title" hidden>
    <div class="modal-backdrop" data-dialog-dismiss="true"></div>
    <div class="modal-panel">
      <form id="flow-event-form">
        <div class="modal-header">
          <h2 id="flow-event-dialog-title">イベントを追加</h2>
        </div>
        <div class="modal-body">
          <div class="modal-field">
            <label for="flow-event-name-input">イベント名</label>
            <input id="flow-event-name-input" name="event-name" class="input" type="text" autocomplete="off" required data-autofocus>
          </div>
          <p class="modal-helper">質問フォーム上で表示されるイベント名を入力してください。</p>
          <p id="flow-event-error" class="form-error" role="alert" hidden></p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-ghost" data-dialog-dismiss="true">キャンセル</button>
          <button type="submit" class="btn btn-primary">追加</button>
        </div>
      </form>
    </div>
  </div>

  <div id="flow-schedule-dialog" class="modal" role="dialog" aria-modal="true" aria-labelledby="flow-schedule-dialog-title" hidden>
    <div class="modal-backdrop" data-dialog-dismiss="true"></div>
    <div class="modal-panel">
      <form id="flow-schedule-form">
        <div class="modal-header">
          <h2 id="flow-schedule-dialog-title">日程を追加</h2>
        </div>
        <div class="modal-body">
          <div class="modal-field">
            <label for="flow-schedule-label-input">日程の表示名</label>
            <input id="flow-schedule-label-input" name="schedule-label" class="input" type="text" autocomplete="off" required data-autofocus>
          </div>
          <div class="modal-field">
            <label for="flow-schedule-date-input">日付</label>
            <input id="flow-schedule-date-input" name="schedule-date" class="input" type="date" required>
          </div>
          <div class="modal-field">
            <label for="flow-schedule-start-input">開始時刻</label>
            <input id="flow-schedule-start-input" name="schedule-start" class="input" type="time" required>
          </div>
          <div class="modal-field">
            <label for="flow-schedule-end-input">終了時刻</label>
            <input id="flow-schedule-end-input" name="schedule-end" class="input" type="time" required>
          </div>
          <p class="modal-helper">開始から終了の時刻は参加者の案内に使用されます。</p>
          <p id="flow-schedule-error" class="form-error" role="alert" hidden></p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-ghost" data-dialog-dismiss="true">キャンセル</button>
          <button type="submit" class="btn btn-primary">追加</button>
        </div>
      </form>
    </div>
  </div>

  <div id="flow-confirm-dialog" class="modal" role="dialog" aria-modal="true" aria-labelledby="flow-confirm-dialog-title" hidden>
    <div class="modal-backdrop" data-dialog-dismiss="true"></div>
    <div class="modal-panel">
      <div class="modal-header">
        <h2 id="flow-confirm-dialog-title">確認</h2>
      </div>
      <div class="modal-body">
        <p id="flow-confirm-dialog-message"></p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-ghost" id="flow-confirm-cancel-button" data-dialog-dismiss="true">キャンセル</button>
        <button type="button" class="btn btn-danger" id="flow-confirm-accept-button">実行する</button>
      </div>
    </div>
  </div>

  <telop-footer year="2025"></telop-footer>

  <script type="module" src="./scripts/events/index.js"></script>
</body>
</html>
