/* question-form.css: 質問投稿フォーム固有のレイアウトとコンポーネントスタイルをまとめた定義ファイルです。 */
body.question-form-page,
body.question-admin-page{
  height:auto;
  min-height:100vh;
  overflow:auto;
  padding-block-end:clamp(3rem, 7vh, 4.5rem);
}

.question-form-page [hidden],
.question-admin-page [hidden]{
  display:none !important;
}

.single-main,
.admin-main{
  width:min(960px, 94vw);
  margin-inline:auto;
  flex:1 0 auto;
  display:flex;
  flex-direction:column;
  gap:clamp(1rem, 2.4vw, 1.5rem);
}

.intake-module .module-body,
.admin-module .module-body{
  overflow:visible;
}

/* 招待リンクの案内文をまとめるバナー */
.context-banner{
  display:flex;
  flex-direction:column;
  gap:.35rem;
  padding:.85rem 1rem;
  margin-bottom:clamp(1rem, 2vw, 1.35rem);
  border:1px solid rgba(80,104,142,.45);
  border-radius:.75rem;
  background:rgba(12,20,36,.75);
}

.context-text{
  margin:0;
  font-size:.95rem;
  color:var(--muted);
  line-height:1.6;
}

.context-text--welcome{
  font-size:1.02rem;
  font-weight:600;
  color:var(--text);
}

.context-text--intro{
  color:var(--muted);
}

.context-text--schedule{
  color:var(--accent);
  font-weight:500;
}

/* アクセス制御メッセージ: 権限不足時の差し替え表示 */
.context-guard{
  margin:0 0 clamp(1.2rem, 2vw, 1.5rem);
  padding:1rem 1.2rem;
  border-radius:.75rem;
  border:1px solid rgba(255,107,107,.45);
  background:rgba(120,28,28,.22);
  color:var(--danger);
  font-size:.95rem;
  line-height:1.6;
}
.context-guard:focus-visible{
  outline:2px solid color-mix(in srgb, var(--danger) 65%, transparent);
  outline-offset:4px;
}

/* 入力フォーム全体の縦並びを調整 */
.intake-form{
  display:flex;
  flex-direction:column;
  gap:clamp(1rem, 2vw, 1.35rem);
}

.form-field{
  display:flex;
  flex-direction:column;
  gap:clamp(.45rem, 1vw, .65rem);
}

.field-header{
  display:flex;
  align-items:center;
  gap:clamp(.45rem, 1vw, .65rem);
  font-weight:600;
  letter-spacing:.02em;
}

.field-footer{
  display:flex;
  flex-wrap:wrap;
  gap:.45rem 1rem;
  align-items:baseline;
  justify-content:space-between;
}

.field-tag{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  padding:.1rem .55rem;
  border-radius:999px;
  border:1px solid rgba(80,104,142,.55);
  font-size:.7rem;
  color:var(--muted);
  text-transform:uppercase;
  letter-spacing:.12em;
}

.field-tag--required{
  color:#fca5a5;
  border-color:rgba(252,165,165,.6);
}

.input--textarea{
  min-height:8rem;
  resize:vertical;
}

.field-hint{
  margin:0;
  font-size:.8rem;
  color:var(--muted);
  line-height:1.5;
}

.field-hint--status{
  font-variant-numeric:tabular-nums;
  color:var(--accent);
}
.status-error{
  color:var(--danger);
}

/* 送信ボタンとステータスメッセージの縦並び */
.form-actions{
  display:flex;
  flex-direction:column;
  gap:.75rem;
  align-items:flex-start;
}
.gl-shift-checkboxes{
  display:grid;
  gap:.75rem;
  grid-template-columns:repeat(auto-fit,minmax(12rem,1fr));
}
.gl-shift-option{
  display:flex;
  align-items:center;
  gap:.5rem;
  font-size:.9rem;
  color:rgba(230,242,255,.9);
}
.gl-shift-option input{
  width:1.1rem;
  height:1.1rem;
}

.form-feedback{
  min-height:1.25rem;
  margin:0;
  font-size:.9rem;
  color:var(--muted);
}
.form-feedback[data-variant="success"],
.form-feedback--success{color:var(--success);}
.form-feedback[data-variant="error"],
.form-feedback--error{color:var(--danger);}
.form-feedback[data-variant="progress"]{color:var(--accent);}

/* 送信後の案内文章ブロック */
.form-meta{
  margin-top:clamp(1.5rem, 3vw, 2.1rem);
  padding:1.1rem 1.3rem;
  border-radius:.75rem;
  border:1px solid rgba(80,104,142,.35);
  background:rgba(12,18,32,.55);
  display:flex;
  flex-direction:column;
  gap:.5rem;
}

.form-meta-line{
  margin:0;
  font-size:.8rem;
  color:var(--muted);
  line-height:1.6;
}

.question-form-page .site-footer,
.question-admin-page .site-footer{
  position:static;
  transform:none;
  margin:clamp(2rem, 5vh, 3rem) auto clamp(1rem, 4vh, 2rem);
}

/* ===== Admin page ===== */
.admin-main{
  margin-block-start:clamp(1.5rem, 4vh, 2.5rem);
}

.admin-module .module-actions{
  flex-wrap:wrap;
  gap:.75rem;
}

.entity-list{
  display:flex;
  flex-direction:column;
  gap:.35rem;
  margin:0;
  padding:0;
  list-style:none;
}

.entity-item{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:.75rem;
  padding:.75rem 1rem;
  border:1px solid rgba(60,84,120,.45);
  border-radius:.75rem;
  background:rgba(10,18,32,.65);
  transition:border-color .18s ease, background .18s ease;
  cursor:pointer;
}

.entity-item.is-active{
  border-color:rgba(0,234,255,.6);
  background:rgba(8,30,48,.85);
}

.entity-item:not(.is-active):hover{
  border-color:rgba(0,234,255,.35);
}

.entity-label{
  display:flex;
  flex-direction:column;
  gap:.25rem;
}

.entity-name{
  font-weight:600;
  letter-spacing:.03em;
}

.entity-meta{
  font-size:.75rem;
  color:var(--muted);
}

.entity-actions{
  display:flex;
  align-items:center;
  gap:.5rem;
}

.entity-actions .btn-icon{
  width:2.1rem;
  height:2.1rem;
  border-radius:999px;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  border:1px solid rgba(80,104,142,.45);
  background:rgba(20,32,52,.75);
  color:var(--muted);
  cursor:pointer;
  transition:color .18s ease, border-color .18s ease, background .18s ease;
}

.entity-actions .btn-icon:hover{
  color:var(--danger);
  border-color:rgba(255,107,107,.55);
  background:rgba(80,26,38,.4);
}

.entity-actions .btn-icon svg{
  width:1rem;
  height:1rem;
}

.entity-empty{
  margin:0;
  padding:1rem 1.2rem;
  border-radius:.75rem;
  border:1px dashed rgba(70,96,132,.4);
  color:var(--muted);
  font-size:.85rem;
  text-align:center;
}

.admin-context{
  margin:0 0 1rem;
  font-size:.85rem;
  color:var(--muted);
  line-height:1.5;
}

.admin-controls{
  display:flex;
  flex-direction:column;
  gap:.75rem;
  align-items:stretch;
}

.admin-controls__row{
  display:flex;
  flex-wrap:wrap;
  gap:.75rem;
  align-items:center;
}

.admin-controls__row .btn,
.admin-controls__row .file-input{
  flex:1 1 12rem;
  justify-content:center;
}

.admin-controls__row--actions{
  justify-content:flex-start;
  gap:.65rem;
}

.admin-controls__row--actions .btn{
  flex:0 1 10rem;
}

.file-input{
  position:relative;
  display:inline-flex;
  align-items:center;
}

.file-input input[type="file"]{
  position:absolute;
  inset:0;
  opacity:0;
  cursor:pointer;
}

.status-pill{
  display:inline-flex;
  align-items:center;
  gap:.4rem;
  padding:.35rem .75rem;
  border-radius:999px;
  font-size:.8rem;
  background:rgba(20,28,46,.6);
  border:1px solid rgba(80,104,142,.45);
  color:var(--muted);
}

.status-pill--inline{
  align-self:center;
}

.change-preview{
  display:flex;
  flex-direction:column;
  gap:.6rem;
  margin-top:.75rem;
  padding:.9rem 1rem;
  border-radius:.75rem;
  border:1px solid rgba(56,189,248,.35);
  background:rgba(12,26,44,.7);
}

.change-preview__header{
  display:flex;
  flex-wrap:wrap;
  align-items:baseline;
  justify-content:space-between;
  gap:.75rem;
}

.change-preview__title{
  font-weight:600;
  letter-spacing:.03em;
  color:var(--accent);
}

.change-preview__count{
  font-size:.8rem;
  color:var(--muted);
}

.change-preview__list{
  margin:0;
  padding:0;
  list-style:none;
  display:flex;
  flex-direction:column;
  gap:.55rem;
}

.change-preview__item{
  display:flex;
  gap:.6rem;
  align-items:flex-start;
  padding:.55rem .65rem;
  border-radius:.65rem;
  border:1px solid rgba(56,189,248,.25);
  background:rgba(8,18,32,.6);
}

.change-preview__item--added{
  border-color:rgba(34,197,94,.35);
  background:rgba(14,42,32,.6);
}

.change-preview__item--removed{
  border-color:rgba(248,113,113,.35);
  background:rgba(60,18,24,.55);
}

.change-preview__icon{
  flex:0 0 auto;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  width:1.6rem;
  height:1.6rem;
  border-radius:999px;
  color:var(--accent);
  background:rgba(56,189,248,.18);
}

.change-preview__item--added .change-preview__icon{
  color:var(--success);
  background:rgba(34,197,94,.18);
}

.change-preview__item--removed .change-preview__icon{
  color:var(--danger);
  background:rgba(248,113,113,.18);
}

.change-preview__icon svg{
  width:.95rem;
  height:.95rem;
  fill:currentColor;
}

.change-preview__body{
  display:flex;
  flex-direction:column;
  gap:.3rem;
  flex:1 1 auto;
}

.change-preview__line{
  margin:0;
  font-size:.85rem;
  color:var(--text);
  line-height:1.5;
}

.change-preview__line--meta{
  font-size:.75rem;
  color:var(--muted);
}

.change-preview__changes{
  margin:0;
  padding:0;
  list-style:none;
  display:flex;
  flex-direction:column;
  gap:.25rem;
}

.change-preview__change{
  font-size:.75rem;
  color:var(--muted);
  line-height:1.5;
}

.change-preview__note{
  margin:0;
  font-size:.75rem;
  color:var(--muted);
  line-height:1.6;
}

.change-chip{
  display:inline-flex;
  align-items:center;
  padding:.1rem .45rem;
  border-radius:999px;
  border:1px solid rgba(56,189,248,.45);
  background:rgba(16,36,56,.6);
  color:var(--accent);
  font-size:.65rem;
  font-weight:600;
  letter-spacing:.08em;
}

.change-chip--added{
  border-color:rgba(34,197,94,.45);
  background:rgba(18,52,40,.6);
  color:var(--success);
}

.change-chip--updated{
  border-color:rgba(56,189,248,.55);
}

.status-pill--success{ color:var(--success); border-color:rgba(24,209,143,.5); }
.status-pill--error{ color:var(--danger); border-color:rgba(255,107,107,.5); }

.table-scroller{
  max-height:26rem;
}

.mapping-table{
  width:100%;
  border-collapse:collapse;
  font-size:.9rem;
}

.mapping-table thead th{
  text-align:left;
  padding:.5rem .65rem;
  border-bottom:1px solid rgba(70,94,128,.55);
  color:var(--muted);
  font-weight:600;
}

.mapping-table tbody td{
  padding:.5rem .65rem;
  border-bottom:1px solid rgba(45,62,92,.45);
}

.mapping-table tbody td.link-cell{
  display:flex;
  flex-direction:column;
  align-items:flex-start;
  gap:.45rem;
  white-space:normal;
}

.link-action-row{
  display:flex;
  align-items:center;
  gap:.45rem;
  flex-wrap:wrap;
}

.link-placeholder{
  font-size:.75rem;
  color:var(--muted);
}

.copy-link-btn{
  display:inline-flex;
  align-items:center;
  gap:.35rem;
  padding:.35rem .65rem;
  border-radius:.6rem;
  border:1px solid rgba(70,96,132,.55);
  background:rgba(14,24,42,.65);
  color:var(--accent);
  font-size:.75rem;
  cursor:pointer;
  transition:color .18s ease, border-color .18s ease, background .18s ease;
}

.copy-link-btn:hover,
.copy-link-btn:focus-visible{
  color:#38bdf8;
  border-color:rgba(56,189,248,.65);
  background:rgba(12,30,48,.85);
}

.copy-link-btn svg{
  width:.85rem;
  height:.85rem;
  fill:currentColor;
}

.delete-link-btn{
  display:inline-flex;
  align-items:center;
  gap:.35rem;
  padding:.35rem .65rem;
  border-radius:.6rem;
  border:1px solid rgba(239,68,68,.55);
  background:rgba(127,29,29,.35);
  color:#fca5a5;
  font-size:.75rem;
  cursor:pointer;
  transition:color .18s ease, border-color .18s ease, background .18s ease;
}

.delete-link-btn:hover,
.delete-link-btn:focus-visible{
  color:#fecaca;
  border-color:rgba(248,113,113,.65);
  background:rgba(127,29,29,.55);
}

.delete-link-btn svg{
  width:.85rem;
  height:.85rem;
  fill:currentColor;
}

.share-link-preview{
  font-size:.75rem;
  color:var(--accent);
  word-break:break-all;
  text-decoration:none;
}

.share-link-preview:hover,
.share-link-preview:focus-visible{
  color:#38bdf8;
  text-decoration:underline;
}

.edit-link-btn{
  display:inline-flex;
  align-items:center;
  gap:.35rem;
  padding:.35rem .65rem;
  border-radius:.6rem;
  border:1px solid rgba(90,112,152,.55);
  background:rgba(18,30,48,.6);
  color:var(--text);
  font-size:.75rem;
  cursor:pointer;
  transition:color .18s ease, border-color .18s ease, background .18s ease;
}

.edit-link-btn:hover,
.edit-link-btn:focus-visible{
  color:#f8fafc;
  border-color:rgba(148,163,184,.65);
  background:rgba(24,38,62,.85);
}

.edit-link-btn svg{
  width:.85rem;
  height:.85rem;
  fill:currentColor;
}

.mapping-table tbody tr:nth-child(even){
  background:rgba(18,28,46,.55);
}

.mapping-table tbody tr.is-duplicate{
  background:rgba(120,64,12,.28);
  border-left:2px solid rgba(255,194,71,.6);
}

.mapping-table tbody tr.is-added{
  box-shadow:inset 0 0 0 1px rgba(34,197,94,.4);
}

.mapping-table tbody tr.is-updated{
  box-shadow:inset 0 0 0 1px rgba(56,189,248,.4);
}

.duplicate-warning{
  display:flex;
  align-items:center;
  gap:.35rem;
  margin-top:.35rem;
  font-size:.75rem;
  color:var(--warn);
  letter-spacing:.02em;
}

.duplicate-warning__icon{
  display:inline-flex;
  width:.85rem;
  height:.85rem;
  color:inherit;
}

.duplicate-warning__icon svg{
  width:100%;
  height:100%;
  fill:currentColor;
}

.duplicate-warning__text{
  flex:1 1 auto;
  color:inherit;
  line-height:1.4;
}

.admin-summary{
  display:flex;
  flex-direction:column;
  gap:.5rem;
  margin:0;
  font-size:.85rem;
  color:var(--muted);
}

@media (max-width: 640px){
  .form-actions{ align-items:stretch; }
  .form-actions .btn{ width:100%; justify-content:center; }
  .header-actions{ width:100%; justify-content:flex-end; }
  .field-footer{ flex-direction:column; align-items:flex-start; gap:.35rem; }
}
