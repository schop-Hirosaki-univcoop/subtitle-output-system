/* ===== Theme Tokens (Broadcast UI) ===== */
:root{
  --bg:#0f1424; --panel:#12192c; --panel-2:#0e1526; --text:#e7edf7; --muted:#9fb3c8; --line:#1a2340;
  --accent:#3b82f6; --accent-2:#06b6d4; --success:#10b981; --warn:#f59e0b; --danger:#ef4444;
  --chip:#1e2a46; --chip-line:#24314f;
}
body { 
    font-family: sans-serif; 
    padding: 20px; 
    margin-bottom: 80px; /* 固定操作パネルの分の余白を確保 */
}
.op-theme{ background:var(--bg); color:var(--text); }
body.op-theme{ padding:20px; margin-bottom:100px; }

/* ===== Top Status Bar ===== */
.status-bar{ display:flex; align-items:center; gap:16px; padding:12px 16px;
  background:linear-gradient(180deg, rgba(24,30,52,.9), rgba(16,22,40,.9));
  border:1px solid var(--line); border-radius:12px; box-shadow:0 8px 30px rgba(0,0,0,.25);
  position:sticky; top:12px; z-index:50; backdrop-filter: blur(6px);
}
.status-bar .brand{ font-weight:700; letter-spacing:.04em; opacity:.85; }

/* login 中の簡易スタイル（任意） */
#login-button.is-busy {
  opacity: 0.7;
  pointer-events: none;
  cursor: progress;
}

/* ===== Loading Overlay ===== */
#loading-overlay[hidden] { display: none !important; }
#loading-overlay {
  position: fixed;
  inset: 0;
  z-index: 9999;
}
.loading-backdrop {
  position: absolute;
  inset: 0;
  backdrop-filter: blur(2px);
  background: rgba(10, 12, 20, 0.35);
}
.loading-panel {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  min-width: 260px;
  max-width: min(92vw, 560px);
  padding: 20px 24px;
  border-radius: 14px;
  background: linear-gradient(180deg, rgba(20,22,34,0.96), rgba(12,14,22,0.96));
  box-shadow: 0 12px 40px rgba(0,0,0,0.35), inset 0 0 1px rgba(255,255,255,0.06);
  color: #E9ECF1;
  text-align: center;
}
.spinner {
  width: 36px; height: 36px;
  margin: 0 auto 14px;
  border: 3px solid rgba(255,255,255,0.25);
  border-top-color: #fff;
  border-radius: 50%;
  animation: spin 1s linear infinite;
}
@keyframes spin { to { transform: rotate(360deg); } }
.loading-text { font-weight: 600; letter-spacing: .02em; }
.loading-sub  { margin-top: 6px; font-size: 12px; opacity: .75; }

/* ==== Display 状態ランプ ==== */
.render-indicator{ display:flex; align-items:center; gap:.5rem; padding-inline:8px; border-inline:1px solid var(--line); }
.lamp{ inline-size:.9rem; block-size:.9rem; border-radius:9999px; background:#94a3b8;
  box-shadow:0 0 0 1px rgba(0,0,0,.25) inset, 0 0 10px rgba(0,0,0,.25);
  transition: background-color .18s ease, box-shadow .18s ease, transform .18s ease; }
.lamp-label{ font: 12px/1.4 system-ui, -apple-system, "Segoe UI", sans-serif; color:#475569; }
.lamp.is-visible{ background:var(--success); box-shadow:0 0 12px #10b98180; }
.lamp.is-showing,.lamp.is-hiding{ background:var(--warn); box-shadow:0 0 12px #f59e0b80; }
.lamp.is-hidden{ background:#94a3b8; }
.lamp.is-error{ background:var(--danger); box-shadow:0 0 12px #ef444480; }

/* === 表示内容プレビュー === */
.render-summary{ display:flex; flex-direction:column; gap:.25rem; margin-left:1rem; min-inline-size:20rem; }
.render-line{ display:flex; align-items:baseline; gap:.5rem; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.render-summary .text-strong{ font-weight:700; letter-spacing:.01em; max-inline-size:36rem; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.render-summary .text-soft{ color:#c6d1e3; opacity:.9; max-inline-size:48rem; display:-webkit-box; -webkit-line-clamp:2; -webkit-box-orient:vertical; overflow:hidden; }
.render-summary .text-meta{ color:#9fb3c8; font-size:12px; }
.render-summary .label{ color:#9fb3c8; font-size:12px; }

/* 更新フラッシュ */
.render-indicator.is-updated .lamp{ transform: scale(1.15); }
.render-summary.is-updated{ animation: renderFlash .8s ease; }
@keyframes renderFlash{
  0%{ filter: brightness(1.2); }
  100%{ filter: brightness(1); }
}

#main-container { display:flex; gap:24px; }
#login-container { text-align: center; margin-top: 50px; }
#user-info { position: fixed; top: 10px; right: 20px; font-size: 14px; z-index: 100; }

.panel { flex: 1; }
/* ===== Questions Table ===== */
table{ border-collapse:separate; border-spacing:0; width:100%; margin-top:12px; }
#questions-table{ background:var(--panel); border:1px solid var(--line); border-radius:12px; overflow:hidden; }
#questions-table thead th{
  position:sticky; top:0; z-index:1; text-align:left; font-weight:600;
  background:linear-gradient(180deg, #1c2546, #151d34); color:#dbe6fb;
  border-bottom:1px solid var(--line); padding:10px 12px;
}
#questions-table tbody td{ border-bottom:1px solid var(--line); padding:10px 12px; color:#dfe6f7; }
#questions-table tbody tr:hover{ background:#16213a; }
#questions-table tbody tr.selected-row{ background:#11233f !important; }
#questions-table tbody tr.now-displaying{ background:rgba(16,185,129,.08); }
#questions-table tbody tr.locked{ background:rgba(239,68,68,.06); color:#ffe; }
#questions-table tbody tr.locked:hover{ background:rgba(239,68,68,.1) !important; }

/* チェックボックス列の幅を固定 */
#questions-table th:first-child,
#questions-table td:first-child {
    width: 40px;
    text-align: center;
}

/* ロックされた（回答済の）行のスタイル */
tr.locked {
    background-color: #f8d7da; /* 薄い赤色 */
    color: #721c24;
}
tr.locked:hover {
    background-color: #f5c6cb !important;
}
#questions-table tbody tr { cursor: pointer; }
#questions-table tbody tr:hover { background-color: #f5f5f5; }
tr.selected-row { background-color: #cce5ff !important; }
tr.now-displaying { background-color: #d4edda; font-weight: bold; }

/* メインタブ */
#main-tab-buttons {
    display: flex;
    gap: 5px;
    border-bottom: 2px solid #dee2e6;
    margin-bottom: 10px;
}
.main-tab-button {
    padding: 8px 15px; border: none; background-color: transparent;
    cursor: pointer; font-size: 16px;
    border-bottom: 2px solid transparent; margin-bottom: -2px;
}
.main-tab-button.active {
    font-weight: bold; color: #007bff; border-bottom-color: #007bff;
}

/* サブタブ */
#sub-tab-buttons {
    display: flex;
    gap: 10px;
    margin-bottom: 10px;
}
.sub-tab-button {
    padding: 5px 10px; border: 1px solid #ccc; background-color: #f8f9fa;
    cursor: pointer; font-size: 14px; border-radius: 4px;
}
.sub-tab-button.active {
    background-color: #007bff; color: white; border-color: #007bff;
}

/* タブコンテンツの表示/非表示 */
.main-tab-content { display: none; }
.main-tab-content.active { display: block; }

/* ===== Action Panel (glass dock) ===== */
#action-panel {
  position:fixed; inset-inline:12px; bottom:12px; z-index:60;
  display:flex; align-items:center; gap:12px; padding:12px 14px; box-sizing:border-box;
  background:linear-gradient(180deg, rgba(24,30,52,.85), rgba(16,22,40,.85));
  border:1px solid var(--line); border-radius:14px; backdrop-filter: blur(8px);
  box-shadow:0 10px 30px rgba(0,0,0,.35);
}
#action-panel button{
  padding:9px 14px; font-size:14px; border-radius:10px; border:1px solid var(--line);
  background:#172037; color:var(--text); cursor:pointer; transition:transform .1s ease, filter .2s ease, background .2s ease;
}
#action-panel button:hover{ filter:brightness(1.08); }
#action-panel button:active{ transform:translateY(1px) scale(.99); }
#action-panel #selected-info { font-size: 14px; color: var(--muted); }

/* Button accents */
.btn-primary{ background:linear-gradient(180deg, #2563eb, #1d4ed8); border-color:#1b3ea9; }
.btn-warn{ background:linear-gradient(180deg, #f59e0b, #d97706); border-color:#b45309; }
.btn-danger{ background:linear-gradient(180deg, #ef4444, #b91c1c); border-color:#7f1d1d; }
.btn-ghost{ background:transparent; border-color:var(--line); }

/* アニメーション */
@keyframes flash-success {
    0% { background-color: #77dd77; } 100% { background-color: #d4edda; }
}
.flash { animation: flash-success 1.2s ease-out; }

/* ===== Status Chips ===== */
.chip{
  display:inline-flex; align-items:center; gap:.4em; padding:.25em .6em; border-radius:999px;
  font:600 12px/1 system-ui,-apple-system,"Segoe UI",sans-serif;
  background:var(--chip); color:#cfe1ff; border:1px solid var(--chip-line);
}
.chip--live{ background:rgba(16,185,129,.12); border-color:#164e3a; color:#a7f3d0; }
.chip--answered{ background:rgba(59,130,246,.12); border-color:#1e3a8a; color:#c7d2fe; }
.chip--pending{ background:rgba(245,158,11,.12); border-color:#7c2d12; color:#fcd34d; }

/* 辞書フォーム */
#add-term-form { display: flex; gap: 10px; margin-top: 10px; }

/* タブ */
#tab-buttons {
    display: flex;
    gap: 5px;
    border-bottom: 2px solid #dee2e6;
    margin-bottom: 10px;
}
.tab-button {
    padding: 8px 15px; border: none; background-color: transparent;
    cursor: pointer; font-size: 16px;
    border-bottom: 2px solid transparent; margin-bottom: -2px;
}
.tab-button.active {
    font-weight: bold; color: #007bff; border-bottom-color: #007bff;
}

/* タブコンテンツの表示/非表示 */
.tab-content { display: none; }
.tab-content.active { display: block; }

/* ログテーブル */
#logs-table td { font-size: 12px; white-space: pre-wrap; word-break: break-all; }

/* ▼▼▼ トースト通知のカスタムスタイル ▼▼▼ */
.toastify {
    padding: 12px 20px;
    color: #fff;
    display: inline-block;
    box-shadow: 0 3px 6px -1px rgba(0, 0, 0, 0.12), 0 10px 36px -4px rgba(77, 96, 232, 0.3);
    background: -webkit-linear-gradient(315deg, #73a5ff, #5477f5);
    background: linear-gradient(135deg, #73a5ff, #5477f5);
    position: fixed;
    opacity: 0;
    transition: all 0.4s cubic-bezier(0.215, 0.61, 0.355, 1);
    border-radius: 4px;
    cursor: pointer;
    text-decoration: none;
    max-width: calc(50% - 20px);
    z-index: 2000;
}

.toastify.on {
    opacity: 1;
}

/* 成功メッセージ用のカスタムカラー */
.toastify-success {
    background: linear-gradient(135deg, #77dd77, #4CAF50);
}

/* エラーメッセージ用のカスタムカラー */
.toastify-error {
    background: linear-gradient(135deg, #ff6b6b, #f06595);
}

/* --- log stream --- */
.log-stream{
  font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
  background:#0b1020; color:#eaeef8;
  border-radius:8px; padding:12px;
  height:360px; overflow:auto; border:1px solid #16213a;
}
.log-line{ white-space:pre-wrap; line-height:1.45; padding:2px 0; border-bottom:1px solid rgba(255,255,255,.06); }
.log-line:last-child{ border-bottom:none; }
.log-line .ts{ color:#9fb3c8; margin-right:8px; }
.badge{ display:inline-block; padding:0 6px; border-radius:999px; font-size:12px; margin-right:6px; background:#334155; color:#cde; }
.badge.user{ background:#243a5a; }
.badge.action{ background:#3b4252; }
.badge.action.display{ background:#2563eb; }
.badge.action.clear{ background:#ef4444; }
.badge.action.edit{ background:#10b981; }
.badge.action.answer{ background:#f59e0b; }
.details{ color:#eaeef8; }

/* --- log levels --- */
.badge.level{ background:#334155; color:#cde; }
.badge.level.info{ background:#3b4252; }
.badge.level.success{ background:#155e75; }  /* teal系 */
.badge.level.warn{ background:#7c3aed; }     /* purple系（見やすさ重視） */
.badge.level.error{ background:#991b1b; }    /* red系 */
.badge.level.debug{ background:#475569; }

.log-line.lvl-info{    border-left:3px solid #64748b; }
.log-line.lvl-success{ border-left:3px solid #14b8a6; }
.log-line.lvl-warn{    border-left:3px solid #a78bfa; }
.log-line.lvl-error{   border-left:3px solid #ef4444; background:rgba(239,68,68,.05); }
.log-line.lvl-debug{   border-left:3px solid #94a3b8; opacity:.95; }
