/* style.css: 管理画面全体に共通するテーマカラーやレイアウトユーティリティを定義するスタイル集です。 */

/* === GenEi Gothic P / H-KL を登録（アップ済みの woff2 を使用） === */
@font-face{
  font-family: "源暎ゴシックP";
  src: url("assets/fonts/genei-gothic/GenEiGothicP-Regular.woff2") format("woff2");
  font-weight: 400; font-style: normal; font-display: swap;
}
@font-face{
  font-family: "源暎ゴシックP";
  src: url("assets/fonts/genei-gothic/GenEiGothicP-Bold.woff2") format("woff2");
  font-weight: 700; font-style: normal; font-display: swap;
}
/* === Rounded Mplus 2p（右サイドテロップ用） === */
@font-face{
  font-family: "Rounded Mgen+ 2pp";
  src: url("assets/fonts/rounded-mgenplus-2pp/rounded-mgenplus-2pp-medium.woff2") format("woff2");
  font-weight: 500; font-style: normal; font-display: swap;
}

/* ===== Theme Tokens (Broadcast UI) ===== */
:root{
  --ui-bg: #0d1117;
  --panel: #111722cc;
  --stroke: #2b3a4a;
  --txt: #e6eef7;
  --muted: #9fb0c2;
  --accent: #1ec8ff;
  --accent-2: #ff4fd8;
  --success: #18d18f;
  --warn: #ffc247;
  --danger: #ff6b6b;
  --footer-clearance: clamp(3.5rem, 6vh, 5.25rem);
  --footer-gap: clamp(1.25rem, 2vh, 1.75rem);
  --flow-stage-panel-width: min(96rem, 94vw);
  --flow-stage-panel-padding: clamp(1rem, 2.4vw, 1.6rem);
  --flow-stage-panel-radius: clamp(1.05rem, 2.2vw, 1.45rem);
  --flow-stage-panel-border: rgba(78,122,186,.36);
  --flow-stage-panel-background: linear-gradient(160deg, rgba(18,28,46,.88), rgba(10,16,30,.94));
  --flow-stage-panel-shadow: 0 18px 42px rgba(4,12,28,.44);
  --safe-area-top: env(safe-area-inset-top, 0px);
  --safe-area-bottom: env(safe-area-inset-bottom, 0px);
  --page-padding-top: 0px;
  --page-gap: 0px;
  /* aliases for consistency */
  --bg: var(--ui-bg);
  --text: var(--txt);
  --line: var(--stroke);
}

*,
*::before,
*::after{
  box-sizing:border-box;
}

body{
  margin:0;
  font-family:"源暎ゴシックP", "Noto Sans JP", "Segoe UI", system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
  font-weight: 400;
  line-height:1.6;
}
.noscript-banner{
  margin-block:1rem;
  padding:0.875rem 1rem;
  border-radius:0.75rem;
  background:rgba(255,79,216,0.12);
  border:1px solid rgba(255,79,216,0.35);
  color:var(--txt);
  font-size:0.7125rem;
  text-align:center;
}
html, body{ height:100%; }
html{ overflow:auto; }
.flow-page-root{ font-size:85%; }
.op-theme{ background:var(--bg); color:var(--text); }
body.op-theme{
  --page-gap:1vh;
  --page-pad-inline:max(2.5vw, 1.4rem);
  --page-padding-top:clamp(.45rem, 1.2vh, .85rem);
  min-height:100dvh;
  padding-inline:var(--page-pad-inline);
  padding-block-start:var(--page-padding-top);
  padding-block-end:calc(var(--footer-clearance) + var(--footer-gap) + 5rem);
  position:relative;
  background-color:var(--bg);
  display:flex;
  flex-direction:column;
  gap:var(--page-gap);
}

body.events-page{
  overflow:hidden;
  padding-block-end:var(--page-padding-top);
}

body.flow-page{
  font-size:85%;
}

/* 背景全体にノイズ感のあるグラデーションを載せ、イベントUIに奥行きを付与 */
body.op-theme::before{
  content:"";
  position:fixed;
  inset:0;
  z-index:-1;
  background:
    radial-gradient(circle at top left, rgba(46,141,255,.18), transparent 42%),
    radial-gradient(circle at 85% 10%, rgba(255,79,216,.12), transparent 46%),
    linear-gradient(180deg, rgba(9,16,28,0.92), rgba(8,12,22,0.96));
  background-repeat:no-repeat;
  background-size:cover;
  will-change:transform;
}

body.modal-open{ overflow:hidden; }

body.question-admin-page.modal-open{ overflow:hidden; }

html.embedded-view body.op-theme{
  --page-gap:clamp(1rem, 1.6vw, 1.35rem);
  padding-inline:clamp(.75rem, 1.8vw, 1.25rem);
  padding-block-start:clamp(.4rem, 1vh, .65rem);
  padding-block-end:1.5rem;
  min-height:100%;
  gap:clamp(.9rem, 1.5vw, 1.25rem);
}

html.embedded-view body.op-theme::before{ display:none; }

html.embedded-view telop-header,
html.embedded-view telop-footer,
html.embedded-view .site-footer{ display:none !important; }

.visually-hidden{ position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); border:0; }

/* ===== Header ===== */
.op-header{
  position:sticky;
  top:0;
  z-index:90;
  width:calc(100vw - var(--page-pad-inline));
  margin-inline:calc(var(--page-pad-inline) * -1);
  padding:clamp(.55rem, 1.2vw, .85rem) var(--page-pad-inline);
  background:linear-gradient(180deg, rgba(14,20,34,.95), rgba(8,12,22,.84));
  border-bottom:1px solid rgba(56,80,114,.55);
  box-shadow:0 14px 30px rgba(0,0,0,.28);
  backdrop-filter:blur(10px);
}
.header-inner{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:clamp(1rem, 2.4vw, 1.8rem);
  width:100%;
  margin-inline:auto;
  flex-wrap:wrap;
}
.brand-block{
  display:flex;
  flex-direction:column;
  gap:0.28rem;
  min-width:min(10rem, 42vw);
}
.brand-mark{
  font-size:clamp(0.825rem, 1.425vw, 1.05rem);
  font-weight:700;
  letter-spacing:.12em;
/*  text-transform:uppercase;*/
}
.brand-tagline{
  font-size:clamp(0.48rem, 0.75vw, 0.6rem);
  letter-spacing:.2em;
  color:var(--muted);
  text-transform:uppercase;
}
.header-actions{
  display:flex;
  align-items:center;
  gap:clamp(.9rem, 2.4vw, 1.4rem);
  flex:1 1 auto;
  justify-content:flex-end;
}
.header-controls{
  display:flex;
  align-items:center;
  justify-content:flex-end;
  flex-wrap:wrap;
  gap:clamp(.45rem, 1.2vw, .75rem);
}
.user-info{
  justify-self:end;
  display:flex;
  flex-direction:column;
  align-items:flex-end;
  gap:.4rem;
  font-size:clamp(0.585rem, 0.9vw, 0.675rem);
  color:var(--muted);
  text-align:right;
}
.user-info .btn{ align-self:flex-end; }
.user-label{ font-weight:500; letter-spacing:.01em; }
.flow-user-info{
  display:flex;
  flex-direction:column;
  align-items:flex-start;
  gap:clamp(.3rem, .9vw, .55rem);
  text-align:left;
  min-width:clamp(12rem, 28vw, 18rem);
}
.flow-user-info__label{
  display:block;
  max-width:100%;
}
.flow-user-info__footer{
  display:flex;
  align-items:flex-end;
  justify-content:flex-end;
  gap:clamp(.45rem, 1.4vw, .85rem);
  width:100%;
  flex-wrap:wrap;
}
.flow-user-info__meta{
  margin-right:auto;
}
.flow-user-info__logout{
  white-space:nowrap;
}
.flow-header-actions{
  display:flex;
  align-items:center;
  gap:clamp(.45rem, 1.2vw, .75rem);
}
.flow-header-actions .btn{
  white-space:nowrap;
}
@media (max-width: 720px){
  .header-inner{
    gap:clamp(.75rem, 2.4vw, 1.2rem);
  }
  .header-actions{
    flex-wrap:wrap;
    justify-content:flex-end;
    gap:clamp(.65rem, 2vw, 1rem);
  }
  .user-info{
    align-items:flex-end;
    text-align:right;
  }
}

@media (max-width: 540px){
  .header-inner{
    flex-direction:column;
    align-items:flex-start;
  }
  .header-actions{
    width:100%;
    justify-content:space-between;
    gap:.75rem;
  }
  .header-controls{
    flex:1 1 auto;
  }
  .user-info{
    align-items:flex-start;
    text-align:left;
  }
  .flow-user-info{
    width:100%;
    min-width:0;
  }
  .flow-user-info__footer{
    justify-content:space-between;
  }
}

/* グリッド背景（オペ室っぽく） */
#questions-content{
  background:
    radial-gradient(transparent 1px, rgba(255,255,255,0.04) 1px) 0 0 / 1.5rem 1.5rem,
    linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));
}

/* ===== Auth ===== */
.auth-card{
  max-width:30rem;
  margin:clamp(3rem, 8vh, 4.5rem) auto;
  padding:clamp(2rem, 4vw, 2.6rem) clamp(1.5rem, 5vw, 2.5rem);
  text-align:center;
  border-radius:clamp(1.2rem, 2vw, 1.6rem);
  border:1px solid rgba(46,64,92,.65);
  background:linear-gradient(180deg, rgba(21,28,45,.92), rgba(12,17,29,.92));
  box-shadow:0 24px 50px rgba(0,0,0,.38), inset 0 1px 0 rgba(255,255,255,.05);
}
.auth-card h2{ margin:0 0 0.5625rem; font-size:1.125rem; letter-spacing:.03em; }
.auth-lead{
  margin:0 0 clamp(1.25rem, 2.8vw, 1.8rem);
  color:var(--muted);
  font-size:0.7125rem;
}

.login-panel{
  display:flex;
  flex-direction:column;
  gap:1.1rem;
  align-items:center;
}

.login-lead{
  margin:0;
  color:var(--muted);
  line-height:1.65;
  font-size: 75%;
}

.login-status{
  align-self:stretch;
  display:flex;
  flex-direction:column;
  gap:0.65rem;
  width:100%;
  padding:1.05rem 1.1rem;
  border-radius:0.95rem;
  border:1px solid rgba(70,96,142,.48);
  background:linear-gradient(180deg, rgba(18,26,42,.78), rgba(12,18,32,.82));
  box-shadow:inset 0 1px 0 rgba(255,255,255,.03);
}

.login-status__title{
  margin:0;
  font-size:0.705rem;
  letter-spacing:.02em;
  font-weight:600;
  color:var(--txt);
}

.login-status__list{
  display:flex;
  flex-direction:column;
  gap:0.55rem;
  margin:0;
  padding:0;
  list-style:none;
}

.login-status__item{
  display:flex;
  align-items:flex-start;
  gap:0.55rem;
  font-size:0.8rem;
  line-height:1.6;
  color:var(--muted);
  transition:color .2s ease;
}

.login-status__label{
  align-self: center;
  flex:1 1 auto;
}

.login-status__icon{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  width:1.45rem;
  height:1.45rem;
  border-radius:999px;
  border:1px solid rgba(100,140,196,.5);
  background:rgba(20,30,48,.6);
  color:rgba(160,190,230,.85);
  font-size:0.9rem;
  line-height:1;
  flex-shrink:0;
  transition:all .2s ease;
}

.login-status__item.is-active{
  color:var(--txt);
}

.login-status__item.is-active .login-status__icon{
  border-color:var(--accent);
  background:rgba(30,200,255,.16);
  color:var(--accent);
  box-shadow:0 0 0 1px rgba(30,200,255,.18);
}

.login-status__item.is-complete{
  color:var(--txt);
}

.login-status__item.is-complete .login-status__icon{
  border-color:var(--success);
  background:rgba(24,209,143,.18);
  color:var(--success);
  box-shadow:0 0 0 1px rgba(24,209,143,.18);
}

.login-status__item.is-error{
  color:var(--danger);
}

.login-status__item.is-error .login-status__icon{
  border-color:var(--danger);
  background:rgba(255,107,107,.22);
  color:var(--danger);
  box-shadow:0 0 0 1px rgba(255,107,107,.22);
}

.login-status__detail{
  margin:0;
  font-size:0.8rem;
  line-height:1.6;
  color:var(--muted);
}

.login-status__detail.is-error{
  color:var(--danger);
}

.auth-error{
  margin:0 0 clamp(1rem, 2.5vw, 1.4rem);
  padding:.9rem 1rem;
  border-radius:.9rem;
  border:1px solid rgba(255,107,107,.45);
  background:rgba(255,107,107,.12);
  color:#ffeaea;
  font-size:0.675rem;
  line-height:1.5;
}

/* ===== Layout ===== */
.layout-grid{
  display:grid;
  grid-template-columns:minmax(0,1fr);
  gap:clamp(1.1rem, 2.1vw, 1.8rem);
  align-items:stretch;
  flex:1 1 auto;
  min-height:0;
  width:100%;
  max-width:min(96rem, 94vw);
  margin-inline:auto;
}
body.dictionary-open:not(.logs-open) .layout-grid,
body.logs-open:not(.dictionary-open) .layout-grid{
  grid-template-columns:minmax(0,2.35fr) minmax(0,1.2fr);
}
body.dictionary-open.logs-open .layout-grid{
  grid-template-columns:minmax(0,2fr) minmax(0,1fr) minmax(0,1fr);
}
body.dictionary-collapsed #dictionary-panel,
body.dictionary-collapsed:not(.dictionary-open) #dictionary-panel{ display:none !important; }
body.logs-collapsed #logs-panel,
body.logs-collapsed:not(.logs-open) #logs-panel{ display:none !important; }
body.dictionary-open #dictionary-panel,
body.logs-open #logs-panel{ display:flex; }

#dictionary-panel[hidden],
#logs-panel[hidden]{ display:none !important; }

.module{
  display:flex;
  flex-direction:column;
  gap:1vh;
  padding:clamp(.95rem, 1.8vw, 1.35rem) clamp(1rem, 2.2vw, 1.5rem);
  border-radius:clamp(.95rem, 1.8vw, 1.4rem);
  border:1px solid rgba(46,64,92,.6);
  background:linear-gradient(180deg, rgba(18,24,38,.92), rgba(10,14,24,.92));
  box-shadow:0 18px 40px rgba(0,0,0,.35), inset 0 1px 0 rgba(255,255,255,.04);
  min-height:0;
  overflow:hidden;
}
.module--primary{ min-height:0; }
.module--secondary{ gap:clamp(.8rem, 1.6vw, 1.1rem); }
.module-header{
  display:flex;
  align-items:flex-start;
  justify-content:space-between;
  gap:clamp(.75rem, 1.5vw, 1.15rem);
  flex-wrap:wrap;
}
.module-heading{
  display:flex;
  flex-direction:column;
  gap:.35rem;
  flex:1 1 18rem;
  min-width:0;
}
.module-header h1,
.module-header h2{ margin:0; }
.module-header h1{
  font-size:clamp(0.9rem, 1.65vw, 1.1625rem);
}
.module-header h2{
  font-size:clamp(0.7875rem, 1.425vw, 1.0125rem);
}
.module-description{
  margin:0;
  font-size:clamp(0.7rem, 0.8vw, 0.9rem);
  color:var(--muted);
  line-height:1.4;
}
.module-actions{
  display:flex;
  align-items:center;
  gap:clamp(.5rem, 1.1vw, .75rem);
}
.module-body{
  gap:1vh;
  flex:1 1 auto;
  min-height:0;
  overflow:auto;
  scrollbar-gutter:stable;
  scrollbar-width:thin;
  scrollbar-color:rgba(108,132,168,.6) rgba(18,24,38,.7);
}
.module-body::-webkit-scrollbar,
.table-scroller::-webkit-scrollbar,
.log-stream::-webkit-scrollbar{
  width:10px;
}
.module-body::-webkit-scrollbar-track,
.table-scroller::-webkit-scrollbar-track,
.log-stream::-webkit-scrollbar-track{
  background:rgba(10,16,26,.7);
  border-radius:999px;
}
.module-body::-webkit-scrollbar-thumb,
.table-scroller::-webkit-scrollbar-thumb,
.log-stream::-webkit-scrollbar-thumb{
  background:linear-gradient(180deg, rgba(46,141,255,.5), rgba(30,200,255,.35));
  border-radius:999px;
  border:2px solid rgba(9,14,24,.9);
}
.module-body::-webkit-scrollbar-thumb:hover,
.table-scroller::-webkit-scrollbar-thumb:hover,
.log-stream::-webkit-scrollbar-thumb:hover{
  background:linear-gradient(180deg, rgba(46,141,255,.7), rgba(30,200,255,.5));
}
.print-preview{
  margin-top:clamp(.6rem, 1.2vw, .9rem);
  padding:clamp(.75rem, 1.5vw, 1.05rem);
  border-radius:clamp(.8rem, 1.6vw, 1.2rem);
  border:1px solid rgba(80,124,194,.35);
  background:linear-gradient(145deg, rgba(10,18,32,.8), rgba(10,14,26,.9));
  box-shadow:inset 0 1px 0 rgba(255,255,255,.03);
  display:flex;
  flex-direction:column;
  gap:clamp(.55rem, 1.2vw, .9rem);
}
.print-preview--immersive{
  flex:1 1 auto;
  min-height:0;
}
.modal-panel--print .print-preview{ margin-top:0; }
.print-preview__header{
  display:flex;
  align-items:flex-start;
  justify-content:space-between;
  gap:clamp(.5rem, 1.1vw, .8rem);
  flex-wrap:wrap;
}
.print-preview__title{
  margin:0;
  font-size:clamp(0.9rem, 1.5vw, 1rem);
  font-weight:700;
  color:#e7f1ff;
}
.print-preview__meta{
  margin:.1rem 0 0;
  color:var(--muted);
  font-size:0.75rem;
}
.print-preview__meta:empty{ display:none; }
.print-preview__actions{
  display:flex;
  align-items:center;
  gap:.5rem;
}
.print-preview__body{
  display:flex;
  gap:clamp(.6rem, 1.2vw, .9rem);
  align-items:stretch;
  flex:1 1 auto;
  min-height:0;
}
.print-preview__panel{
  flex:1 1 60%;
  min-width:0;
  display:flex;
  flex-direction:column;
  gap:clamp(.5rem, 1vw, .8rem);
  min-height:0;
}
.print-preview__frame{
  flex:1 1 auto;
  min-height:380px;
  height:100%;
  background:rgba(6,10,20,.8);
  border-radius:clamp(.75rem, 1.5vw, 1.05rem);
  border:1px solid rgba(68,100,160,.45);
  box-shadow:inset 0 1px 0 rgba(255,255,255,.02);
  overflow:hidden;
}
.print-preview--fallback .print-preview__frame{ display:none; }
.print-preview__frame iframe{
  width:100%;
  height:100%;
  border:0;
  display:block;
  background:#fff;
}
.print-preview__note{
  flex:0 0 auto;
  align-self:stretch;
  padding:clamp(.8rem, 1.4vw, 1.05rem);
  border-radius:clamp(.75rem, 1.4vw, 1.1rem);
  border:1px dashed rgba(108,132,168,.65);
  background:rgba(16,24,40,.75);
  color:var(--muted);
  font-size:0.69rem;
  line-height:1.55;
}
.print-preview--fallback .print-preview__note{ flex:1 1 auto; }
.print-preview__note--error{
  border-style:solid;
  border-color:rgba(255,140,140,.65);
  background:linear-gradient(155deg, rgba(48,16,24,.9), rgba(32,12,24,.82));
  color:#f7d7d7;
}
.print-preview__note strong{ color:#e7f1ff; }
.print-preview__settings{
  flex:0 0 22rem;
  min-width:18rem;
  background:rgba(12,18,30,.85);
  border:1px solid rgba(80,124,194,.32);
  border-radius:clamp(.9rem, 1.6vw, 1.2rem);
  padding:clamp(.8rem, 1.5vw, 1.1rem);
  box-shadow:inset 0 1px 0 rgba(255,255,255,.04);
}
.print-settings-form{ display:flex; flex-direction:column; gap:clamp(.5rem, 1vw, .8rem); }
.print-settings-form__header{ display:flex; flex-direction:column; gap:.25rem; }
.print-settings-form__title{ margin:0; font-size:0.75rem; color:#f0f6ff; }
.print-settings-form__helper{ margin:0; color:var(--muted); font-size:0.675rem; }
.print-settings-form__fields{ display:flex; flex-direction:column; gap:.65rem; }
.print-settings-form__footer{ display:flex; justify-content:flex-end; }
.print-settings__custom{ display:flex; flex-direction:column; gap:.35rem; }
.print-settings__custom-inputs{ display:flex; align-items:center; gap:.65rem; flex-wrap:wrap; }
.print-settings__custom-field{ display:flex; align-items:center; gap:.35rem; }
.print-settings__custom-field-label{ font-weight:600; color:#e7f1ff; font-size:0.7125rem; }
.print-settings__custom-control{ display:flex; align-items:center; gap:.25rem; }
.print-settings__custom-field .input{ width:6rem; }
.print-settings__custom-suffix{ color:var(--muted); font-size:0.675rem; }
.print-settings__custom-separator{ color:var(--muted); font-size:0.75rem; }
.dictionary-body{ position:relative; display:flex; flex-direction:column; gap:clamp(.9rem, 1.7vw, 1.3rem); }
.dictionary-body .cards-scroll{ flex:1; min-height:0; overflow:auto; }
.dictionary-toolbar{
  display:flex;
  align-items:center;
  gap:clamp(.45rem, 1vw, .7rem);
  padding:clamp(.55rem, 1.2vw, .85rem) clamp(.8rem, 1.8vw, 1.1rem);
  border-radius:clamp(.95rem, 2vw, 1.3rem);
  border:1px solid rgba(80,124,194,.34);
  background:linear-gradient(145deg, rgba(16,26,44,.8), rgba(10,18,32,.85));
  box-shadow:inset 0 1px 0 rgba(255,255,255,.05);
}
.dictionary-count{ margin-left:auto; font-size:0.615rem; color:var(--muted); }
.dictionary-cards{
  display:grid;
  grid-template-columns:repeat(auto-fit, minmax(18rem, 1fr));
  gap:clamp(.6rem, 1.4vw, .95rem);
  padding:clamp(.2rem, .6vw, .45rem) 0 clamp(.2rem, .6vw, .45rem) clamp(.1rem, .4vw, .35rem);
}
.dictionary-card{
  position:relative;
  display:flex;
  flex-direction:column;
  gap:clamp(.35rem, .9vw, .6rem);
  padding:clamp(.75rem, 1.6vw, 1.05rem) clamp(.9rem, 2vw, 1.35rem);
  border-radius:clamp(1rem, 2.1vw, 1.4rem);
  border:1px solid rgba(80,124,194,.32);
  background:linear-gradient(155deg, rgba(18,28,48,.9), rgba(10,18,32,.88));
  box-shadow:0 14px 32px rgba(5,10,20,.45);
  transition:border-color .2s ease, box-shadow .2s ease, transform .2s ease, background .2s ease, color .2s ease;
}
.dictionary-card:hover{ transform:translateY(-1px); box-shadow:0 18px 40px rgba(6,12,24,.5); }
.dictionary-card.is-selected{
  border-color:rgba(72,178,255,.85);
  box-shadow:0 20px 44px rgba(30,200,255,.28);
}
.dictionary-card.is-disabled{
  background:linear-gradient(155deg, rgba(245,248,255,.6), rgba(224,233,248,.45));
  color:rgba(36,48,74,.85);
  box-shadow:0 10px 22px rgba(12,16,24,.18);
}
.dictionary-card__header{
  display:flex;
  align-items:flex-start;
  gap:.65rem;
  position:relative;
  padding-right:clamp(2.8rem, 5.5vw, 3.4rem);
}
.dictionary-card__term{
  font-size:clamp(0.7875rem, 1.425vw, 1.0125rem);
  font-weight:650;
  letter-spacing:.02em;
  word-break:break-word;
  overflow-wrap:anywhere;
}
.dictionary-card__ruby{
  font-size:clamp(0.615rem, 1.125vw, 0.765rem);
  color:var(--muted);
  line-height:1.5;
  word-break:break-word;
  overflow-wrap:anywhere;
}
.dictionary-card__status{
  margin-left:auto;
  font-size:0.5625rem;
  padding:.2rem .65rem;
  border-radius:999px;
  background:rgba(59,130,246,.18);
  color:rgba(191,219,254,.95);
  letter-spacing:.08em;
  font-weight:600;
  text-transform:uppercase;
  position:relative;
  z-index:0;
}
.dictionary-card.is-disabled .dictionary-card__status{
  background:rgba(148,163,184,.22);
  color:rgba(71,85,105,.92);
}
.dictionary-card__check{
  position:absolute;
  top:clamp(.55rem, 1.2vw, .85rem);
  right:clamp(.6rem, 1.6vw, 1rem);
  display:flex;
  align-items:center;
  justify-content:center;
  padding:clamp(.25rem, .6vw, .4rem);
  border-radius:clamp(.65rem, 1.2vw, .85rem);
  background:var(--card-check-bg);
  border:1px solid transparent;
  transition:border-color .2s ease, background .2s ease, box-shadow .2s ease;
  cursor:pointer;
  z-index:1;
}
.dictionary-card__check:hover{ background:var(--card-check-hover-bg); }
.dictionary-card__check:focus-within{ border-color:var(--card-check-focus-border); background:var(--card-check-hover-bg); }
.dictionary-card__check input{
  width:1.05rem;
  height:1.05rem;
}
.dictionary-card__footer{
  display:flex;
  align-items:center;
  justify-content:flex-end;
  gap:.4rem;
  font-size:0.5625rem;
  color:var(--muted);
}
.dictionary-card__footer span{ white-space:nowrap; }
.dictionary-card.is-disabled .dictionary-card__ruby{ color:rgba(71,85,105,.9); }
.dictionary-card.is-disabled .dictionary-card__term{ color:rgba(45,55,72,.95); }
.logs-body{ position:relative; display:flex; flex-direction:column; gap:clamp(.9rem, 1.7vw, 1.3rem); overflow:hidden; }
.logs-body #logs-stream-view{ flex:1 1 auto; min-height:0; }
.logs-body .log-stream{ flex:1 1 auto; }

#op-dictionary-panel .dictionary-body,
#op-logs-panel .logs-body{
  padding:var(--flow-stage-panel-padding);
  border-radius:var(--flow-stage-panel-radius);
  border:1px solid var(--flow-stage-panel-border);
  background:var(--flow-stage-panel-background);
  box-shadow:var(--flow-stage-panel-shadow);
  backdrop-filter:blur(18px);
  min-height:0;
}

#op-dictionary-panel .dictionary-form,
#op-logs-panel .logs-toolbar{
  display:flex;
  flex-wrap:wrap;
  align-items:flex-end;
  gap:clamp(.55rem, 1.2vw, .85rem);
  padding:clamp(.6rem, 1.3vw, .85rem) clamp(.8rem, 1.8vw, 1.1rem);
  border-radius:clamp(.95rem, 2vw, 1.3rem);
  border:1px solid rgba(80,124,194,.34);
  background:linear-gradient(145deg, rgba(16,26,44,.8), rgba(10,18,32,.85));
  box-shadow:inset 0 1px 0 rgba(255,255,255,.05);
}

.dictionary-form .input{ flex:1 1 14rem; min-width:10rem; }
.dictionary-form .btn{ flex:0 0 auto; }

.pickup-body{ position:relative; display:flex; flex-direction:column; gap:clamp(.9rem, 1.7vw, 1.3rem); }
.pickup-add-body textarea{ min-height:clamp(6.5rem, 18vh, 12rem); }
.pickup-tabs{ display:flex; flex-wrap:wrap; gap:clamp(.5rem, 1.2vw, .75rem); margin:0; }
.pickup-tab{ font-size: 75%; padding:clamp(.45rem, 1vw, .6rem) clamp(.9rem, 2vw, 1.15rem); border-radius:999px; border:1px solid rgba(70,94,128,.5); background:rgba(12,20,34,.6); color:var(--muted); font-weight:600; cursor:pointer; transition:background .18s ease, color .18s ease, border-color .18s ease, box-shadow .18s ease; }
.pickup-tab.is-active,
.pickup-tab[aria-selected="true"]{ color:var(--text); border-color:rgba(30,200,255,.6); background:linear-gradient(180deg, rgba(30,200,255,.22), rgba(14,110,190,.18)); box-shadow:0 10px 24px rgba(0,0,0,.28); }
.pickup-tab:focus-visible{ outline:2px solid rgba(30,200,255,.8); outline-offset:2px; }
.pickup-body .cards-scroll{ flex:1; min-height:0; overflow:auto; }
.pickup-form{ display:flex; flex-wrap:wrap; gap:clamp(.55rem, 1.2vw, .85rem); align-items:flex-end; }
.pickup-form textarea{ flex:1 1 clamp(18rem, 40vw, 28rem); min-height:clamp(5.5rem, 10vw, 7rem); }
.pickup-form__genre{ display:flex; flex-direction:column; flex:0 0 clamp(12rem, 18vw, 14rem); }
.pickup-form select{ width:100%; }
.pickup-form .btn{ flex:0 0 auto; }
.pickup-list{ display:flex; flex-direction:column; gap:clamp(.6rem, 1.1vw, .9rem); margin:0; padding:0; list-style:none; }
.pickup-card{ background:linear-gradient(180deg, rgba(17,24,37,.92), rgba(11,16,26,.96)); border:1px solid rgba(46,68,96,.65); border-radius:clamp(.9rem, 1.5vw, 1.2rem); box-shadow:0 12px 32px rgba(0,0,0,.42); padding:clamp(.85rem, 1.6vw, 1.2rem) clamp(.95rem, 1.8vw, 1.3rem); display:flex; flex-direction:column; gap:clamp(.65rem, 1.1vw, .85rem); color:var(--txt); transition:border-color .18s ease, box-shadow .18s ease, transform .2s ease; cursor:pointer; outline:none; }
.pickup-card:hover{ border-color:rgba(41,182,246,.6); box-shadow:0 18px 42px rgba(0,0,0,.5); transform:translateY(-2px); }
.pickup-card:focus-visible{ outline:2px solid rgba(41,182,246,.85); outline-offset:4px; }
.pickup-card.is-selected{ border-color:rgba(59,201,255,.85); box-shadow:0 22px 48px rgba(16,110,190,.45); }
.pickup-card.is-selected .pickup-card__genre{ background:rgba(41,182,246,.18); border-color:rgba(41,182,246,.6); color:#e8f7ff; }
.pickup-card__question{ margin:0; white-space:pre-wrap; line-height:1.55; font-size:0.72rem; }
.pickup-card__meta{ display:flex; flex-wrap:wrap; align-items:center; gap:0.45rem; font-size:0.615rem; color:var(--muted); }
.pickup-card__genre{ display:inline-flex; align-items:center; gap:.35rem; padding:.3rem .85rem; border-radius:999px; background:rgba(30,200,255,.12); border:1px solid rgba(30,200,255,.3); font-weight:600; letter-spacing:.04em; color:var(--txt); }
.pickup-card__time{ color:var(--muted); }

.logs-toolbar{ display:flex; gap:clamp(.55rem, 1.2vw, .85rem); align-items:center; flex-wrap:wrap; }
.logs-toolbar .input{ flex:1 1 14rem; min-width:0; max-width:20rem; }

#op-logs-panel #op-logs-stream-view{
  padding:clamp(.6rem, 1.4vw, .9rem);
  border-radius:clamp(1rem, 2.4vw, 1.5rem);
  border:1px solid rgba(74,116,184,.32);
  background:linear-gradient(150deg, rgba(11,20,36,.82), rgba(6,12,24,.86));
  box-shadow:inset 0 1px 0 rgba(255,255,255,.04);
  flex:1 1 auto;
  min-height:0;
  overflow:auto;
}

#op-logs-panel #op-log-stream{
  border-radius:clamp(.9rem, 2vw, 1.3rem);
  border:1px solid rgba(78,122,188,.28);
  background:rgba(8,14,26,.74);
  padding:clamp(.85rem, 1.8vw, 1.15rem);
  box-shadow:inset 0 0 0 1px rgba(255,255,255,.02);
}

@media (max-width: 1180px){
  .layout-grid{ grid-template-columns:1fr; }
}

/* ===== Controls ===== */
.btn{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  gap:clamp(.4rem, .9vw, .6rem);
  padding:clamp(.6rem, 1.3vw, .7rem) clamp(1rem, 2.4vw, 1.2rem);
  border-radius:clamp(.75rem, 1.4vw, .95rem);
  border:1px solid rgba(60,82,110,.7);
  background:linear-gradient(180deg, rgba(28,38,62,.85), rgba(18,26,44,.9));
  color:var(--text);
  font:600 0.95rem/1 "Noto Sans JP", "Segoe UI", system-ui, sans-serif;
  letter-spacing:.02em;
  cursor:pointer;
  transition:transform .12s ease, filter .18s ease, box-shadow .18s ease;
  text-decoration:none;
}
.btn:hover{ filter:brightness(1.08); box-shadow:0 10px 22px rgba(0,0,0,.25); }
.btn:active{ transform:translateY(1px) scale(.99); }
.btn:disabled{
  opacity:.45;
  cursor:not-allowed;
  box-shadow:none;
}
.btn-primary{
  background:linear-gradient(180deg, #2563eb, #1b46c1);
  border-color:#1f3b94;
  box-shadow:0 12px 26px rgba(37,99,235,.35);
}
.btn-danger{
  background:linear-gradient(180deg, #ef4444, #b91c1c);
  border-color:#7f1d1d;
}
.btn-secondary{
  background:linear-gradient(180deg, #34d399, #059669);
  border-color:#047857;
  box-shadow:0 12px 26px rgba(52, 211, 153, .28);
}
.btn-ghost{
  font-size:90%;
  background:rgba(20,28,46,.4);
  border-color:rgba(80,104,142,.6);
}

.input{
  width:100%;
  padding:clamp(.55rem, 1.2vw, .68rem) clamp(.8rem, 2vw, 1rem);
  border-radius:clamp(.7rem, 1.2vw, .85rem);
  border:1px solid rgba(70,94,128,.6);
  background:rgba(12,18,32,.85);
  color:var(--text);
  font-size:0.95rem;
  transition:border-color .18s ease, box-shadow .18s ease;
}

textarea.input{
  min-height:8.5rem;
  resize:vertical;
  line-height:1.6;
}

textarea.input.chat-input,
.chat-input.input{
  min-height:1.65em;
}
.input:focus-visible,
.btn:focus-visible,
input[type="checkbox"]:focus-visible{
  outline:2px solid rgba(30,200,255,.6);
  outline-offset:2px;
}
.input:focus-visible{
  border-color:rgba(30,200,255,.75);
  box-shadow:0 0 0 3px rgba(30,200,255,.2);
}

input[type="checkbox"]{
  width:1.1rem;
  height:1.1rem;
  accent-color:var(--accent);
}

.logs-toolbar{
  display:flex;
  gap:clamp(.55rem, 1.2vw, .85rem);
  align-items:center;
  flex-wrap:wrap;
}
.logs-toolbar .input{ flex:1 1 14rem; min-width:0; max-width:20rem; }

.dictionary-form{
  display:flex;
  flex-wrap:wrap;
  gap:clamp(.55rem, 1.2vw, .85rem);
}
.dictionary-form .input{ flex:1 1 14rem; min-width:10rem; }

.table-scroller{
  overflow:auto;
  padding:0;
  border:none;
  border-radius:0;
  background:none;
  box-shadow:none;
}
.table-actions{
  display:flex;
  gap:clamp(.4rem, 1vw, .6rem);
  flex-wrap:wrap;
  justify-content:flex-end;
}
.table-actions .btn{ flex:1 1 7.5rem; }

.action-panel-right{ margin-left:auto; display:flex; align-items:center; gap:clamp(.5rem, 1.2vw, .75rem); }

.sub-tabs{
  display:flex;
  gap:clamp(.5rem, 1.2vw, .75rem);
  margin:0;
  flex-wrap:wrap;
}
.genre-tabs{
  display:flex;
  gap:clamp(.5rem, 1.2vw, .75rem);
  margin:0;
  flex-wrap:wrap;
}
.tab-group{
  display:flex;
  flex-direction:column;
  gap:clamp(.3rem, .9vw, .5rem);
  padding:0.5rem 1rem;
  border-radius:1rem;
  position:relative;
  overflow:hidden;
}
.tab-group::before{
  content:"";
  position:absolute;
  inset:0;
  border-radius:inherit;
  opacity:.9;
  pointer-events:none;
}
.tab-group__label{
  font-size:clamp(0.525rem, 0.825vw, 0.6rem);
  letter-spacing:.08em;
  text-transform:uppercase;
  font-weight:700;
  color:var(--muted);
}
.genre-tab-button,
.sub-tab-button{
  padding:0.25rem 0.5rem;
  border-radius:999px;
  border:1px solid rgba(70,94,128,.5);
  background:rgba(12,20,34,.6);
  color:var(--muted);
  font-weight:600;
  cursor:pointer;
  transition:background .18s ease, color .18s ease, border-color .18s ease;
}
.genre-tab-button.active,
.sub-tab-button.active{
  color:var(--text);
  border-color:rgba(30,200,255,.6);
  background:linear-gradient(180deg, rgba(30,200,255,.22), rgba(14,110,190,.18));
}
.tab-group--genre{
  background:linear-gradient(135deg, rgba(12,32,52,.86), rgba(8,20,36,.92));
  box-shadow:0 0 0 1px rgba(56,144,214,.38) inset;
}
.tab-group--genre::before{
  background:radial-gradient(circle at top left, rgba(30,200,255,.18), transparent 55%);
}
.tab-group--genre .tab-group__label{
  color:rgba(150,222,255,.92);
}
.tab-group--genre .genre-tab-button{
  font-size: 75%;
  background:rgba(10,30,52,.72);
  border-color:rgba(52,160,220,.38);
}
.tab-group--genre .genre-tab-button.active{
  background:linear-gradient(135deg, rgba(46,141,255,.42), rgba(30,200,255,.32));
  border-color:rgba(30,200,255,.7);
  box-shadow:0 0 0 1px rgba(20,120,210,.35);
}
.tab-group--sub{
  background:linear-gradient(135deg, rgba(36,16,58,.88), rgba(20,10,36,.94));
  box-shadow:0 0 0 1px rgba(190,120,255,.32) inset;
}
.tab-group--sub::before{
  background:radial-gradient(circle at top left, rgba(190,120,255,.2), transparent 55%);
}
.tab-group--sub .tab-group__label{
  color:rgba(228,204,255,.9);
}
.tab-group--sub .sub-tab-button{
  font-size: 75%;
  background:rgba(44,20,70,.74);
  border-color:rgba(198,120,255,.35);
}
.tab-group--sub .sub-tab-button.active{
  background:linear-gradient(135deg, rgba(186,116,255,.38), rgba(126,70,214,.35));
  border-color:rgba(198,120,255,.65);
  box-shadow:0 0 0 1px rgba(156,86,226,.35);
}
.genre-tab-button[disabled]{
  opacity:.5;
  cursor:not-allowed;
}
#questions-content{
  display:flex;
  flex-direction:column;
  gap:0;
  overflow:hidden;
  padding:0;
}
#questions-content .cards-scroll{
  flex:1 1 auto;
  min-height:0;
  overflow:auto;
  padding:0 clamp(.25rem, 1vw, .75rem);
  scrollbar-gutter:stable;
  scrollbar-width:thin;
  scrollbar-color:rgba(108,132,168,.6) rgba(18,24,38,.7);
}
#questions-content .cards-scroll::-webkit-scrollbar{ width:10px; }
#questions-content .cards-scroll::-webkit-scrollbar-track{
  background:rgba(10,16,26,.7);
  border-radius:999px;
}
#questions-content .cards-scroll::-webkit-scrollbar-thumb{
  background:linear-gradient(180deg, rgba(46,141,255,.5), rgba(30,200,255,.35));
  border-radius:999px;
  border:2px solid rgba(9,14,24,.9);
}
#questions-content .cards-scroll::-webkit-scrollbar-thumb:hover{
  background:linear-gradient(180deg, rgba(46,141,255,.7), rgba(30,200,255,.5));
}
.cards-sticky{
  position:sticky;
  position:-webkit-sticky;
  display:flex;
  flex-direction:column;
  gap:clamp(.4rem, 1.2vw, .7rem);
  top:0;
  z-index:2;
  background:linear-gradient(180deg, rgba(18,24,38,.97), rgba(18,24,38,.82) 65%, rgba(18,24,38,0));
  backdrop-filter:blur(2px);
}
.cards-sticky::after{
  content:"";
  position:absolute;
  left:clamp(.25rem, 1vw, .75rem);
  right:clamp(.25rem, 1vw, .75rem);
  bottom:0;
  height:1px;
  background:linear-gradient(90deg, transparent, rgba(72,96,132,.45), transparent);
  opacity:.6;
  pointer-events:none;
}
#logs-stream-view{ display:flex; flex-direction:column; flex:1 1 auto; min-height:0; }
#logs-stream-view .log-stream{ flex:1 1 auto; height:100%; min-height:0; }

/* カードツールバー */
.cards-toolbar{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:clamp(.45rem, 1vw, .7rem);
  color:var(--muted);
  flex-wrap:wrap;
}
.cards-toolbar .toolbar-left{
  display:flex;
  align-items:center;
  gap:clamp(.45rem, 1vw, .7rem);
  flex-wrap:wrap;
}
.cards-toolbar .toolbar-right{
  display:flex;
  align-items:center;
  gap:clamp(.45rem, 1vw, .7rem);
  margin-left:auto;
}
.cards-toolbar .toolbar-left .btn{
  flex-shrink:0;
  white-space:nowrap;
}
.schedule-context{
  display:flex;
  flex-direction:column;
  gap:.25rem;
  padding:.45rem .7rem;
  border-radius:clamp(.65rem, 1.1vw, .85rem);
  background:rgba(15,23,36,.55);
  border:1px solid rgba(70,94,128,.4);
  min-width:clamp(12rem, 24vw, 20rem);
}
.schedule-event{
  font-weight:600;
  font-size:0.75rem;
  color:var(--base);
  letter-spacing:.02em;
}
.schedule-meta{
  display:flex;
  align-items:center;
  flex-wrap:wrap;
  gap:clamp(.35rem, .8vw, .55rem);
  font-size:0.675rem;
  color:var(--muted);
}
.schedule-label{
  font-weight:600;
  letter-spacing:.05em;
}
.schedule-range{
  color:var(--muted);
  font-size:0.6375rem;
  white-space:nowrap;
}
.chk{
  display:flex;
  align-items:center;
  gap:clamp(.35rem, .8vw, .5rem);
  font-size:0.675rem;
}

/* カードリスト */
.cards-list{
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:clamp(.55rem, 1.2vw, .85rem);
}

.q-card{
  position:relative;
  display:flex;
  flex-direction:column;
  gap:0.5rem;
  border-radius:clamp(.9rem, 1.5vw, 1.2rem);
  --card-bg:linear-gradient(180deg, rgba(17,24,37,.9), rgba(11,16,26,.94));
  --card-border:rgba(46,68,96,.68);
  --card-hover-border:#3b5672;
  --card-shadow:0 10px 24px rgba(0,0,0,.32), inset 0 1px 0 rgba(255,255,255,.04);
  --card-shadow-hover:0 12px 34px rgba(0,0,0,.44);
  --card-check-bg:rgba(14,20,32,.6);
  --card-check-hover-bg:rgba(30,200,255,.1);
  --card-check-focus-border:rgba(30,200,255,.65);
  --card-checkbox-accent:var(--accent);
  background:var(--card-bg);
  border:1px solid var(--card-border);
  box-shadow:var(--card-shadow);
  padding:1rem;
  color:var(--txt);
  transition:border-color .18s ease, box-shadow .18s ease;
  width:100%;
}
.q-card:hover{ border-color:var(--card-hover-border); box-shadow:var(--card-shadow-hover); }
.q-card.is-selected{ box-shadow:0 0 0 2px rgba(41,182,246,.8), 0 16px 38px rgba(0,0,0,.5); border-color:rgba(41,182,246,.75); }
.q-card.locked{ opacity:.55; }
.q-card:focus-visible{
  outline:2px solid rgba(41,182,246,.85);
  outline-offset:3px;
}

.q-card.is-live{
  --card-bg:linear-gradient(180deg, rgba(86,16,24,.92), rgba(45,10,14,.96));
  --card-border:rgba(239,68,68,.55);
  --card-hover-border:rgba(248,113,113,.85);
  --card-shadow:0 12px 32px rgba(127,0,0,.4), inset 0 1px 0 rgba(255,255,255,.05);
  --card-shadow-hover:0 18px 40px rgba(127,0,0,.5);
  --card-check-bg:rgba(127,29,29,.42);
  --card-check-hover-bg:rgba(248,113,113,.24);
  --card-check-focus-border:rgba(248,113,113,.6);
  --card-checkbox-accent:#f87171;
  color:#ffe4e6;
}

.q-card.is-answered{
  --card-bg:linear-gradient(180deg, rgba(71,85,105,.86), rgba(51,65,85,.94));
  --card-border:rgba(148,163,184,.7);
  --card-hover-border:rgba(226,232,240,.85);
  --card-shadow:0 10px 28px rgba(30,41,59,.32), inset 0 1px 0 rgba(255,255,255,.05);
  --card-shadow-hover:0 14px 34px rgba(30,41,59,.42);
  --card-check-bg:rgba(100,116,139,.4);
  --card-check-hover-bg:rgba(226,232,240,.25);
  --card-check-focus-border:rgba(226,232,240,.55);
  --card-checkbox-accent:#f1f5f9;
  color:#f8fafc;
}

.q-card.is-answered .q-name{
  background:linear-gradient(180deg, rgba(226,232,240,.22), rgba(148,163,184,.14));
  border-color:rgba(226,232,240,.5);
  color:#0f172a;
}

.q-card.is-live .q-name{
  background:linear-gradient(180deg, rgba(248,113,113,.18), rgba(127,29,29,.12));
  border-color:rgba(248,113,113,.45);
  color:#fff5f5;
}

.q-card.is-puq .q-name{
  background:linear-gradient(180deg, rgba(253,186,116,.28), rgba(217,119,6,.18));
  border-color:rgba(251,191,36,.55);
  color:#fff7ed;
  box-shadow:0 0 0 1px rgba(251,191,36,.35) inset;
}

.q-card.is-puq.is-answered .q-name{
  background:linear-gradient(180deg, rgba(254,240,138,.38), rgba(217,119,6,.22));
  border-color:rgba(217,119,6,.6);
  color:#78350f;
}

/* ローディング状態 */
.q-card.is-loading{
  position:relative;
  pointer-events:none;
  opacity:0.7;
}
.q-card.is-loading::after{
  content:"";
  position:absolute;
  top:0;
  left:0;
  right:0;
  bottom:0;
  background:rgba(0,0,0,.3);
  border-radius:inherit;
  z-index:1;
  display:flex;
  align-items:center;
  justify-content:center;
}
.q-card.is-loading .q-loading-spinner{
  position:absolute;
  top:50%;
  left:50%;
  transform:translate(-50%, -50%);
  width:clamp(2rem, 3.4vw, 2.6rem);
  height:clamp(2rem, 3.4vw, 2.6rem);
  border:.22rem solid rgba(231,236,251,.18);
  border-top-color:var(--accent, #1ec8ff);
  border-radius:50%;
  animation:spin 1s linear infinite;
  z-index:2;
  box-shadow:0 0 0 1px rgba(12,18,34,.4);
}

/* 上段：RN & 班・状態 */
.q-head{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:clamp(.35rem, .9vw, .6rem);
}
.q-title{
  flex:1 1 auto;
  min-width:0;
  display:flex;
  flex-wrap:wrap;
  align-items:center;
  gap:clamp(.35rem, .9vw, .6rem);
}
.q-name{
  display:inline-flex;
  align-items:center;
  gap:clamp(.3rem, .75vw, .5rem);
  padding:clamp(.24rem, .7vw, .38rem) clamp(.7rem, 1.6vw, .95rem);
  border-radius:999px;
  background:linear-gradient(180deg, rgba(30,200,255,.16), rgba(20,120,210,.08));
  border:1px solid rgba(58,152,220,.45);
  font-weight:600;
  letter-spacing:.03em;
  font-size:0.675rem;
}
.q-genre{
  display:inline-flex;
  align-items:center;
  gap:.35rem;
  padding:clamp(.2rem, .55vw, .35rem) clamp(.55rem, 1.2vw, .8rem);
  border-radius:999px;
  border:1px solid rgba(79,140,210,.42);
  background:linear-gradient(180deg, rgba(32,116,196,.18), rgba(22,86,156,.12));
  font-size:0.585rem;
  font-weight:600;
  letter-spacing:.05em;
  color:rgba(216,236,255,.92);
}
.q-corner{
  position:absolute;
  top:clamp(.55rem, 1.3vw, .9rem);
  right:clamp(.65rem, 1.5vw, 1rem);
  display:flex;
  align-items:center;
  justify-content:flex-end;
  gap:clamp(.35rem, .8vw, .55rem);
}
.q-group{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  min-width:3em;
  padding:clamp(.3rem, .8vw, .45rem) clamp(.75rem, 1.6vw, 1rem);
  border-radius:clamp(.65rem, 1.2vw, .85rem);
  background:linear-gradient(180deg, rgba(255,200,0,.16), rgba(255,200,0,.06));
  border:1px solid rgba(255,200,0,.35);
  color:#ffe9a6;
  font-weight:700;
  letter-spacing:.08em;
}

.q-participant{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  min-width:3.1em;
  padding:clamp(.28rem, .75vw, .42rem) clamp(.65rem, 1.4vw, .85rem);
  border-radius:clamp(.65rem, 1.1vw, .85rem);
  background:linear-gradient(180deg, rgba(94,234,212,.18), rgba(16,185,129,.1));
  border:1px solid rgba(45,212,191,.35);
  color:#c7f9e0;
  font-weight:600;
  letter-spacing:.08em;
  font-variant-numeric:tabular-nums;
}
.q-check{
  display:flex;
  align-items:center;
  justify-content:center;
  padding:clamp(.28rem, .65vw, .4rem);
  border-radius:clamp(.65rem, 1.1vw, .85rem);
  background:var(--card-check-bg);
  border:1px solid transparent;
  transition:border-color .2s ease, background .2s ease, box-shadow .2s ease;
  cursor:pointer;
}
.q-check:hover{ background:var(--card-check-hover-bg); }
.q-check:focus-within{ border-color:var(--card-check-focus-border); background:var(--card-check-hover-bg); }
.q-check input.row-checkbox{
  width:1.1rem;
  height:1.1rem;
}

.q-card.is-live .q-check:hover{ box-shadow:0 0 0 1px rgba(248,113,113,.35) inset; }
.q-card.is-live .q-check:focus-within{ box-shadow:0 0 0 1px rgba(248,113,113,.45) inset; }
.q-card.is-answered .q-check:hover{ box-shadow:0 0 0 1px rgba(148,163,184,.28) inset; }
.q-card.is-answered .q-check:focus-within{ box-shadow:0 0 0 1px rgba(148,163,184,.35) inset; }

/* 下段：質問文 */
.q-text{
  font-size:0.735rem;
  line-height:1.7;
  letter-spacing:.01em;
  color:#f5f8ff;
}

/* 右上：チェックボックス（バッチ操作） */
.q-card input.row-checkbox{
  accent-color: var(--card-checkbox-accent);
}

/* login 中の簡易スタイル（任意） */
#login-button.is-busy {
  opacity: 0.7;
  pointer-events: none;
  cursor: progress;
}

/* ===== Loading Overlay ===== */
#loading-overlay[hidden] { display: none !important; }
#loading-overlay {
  position: fixed;
  inset: 0;
  z-index: 9999;
  border-radius: 0;
  display:flex;
  align-items:center;
  justify-content:center;
  padding: clamp(1.5rem, 4vw, 2.75rem);
}
.loading-overlay {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 1rem;
  padding: clamp(1rem, 2.4vw, 1.6rem);
  border-radius: inherit;
  z-index: 8;
  pointer-events: all;
}
.loading-overlay[hidden] {
  display: none !important;
}
.loading-backdrop {
  position: absolute;
  inset: 0;
  border-radius: inherit;
  background: linear-gradient(155deg, rgba(12,18,34,.78), rgba(6,12,24,.9));
  backdrop-filter: blur(18px);
  -webkit-backdrop-filter: blur(18px);
  box-shadow: inset 0 0 0 1px rgba(118,156,226,.18), 0 24px 60px rgba(4,10,24,.55);
}
.loading-panel {
  position: relative;
  z-index: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: clamp(.65rem, 1.4vw, .95rem);
  min-width: clamp(15rem, 36vw, 22rem);
  max-width: min(92vw, 34rem);
  padding: clamp(1.15rem, 2.6vw, 1.6rem) clamp(1.35rem, 3.2vw, 1.9rem);
  border-radius: clamp(1rem, 2.4vw, 1.45rem);
  background: linear-gradient(182deg, rgba(28,38,64,.92), rgba(12,18,34,.98));
  box-shadow: 0 26px 56px rgba(2,8,20,.58), inset 0 1px 0 rgba(255,255,255,.08);
  color: #e7ecfb;
  text-align: center;
}
.spinner {
  display:inline-block;
  width: clamp(2rem, 3.4vw, 2.6rem);
  height: clamp(2rem, 3.4vw, 2.6rem);
  margin: 0 auto clamp(.55rem, 1.2vw, .85rem);
  border: .22rem solid rgba(231,236,251,.18);
  border-top-color: #fff;
  border-radius: 50%;
  animation: spin 1s linear infinite;
  box-shadow: 0 0 0 1px rgba(12,18,34,.4);
}
@keyframes spin { to { transform: rotate(360deg); } }
.loading-text {
  font-weight: 600;
  letter-spacing: .03em;
  font-size: clamp(0.675rem, 1.2vw, 0.75rem);
  color: #f4f7ff;
}
.loading-sub  {
  margin-top: .2rem;
  font-size: clamp(0.54rem, 0.9vw, 0.6rem);
  letter-spacing: .03em;
  color: rgba(219,230,255,.7);
}
.loader-steps {
  width: 100%;
  margin-top: clamp(.8rem, 1.6vw, 1rem);
  padding-left: clamp(1rem, 2.2vw, 1.4rem);
  text-align: left;
  font-size: clamp(0.54rem, 0.9vw, 0.615rem);
  color: rgba(215,226,250,.78);
}
.loader-steps li {
  margin:.3rem 0;
  opacity:.65;
  transition:opacity .2s ease, transform .2s ease;
  transform:translateX(-4px);
}
.loader-steps li.current {
  opacity:1;
  transform:translateX(0);
  list-style:decimal;
}
.loader-steps li.done {
  opacity:.85;
}

/* ===== Loader steps (段階表示) ===== */
#loader-steps{
  margin-top:.85rem;
  padding-left:1.35rem;
  max-width:35rem;
  font-size:0.6375rem;
  color:rgba(215,226,250,.78);
}
#loader-steps li{
  margin:4px 0;
  opacity:.65;
  transition:opacity .2s, transform .2s;
  transform:translateX(-4px);
}
#loader-steps li.current{
  opacity:1;
  transform:translateX(0);
  list-style:decimal;
}
#loader-steps li.done{ opacity:.85; }

/* ==== Display 状態ランプ ==== */
.status-bar{
  display:flex;
  align-items:center;
  flex-wrap:wrap;
  gap:clamp(.65rem, 1.3vw, .95rem);
  color:var(--muted);
  font-size:clamp(0.54rem, 0.7125vw, 0.6375rem);
  flex:0 1 26rem;
  min-width:15rem;
}
.render-indicator{ display:flex; align-items:center; gap:.45rem; }
.lamp{ inline-size:.85rem; block-size:.85rem; border-radius:9999px; background:#94a3b8;
  box-shadow:0 0 0 1px rgba(0,0,0,.25) inset, 0 0 10px rgba(0,0,0,.25);
  transition: background-color .18s ease, box-shadow .18s ease, transform .18s ease; }
.lamp-label{ font: .72rem/1.4 system-ui, -apple-system, "Segoe UI", sans-serif; color:#6b7a8c; letter-spacing:.05em; }
.lamp.is-visible{ background:var(--success); box-shadow:0 0 12px #10b98180; }
.lamp.is-showing,.lamp.is-hiding{ background:var(--warn); box-shadow:0 0 12px #f59e0b80; }
.lamp.is-hidden{ background:#94a3b8; }
.lamp.is-error{ background:var(--danger); box-shadow:0 0 12px #ef444480; }

/* ★ 30秒超過で“古さ”をわずかに示す（事故防止） */
.render-indicator.is-stale{ filter:saturate(.6); opacity:.85; }

/* === 表示内容プレビュー === */
.render-summary{ display:flex; flex-direction:column; gap:.22rem; min-inline-size:0; flex:1 1 auto; }
.render-line{ display:flex; align-items:baseline; gap:.5rem; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.render-summary .text-strong{ font-weight:700; letter-spacing:.01em; max-inline-size:36rem; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.render-summary .text-soft{ color:#c6d1e3; opacity:.9; max-inline-size:48rem; display:-webkit-box; -webkit-line-clamp:2; -webkit-box-orient:vertical; overflow:hidden; }
.render-summary .text-meta{ color:#9fb3c8; font-size:0.5625rem; }
.render-summary .label{ color:#9fb3c8; font-size:0.5625rem; }

/* 更新フラッシュ */
.render-indicator.is-updated .lamp{ transform: scale(1.15); }
.render-summary.is-updated{ animation: renderFlash .8s ease; }
@keyframes renderFlash{
  0%{ filter: brightness(1.2); }
  100%{ filter: brightness(1); }
}

@media (max-width: 900px){
  .status-bar{
    flex:1 1 100%;
    justify-content:flex-start;
    gap:.75rem;
    margin-top:.35rem;
  }
}

/* ===== Data tables ===== */
table{ width:100%; border-collapse:separate; border-spacing:0; margin-top:.75rem; color:var(--text); }
#dictionary-table thead th,
#op-dictionary-table thead th{
  text-align:left;
  font-weight:600;
  padding:clamp(.65rem, 1.3vw, .85rem) clamp(.9rem, 2vw, 1.15rem);
  background:linear-gradient(180deg, rgba(23,34,54,.9), rgba(17,24,40,.9));
  border-bottom:1px solid rgba(46,64,92,.7);
  position:sticky;
  top:0;
  z-index:2;
}
#dictionary-table tbody td,
#op-dictionary-table tbody td{
  padding:clamp(.65rem, 1.3vw, .85rem) clamp(.9rem, 2vw, 1.15rem);
  border-bottom:1px solid rgba(46,64,92,.45);
  font-size:0.675rem;
}
#dictionary-table tbody tr:hover,
#op-dictionary-table tbody tr:hover{
  background:rgba(30,200,255,.08);
}
#dictionary-table tbody tr.disabled,
#op-dictionary-table tbody tr.disabled{
  opacity:.6;
}
#dictionary-table tbody tr.disabled td,
#op-dictionary-table tbody tr.disabled td{
  color:var(--muted);
}

/* ===== Action Panel (glass dock) ===== */
#action-panel { 
  position:fixed;
  left:50%;
  bottom:calc(var(--footer-clearance) + var(--footer-gap));
  transform:translateX(-50%);
  z-index:60;
  width:min(calc(100% - 2*var(--page-pad-inline)), 94vw, 96rem);
  display:flex;
  align-items:center;
  gap:clamp(.6rem, 1.4vw, .95rem);
  padding:clamp(.75rem, 1.6vw, 1.1rem) clamp(1rem, 2.2vw, 1.4rem);
  box-sizing:border-box;
  background:linear-gradient(180deg, rgba(24,32,54,.88), rgba(13,19,32,.9));
  border:1px solid rgba(46,64,92,.7);
  border-radius:clamp(1rem, 1.9vw, 1.4rem);
  backdrop-filter: blur(10px);
  box-shadow:0 16px 40px rgba(0,0,0,.38);
}
#action-panel #selected-info { font-size: 0.675rem; color: var(--muted); }
#op-dictionary-action-panel,
#dictionary-action-panel,
#op-pickup-action-panel,
#qa-participant-action-panel{
  position:sticky;
  bottom:0;
  display:flex;
  flex-wrap:wrap;
  align-items:flex-start;
  gap:clamp(.55rem, 1.25vw, .85rem);
  padding:clamp(.65rem, 1.4vw, .95rem) clamp(.9rem, 2vw, 1.25rem);
  border-radius:clamp(1rem, 1.9vw, 1.35rem);
  border:1px solid rgba(46,64,92,.7);
  background:linear-gradient(180deg, rgba(24,32,54,.88), rgba(13,19,32,.9));
  box-shadow:0 14px 36px rgba(0,0,0,.32);
  backdrop-filter:blur(10px);
  transition:opacity .2s ease;
  width:100%;
  max-width:100%;
  box-sizing:border-box;
}
#op-dictionary-action-panel[hidden],
#dictionary-action-panel[hidden],
#op-pickup-action-panel[hidden],
#qa-participant-action-panel[hidden]{ display:none !important; }
#op-dictionary-action-panel .btn,
#dictionary-action-panel .btn,
#op-pickup-action-panel .btn,
#qa-participant-action-panel .btn{ padding:clamp(.45rem, 1vw, .58rem) clamp(.85rem, 2vw, 1.05rem); }
#op-dictionary-action-panel #op-dictionary-selected-info,
#dictionary-action-panel #dictionary-selected-info,
#op-pickup-action-panel #op-pickup-selected-info,
#qa-participant-action-panel #qa-participant-action-info{
  font-size:0.675rem;
  color:var(--muted);
  flex:1 1 100%;
  order:5;
}
#op-dictionary-action-panel .action-panel-right,
#dictionary-action-panel .action-panel-right,
#op-pickup-action-panel .action-panel-right,
#qa-participant-action-panel .action-panel-right{
  margin-left:0;
  width:100%;
  display:flex;
  flex-wrap:wrap;
  justify-content:flex-end;
  gap:clamp(.45rem, 1vw, .75rem);
  order:10;
}
#op-dictionary-action-panel.is-idle,
#dictionary-action-panel.is-idle,
#op-pickup-action-panel.is-idle,
#qa-participant-action-panel.is-idle{ opacity:.82; }
#flow-event-action-panel,
#flow-schedule-action-panel{
  position:sticky;
  bottom:0;
  display:flex;
  flex-wrap:wrap;
  align-items:center;
  justify-content:space-between;
  gap:clamp(.55rem, 1.25vw, .85rem);
  padding:clamp(.65rem, 1.4vw, .95rem) clamp(.9rem, 2vw, 1.25rem);
  border-radius:clamp(1rem, 1.9vw, 1.35rem);
  border:1px solid rgba(46,64,92,.7);
  background:linear-gradient(180deg, rgba(24,32,54,.88), rgba(13,19,32,.9));
  box-shadow:0 14px 36px rgba(0,0,0,.32);
  backdrop-filter:blur(10px);
  transition:opacity .2s ease;
  width:100%;
  max-width:100%;
  box-sizing:border-box;
}
#flow-event-action-panel[hidden],
#flow-schedule-action-panel[hidden]{ display:none !important; }
#flow-event-action-panel.is-idle,
#flow-schedule-action-panel.is-idle{ opacity:.82; }
#flow-event-action-panel .action-panel__toolbar,
#flow-schedule-action-panel .action-panel__toolbar{
  display:flex;
  align-items:center;
  gap:clamp(.5rem, 1.2vw, .75rem);
  flex-wrap:wrap;
}
#flow-event-action-panel .action-panel__meta,
#flow-schedule-action-panel .action-panel__meta{
  font-size:0.675rem;
  color:var(--muted);
  margin-left:auto;
}
#flow-event-action-panel .action-panel-right,
#flow-schedule-action-panel .action-panel-right{
  margin-left:auto;
  display:flex;
  align-items:center;
  gap:clamp(.5rem, 1.2vw, .75rem);
}
#flow-event-action-panel .action-panel-right[hidden],
#flow-schedule-action-panel .action-panel-right[hidden]{ display:none !important; }
#op-action-panel{
  flex-wrap:wrap;
  align-items:flex-start;
  gap:clamp(.55rem, 1.25vw, .85rem);
}
#op-action-panel #op-selected-info{
  flex:1 1 100%;
  order:10;
  color:var(--muted);
}
#op-action-panel .action-panel-right{
  order:15;
  width:100%;
  margin-left:0;
  display:none;
  flex-wrap:wrap;
  justify-content:flex-end;
  gap:clamp(.45rem, 1vw, .75rem);
}
#op-action-panel [data-mode="multi"]{ display:none; }
#op-action-panel[data-selection="multi"] .action-panel-right{ display:flex; }
#op-action-panel[data-selection="multi"] [data-mode="multi"]{ display:flex; }
#op-action-panel[data-selection="multi"] [data-mode="single"]{ display:none; }
#op-channel-banner{
  margin:0;
  padding:1vh 1vw;
  border:1px solid rgba(46,64,92,.7);
  border-radius:clamp(1rem, 1.9vw, 1.35rem);
  background:linear-gradient(180deg, rgba(24,32,54,.85), rgba(13,19,32,.92));
  box-shadow:0 12px 30px rgba(0,0,0,.32);
  display:flex;
  flex-direction:column;
  gap:clamp(.55rem, 1.2vw, .85rem);
  transition:opacity .2s ease;
}
#op-channel-banner[hidden]{
  display:none !important;
}
#op-channel-banner .channel-banner__heading{
  display:flex;
  flex-wrap:wrap;
  align-items:center;
  gap:.6rem;
}
#op-channel-banner .channel-banner__status{
  font-weight:600;
  font-size:clamp(0.7125rem, 0.7875rem, 0.75rem);
}
#op-channel-banner .channel-banner__status.is-alert{
  color:var(--accent-danger, #ff6b6b);
}
#op-channel-banner .channel-banner__status.is-muted{
  color:var(--muted);
  font-weight:500;
}
#op-channel-banner .channel-banner__assignment{
  display:flex;
  flex-wrap:wrap;
  gap:.35rem .75rem;
  font-size:0.675rem;
  color:var(--muted);
}
#op-channel-banner .channel-banner__assignment-value{
  font-weight:600;
  color:var(--text);
}
#op-channel-banner .channel-banner__body{
  display:flex;
  flex-direction:column;
  gap:.6rem;
}
.channel-presence-list{
  list-style:none;
  margin:0;
  padding:0;
  display:flex;
  flex-wrap:wrap;
  gap:.5rem;
}
.channel-presence-group{
  display:flex;
  flex-wrap:wrap;
  align-items:center;
  gap:.4rem .75rem;
  padding:.45rem .7rem;
  border-radius:.85rem;
  background:rgba(18,26,44,.65);
  border:1px solid rgba(63,86,124,.55);
}
.channel-presence-group.is-active{
  border-color:var(--accent, #5dd0ff);
  box-shadow:0 0 0 1px color-mix(in srgb, var(--accent, #5dd0ff) 55%, transparent);
}
.channel-presence-group__label{
  font-weight:600;
}
.channel-presence-group__names{
  display:flex;
  flex-wrap:wrap;
  gap:.35rem;
  color:var(--muted);
}
.channel-presence-group__name{
  display:flex;
  align-items:center;
  gap:.3rem;
}
.channel-presence-self{
  display:inline-flex;
  align-items:center;
  font-size:0.54rem;
  font-weight:600;
  padding:.1rem .45rem;
  border-radius:999px;
  background:rgba(93,208,255,.22);
  color:var(--accent, #5dd0ff);
}
.channel-presence-support{
  display:inline-flex;
  align-items:center;
  font-size:0.54rem;
  padding:.1rem .45rem;
  border-radius:999px;
  background:rgba(200,200,200,.18);
  color:var(--muted);
}
#op-channel-presence-empty{
  margin:0;
  font-size:0.675rem;
  color:var(--muted);
}
#op-conflict-options,
#flow-schedule-conflict-options,
#flow-schedule-fallback-options{
  margin:0;
  padding:0;
  border:0;
  display:flex;
  flex-direction:column;
  gap:.75rem;
}

#flow-schedule-fallback-summary,
#flow-schedule-fallback-current{
  color:var(--muted);
  margin-bottom:clamp(.55rem, 1.6vw, .85rem);
}

#flow-schedule-fallback-current{
  margin-top:-.35rem;
}

#flow-schedule-fallback-error{
  margin-top:.5rem;
}

.flow-consensus-toast{
  position:fixed;
  inset:auto 50% 15%;
  transform:translateX(-50%) scale(.97);
  display:flex;
  flex-direction:column;
  gap:.25rem;
  max-width:min(90vw, 30rem);
  padding:1.25rem 1.75rem;
  border-radius:1.25rem;
  background:rgba(9,16,28,.9);
  border:1px solid rgba(30,200,255,.45);
  box-shadow:0 22px 48px rgba(0,0,0,.45);
  color:var(--txt);
  font-size:0.825rem;
  font-weight:600;
  letter-spacing:.01em;
  text-align:center;
  opacity:0;
  pointer-events:none;
  transition:opacity 160ms ease, transform 160ms ease;
  z-index:1200;
}

.flow-consensus-toast__range{
  font-size:0.7125rem;
  font-weight:400;
  color:var(--muted);
}

.flow-consensus-toast__byline{
  font-size:0.6375rem;
  font-weight:400;
  color:var(--muted);
}

.flow-consensus-toast.is-visible{
  opacity:1;
  transform:translateX(-50%) scale(1);
}
.conflict-option{
  list-style:none;
  padding:.65rem .9rem;
  border:1px solid rgba(63,86,124,.55);
  border-radius:.9rem;
  background:rgba(18,26,44,.65);
  display:flex;
  flex-direction:column;
  gap:.35rem;
  cursor:pointer;
  transition:border-color .18s ease, box-shadow .18s ease, background .18s ease;
}
.conflict-option:hover,
.conflict-option:focus-within{
  border-color:rgba(93,208,255,.6);
  box-shadow:0 0 0 2px rgba(93,208,255,.18);
}
.conflict-option.is-selected{
  border-color:rgba(93,208,255,.85);
  background:rgba(24,38,68,.82);
  box-shadow:0 0 0 2px rgba(93,208,255,.32);
}
.conflict-option__header{
  display:flex;
  flex-wrap:wrap;
  gap:.5rem;
  align-items:center;
}
.conflict-option__title{
  font-weight:600;
}
.conflict-option__meta{
  font-size:0.6375rem;
  color:var(--muted);
}
.conflict-option__badge{
  display:inline-flex;
  align-items:center;
  font-size:0.54rem;
  font-weight:600;
  padding:.12rem .5rem;
  border-radius:999px;
  background:rgba(93,208,255,.22);
  color:var(--accent, #5dd0ff);
}
.conflict-option__members{
  font-size:0.675rem;
  color:var(--muted);
}
#flow-stage-panels .flow-nav-button[data-conflict-pending="true"]{
  box-shadow:0 0 0 2px rgba(93,208,255,.45);
}
#op-conflict-description,
#flow-schedule-conflict-description{
  margin-bottom:clamp(.6rem, 1.2vw, .85rem);
  color:var(--muted);
}
#op-conflict-error,
#flow-schedule-conflict-error{
  margin-top:.5rem;
}
#action-panel .btn{ padding:clamp(.45rem, 1vw, .55rem) clamp(.85rem, 2vw, 1rem); }

@media (max-width: 720px){
  :root{ --footer-gap:clamp(1rem, 2.4vh, 1.1rem); }
  #action-panel{
    width:min(calc(100% - 2*var(--page-pad-inline)), 94vw);
    flex-wrap:wrap;
    justify-content:flex-start;
  }
  #action-panel .btn{ flex:1 1 calc(50% - .75rem); }
  #action-panel #selected-info{ order:5; width:100%; }
  #op-dictionary-action-panel,
  #dictionary-action-panel,
  #op-pickup-action-panel,
  #qa-participant-action-panel{
    flex-wrap:wrap;
    justify-content:flex-start;
  }
  #op-dictionary-action-panel .btn,
  #dictionary-action-panel .btn,
  #op-pickup-action-panel .btn,
  #qa-participant-action-panel .btn{ flex:1 1 calc(50% - .75rem); }
  #op-dictionary-action-panel #op-dictionary-selected-info,
  #dictionary-action-panel #dictionary-selected-info,
  #op-pickup-action-panel #op-pickup-selected-info,
  #qa-participant-action-panel #qa-participant-action-info{ order:-1; width:100%; }
  #qa-participant-action-panel .action-panel-right{
    width:100%;
    margin-left:0;
    flex-wrap:wrap;
    justify-content:flex-start;
  }
  #qa-participant-action-panel .action-panel-right .btn{ flex:1 1 calc(50% - .75rem); }
}

/* Button accents */
.btn-warn{ background:linear-gradient(180deg, #f59e0b, #d97706); border-color:#b45309; }

/* アニメーション */
@keyframes flash-success {
    0% { background-color: #77dd77; } 100% { background-color: #d4edda; }
}
.flash { animation: flash-success 1.2s ease-out; }

/* ログテーブル */
#logs-table td { font-size: 0.5625rem; white-space: pre-wrap; word-break: break-all; }

/* ▼▼▼ トースト通知のカスタムスタイル ▼▼▼ */
.toast-stack {
  position: fixed;
  top: clamp(1rem, 2.2vw, 1.65rem);
  right: clamp(1rem, 3vw, 2rem);
  display: flex;
  flex-direction: column;
  gap: clamp(.65rem, 1.4vw, .85rem);
  width: min(24rem, calc(100vw - 2.5rem));
  z-index: 2000;
  pointer-events: none;
}

.toastify {
  display: flex;
  align-items: center;
  gap: .75rem;
  padding: clamp(.7rem, 1.6vw, .9rem) clamp(1.1rem, 2.6vw, 1.4rem);
  color: #fff;
  background: linear-gradient(135deg, #73a5ff, #5477f5);
  box-shadow: 0 3px 6px -1px rgba(0, 0, 0, 0.12), 0 10px 36px -4px rgba(77, 96, 232, 0.3);
  border-radius: .6rem;
  opacity: 0;
  transform: translateY(-12px);
  transition: opacity .28s ease, transform .32s ease;
  pointer-events: auto;
}

.toastify.on {
  opacity: 1;
  transform: translateY(0);
}

.toastify:focus-visible {
  outline: 2px solid color-mix(in srgb, rgba(0, 234, 255, 0.8) 60%, transparent);
  outline-offset: 4px;
}

.toastify__message {
  flex: 1 1 auto;
  font-weight: 500;
  line-height: 1.5;
}

.toastify__close {
  flex: 0 0 auto;
  appearance: none;
  border: none;
  background: rgba(12, 22, 38, 0.25);
  color: inherit;
  width: 2rem;
  height: 2rem;
  border-radius: 999px;
  font-size: 0.825rem;
  font-weight: 600;
  cursor: pointer;
  line-height: 1;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  transition: background-color .2s ease, transform .2s ease;
}

.toastify__close:hover,
.toastify__close:focus-visible {
  background: rgba(12, 22, 38, 0.4);
  transform: scale(1.05);
}

.toastify-success {
  background: linear-gradient(135deg, #77dd77, #4CAF50);
}

.toastify-error {
  background: linear-gradient(135deg, #ff6b6b, #f06595);
}

@media (max-width: 720px) {
  .toast-stack {
    top: auto;
    bottom: clamp(1rem, 2.6vh, 1.6rem);
    right: 50%;
    transform: translateX(50%);
    width: min(90vw, 26rem);
    align-items: stretch;
  }
  .toastify {
    transform: translateY(12px);
  }
  .toastify.on {
    transform: translateY(0);
  }
}

@media (prefers-reduced-motion: reduce) {
  .toastify {
    transition: none;
    transform: none !important;
  }
}

/* --- log stream --- */
.log-stream{
  font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
  background:linear-gradient(180deg, rgba(12,24,44,.82), rgba(8,18,32,.78));
  color:#eaeef8;
  border-radius:clamp(.85rem, 1.8vw, 1.2rem);
  padding:clamp(.85rem, 1.8vw, 1.1rem);
  min-height:16.25rem;
  height:100%;
  overflow:auto;
  border:1px solid rgba(86,134,204,.32);
  box-shadow:inset 0 1px 0 rgba(255,255,255,.03);
}
.log-line{ white-space:pre-wrap; line-height:1.5; padding:.18rem 0; border-bottom:1px solid rgba(255,255,255,.06); }
.log-line:last-child{ border-bottom:none; }
.log-line .ts{ color:#9fb3c8; margin-right:.5rem; }
.badge{ display:inline-block; padding:0 0.3rem; border-radius:749.25px; font-size:0.5625rem; margin-right:0.3rem; background:#334155; color:#cde; }
.badge.user{ background:#243a5a; }
.badge.action{ background:#3b4252; }
.badge.action.display{ background:#2563eb; }
.badge.action.clear{ background:#ef4444; }
.badge.action.edit{ background:#10b981; }
.badge.action.answer{ background:#f59e0b; }
.details{ color:#eaeef8; }

/* --- log levels --- */
.badge.level{ background:#334155; color:#cde; }
.badge.level.info{ background:#3b4252; }
.badge.level.success{ background:#155e75; }  /* teal系 */
.badge.level.warn{ background:#7c3aed; }     /* purple系（見やすさ重視） */
.badge.level.error{ background:#991b1b; }    /* red系 */
.badge.level.debug{ background:#475569; }

.log-line.lvl-info{    border-left:3px solid #64748b; }
.log-line.lvl-success{ border-left:3px solid #14b8a6; }
.log-line.lvl-warn{    border-left:3px solid #a78bfa; }
.log-line.lvl-error{   border-left:3px solid #ef4444; background:rgba(239,68,68,.05); }
.log-line.lvl-debug{   border-left:3px solid #94a3b8; opacity:.95; }
.btn-icon{
  padding:clamp(.55rem, 1.2vw, .68rem) clamp(.7rem, 1.6vw, .85rem);
  border-radius:clamp(.75rem, 1.4vw, .95rem);
  min-width:0;
  aspect-ratio:auto;
}
.btn-icon .btn-label{ font-size:0.6375rem; }
.btn-icon svg{ width:1.1rem; height:1.1rem; fill:currentColor; }
.btn-icon .btn-label{ display:none; }
.btn-icon .icon{ display:inline-flex; align-items:center; justify-content:center; }
@media (min-width: 960px){
  .btn-icon .btn-label{ display:inline; }
}
.btn-icon[aria-expanded="true"],
.btn-icon:focus-visible{
  border-color:rgba(30,200,255,.8);
}
.btn-icon[aria-expanded="true"]{
  background:linear-gradient(180deg, rgba(30,200,255,.3), rgba(20,140,220,.2));
  box-shadow:0 12px 28px rgba(30,200,255,.25);
}
.btn-sm{
  padding:clamp(.35rem, .8vw, .45rem) clamp(.65rem, 1.4vw, .8rem);
  font-size:0.7rem;
  border-radius:clamp(.6rem, 1vw, .7rem);
  gap:clamp(.25rem, .6vw, .4rem);
}

/* キーボードショートカット表示のスタイル */
.btn kbd,
.module-description kbd,
.chat-form__shortcut kbd,
.side-telop-panel__description kbd,
.sidebar-card__title kbd,
.sidebar-nav__button kbd,
label kbd{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  min-width:1.4em;
  height:1.4em;
  padding:0 .3em;
  margin:0 .15em;
  font-family:ui-monospace, "SF Mono", "Monaco", "Cascadia Code", "Roboto Mono", "Consolas", monospace;
  font-size:0.75em;
  font-weight:600;
  line-height:1;
  color:rgba(230,238,247,.9);
  background:rgba(255,255,255,.08);
  border:1px solid rgba(255,255,255,.15);
  border-radius:.35em;
  box-shadow:0 1px 2px rgba(0,0,0,.2), inset 0 1px 0 rgba(255,255,255,.1);
  vertical-align:middle;
  letter-spacing:0;
}

/* 長いキー名（Enter, Esc, Deleteなど）は自動的に幅が調整される */
.btn kbd:first-child{
  margin-left:0;
}

.btn-primary kbd{
  background:rgba(255,255,255,.12);
  border-color:rgba(255,255,255,.2);
  color:rgba(255,255,255,.95);
}

.btn:hover kbd,
.btn:focus-visible kbd{
  background:rgba(255,255,255,.15);
  border-color:rgba(255,255,255,.25);
  box-shadow:0 2px 4px rgba(0,0,0,.25), inset 0 1px 0 rgba(255,255,255,.15);
}

.btn-primary:hover kbd,
.btn-primary:focus-visible kbd{
  background:rgba(255,255,255,.18);
  border-color:rgba(255,255,255,.3);
}

/* キーボードショートカットの区切り文字 */
.kbd-separator{
  display:inline-block;
  margin:0 .2em;
  color:rgba(230,238,247,.5);
  font-size:0.7em;
  vertical-align:middle;
}

/* 説明文内のキーボードショートカット */
.module-description kbd{
  margin-left:0;
  margin-right:0;
}

.chat-form__shortcut{
  font-size:0.65rem;
  color:rgba(230,238,247,.6);
  margin:0.5rem 0 0;
}

.chat-form__shortcut kbd{
  margin-left:0;
}

/* サイドバーとサイドテロップパネルの説明文内のキーボードショートカット */
.side-telop-panel__description kbd,
.sidebar-card__title kbd,
.sidebar-nav__button kbd,
label kbd{
  margin-left:0;
  margin-right:0;
}

.sidebar-card__title kbd,
.sidebar-nav__button kbd{
  margin-left:.25em;
}

.site-footer{
  position:fixed;
  left:50%;
  bottom:var(--footer-gap);
  transform:translateX(-50%);
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  padding:0;
  background:none;
  border:none;
  box-shadow:none;
  color:rgba(173,189,208,.65);
  font-size:clamp(0.51rem, 0.675vw, 0.585rem);
  letter-spacing:.03em;
  text-align:center;
}
.credit-highlight{ color:rgba(173,189,208,.75); font-weight:500; }

/* ===== Modal Dialog ===== */
.modal{
  position:fixed;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:200;
}

.modal[hidden]{
  display:none;
}

.modal-backdrop{
  position:absolute;
  inset:0;
  background:rgba(5,11,23,.72);
  backdrop-filter:blur(6px);
}

.modal-panel{
  position:relative;
  z-index:1;
  width:min(32rem, 92vw);
  max-height:88vh;
  padding:clamp(1.4rem, 3vw, 1.8rem);
  border-radius:clamp(1rem, 1.6vw, 1.2rem);
  background:linear-gradient(180deg, rgba(18,26,42,.96), rgba(10,16,28,.94));
  border:1px solid rgba(58,86,126,.6);
  box-shadow:0 32px 60px rgba(0,0,0,.4);
  display:flex;
  flex-direction:column;
  gap:1.1rem;
  overflow:auto;
}
.modal-panel--print{
  width:min(90rem, 96vw);
  max-height:90vh;
}
.modal--fullscreen{
  align-items:stretch;
  justify-content:stretch;
}
.modal--fullscreen .modal-panel{
  width:100%;
  max-width:none;
  height:100%;
  max-height:none;
  border-radius:0;
  margin:0;
}
.modal-panel--fullscreen{
  padding:clamp(1rem, 2.4vw, 1.6rem);
}
.modal-panel--fullscreen.modal-panel--print{
  padding:clamp(1.1rem, 2.8vw, 1.8rem);
}

.modal--inline{
  position:absolute;
}

.modal--inline .modal-backdrop{
  background:rgba(5,11,23,.6);
  backdrop-filter:blur(4px);
}

.modal-panel form{
  display:flex;
  flex-direction:column;
  gap:1.1rem;
}

.modal-header h2,
.modal-header h3{
  margin:0;
  font-size:0.9375rem;
  letter-spacing:.02em;
}
.print-modal__header{
  display:flex;
  align-items:flex-start;
  justify-content:space-between;
  flex-wrap:wrap;
  gap:clamp(.75rem, 1.6vw, 1.2rem);
}
.print-modal__headline{ display:flex; flex-direction:column; gap:.2rem; }
.print-modal__headline .print-preview__meta{ margin:0; }
.print-modal__body{ display:flex; flex-direction:column; gap:clamp(.7rem, 1.1vw, .9rem); padding:0; flex:1 1 auto; min-height:0; }

.modal-body{
  display:flex;
  flex-direction:column;
  gap:.9rem;
}

#qa-confirm-dialog-message{
  white-space:pre-line;
}

.modal-footer{
  display:flex;
  justify-content:flex-end;
  gap:.75rem;
}

.modal-field{
  display:flex;
  flex-direction:column;
  gap:.45rem;
}

.modal-field label{
  font-size:0.75rem;
  color:var(--muted);
}

.modal-label{
  font-size:0.75rem;
  color:var(--muted);
  font-weight:600;
}

.form-error{
  margin:0;
  padding:.5rem .75rem;
  border-radius:.75rem;
  background:rgba(220,38,38,.1);
  border:1px solid rgba(248,113,113,.4);
  color:#fca5a5;
  font-size:0.6375rem;
}

.modal-helper{
  font-size:0.85rem;
  color:var(--muted);
  margin:0;
}

.relocation-list{
  list-style:none;
  margin:0;
  padding:0;
  display:flex;
  flex-direction:column;
  gap:1rem;
}

.relocation-item{
  display:flex;
  flex-direction:column;
  gap:.75rem;
  padding:1rem;
  border-radius:.9rem;
  border:1px solid rgba(72,96,132,.45);
  background:linear-gradient(180deg, rgba(24,34,52,.95), rgba(16,24,38,.92));
}

.relocation-item__header{
  display:flex;
  flex-direction:column;
  gap:.25rem;
}

.relocation-item__name{
  font-size:0.75rem;
  font-weight:600;
  color:#f4f9ff;
}

.relocation-item__meta{
  font-size:0.6375rem;
  color:var(--muted);
}

.relocation-item__body{
  display:grid;
  gap:.65rem;
  grid-template-columns:repeat(auto-fit, minmax(14rem, 1fr));
}

.relocation-item__field{
  display:flex;
  flex-direction:column;
  gap:.4rem;
  font-size:0.6375rem;
  color:var(--muted);
}

.relocation-item__field .input{
  min-height:2.5rem;
}

.relocation-item__note{
  margin:0;
  font-size:0.6rem;
  color:var(--muted);
}

.modal-calendar-field{
  padding:1rem;
  border:1px solid rgba(62,92,128,.4);
  border-radius:.9rem;
  background:linear-gradient(180deg, rgba(17,24,38,.9), rgba(12,18,30,.88));
}

.dialog-calendar{
  display:flex;
  flex-direction:column;
  gap:.6rem;
}

.dialog-calendar-header{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:.5rem;
}

.dialog-calendar-title{
  flex:1 1 auto;
  text-align:center;
  font-weight:600;
  letter-spacing:.04em;
}

.dialog-calendar-nav{
  flex:0 0 auto;
  width:2.2rem;
  height:2.2rem;
  display:grid;
  place-items:center;
  border-radius:999px;
  border:1px solid rgba(72,102,140,.6);
  background:linear-gradient(180deg, rgba(24,36,54,.95), rgba(16,24,38,.9));
  color:inherit;
  font-size:0.975rem;
  cursor:pointer;
  transition:background .18s ease, border-color .18s ease, transform .18s ease;
}

.dialog-calendar-nav:hover:not(:disabled){
  border-color:rgba(30,200,255,.6);
  background:linear-gradient(180deg, rgba(32,52,78,.95), rgba(20,32,50,.9));
  transform:translateY(-1px);
}

.dialog-calendar-nav:active:not(:disabled){
  transform:translateY(0);
}

.dialog-calendar-nav:disabled{
  opacity:.35;
  cursor:not-allowed;
}

.dialog-calendar-weekdays{
  display:grid;
  grid-template-columns:repeat(7, minmax(2.5rem, 1fr));
  gap:.35rem;
  font-size:0.585rem;
  color:var(--muted);
  text-align:center;
}

.dialog-calendar-grid{
  display:grid;
  grid-template-columns:repeat(7, minmax(2.5rem, 1fr));
  gap:.35rem;
}

.dialog-calendar-date{
  position:relative;
  display:flex;
  align-items:flex-start;
  justify-content:flex-end;
  min-height:3.1rem;
  padding:.5rem .3rem;
  border-radius:.75rem;
  border:1px solid rgba(58,84,120,.5);
  background:rgba(12,18,30,.85);
  color:inherit;
  font:inherit;
  text-align:right;
  cursor:pointer;
  transition:background .18s ease, border-color .18s ease, color .18s ease, transform .18s ease;
}

.dialog-calendar-date span{
  display:inline-block;
  font-size:0.9rem;
  font-weight:600;
  letter-spacing:.05em;
}

.dialog-calendar-date:hover,
.dialog-calendar-date:focus-visible{
  border-color:rgba(30,200,255,.6);
  background:rgba(30,200,255,.14);
  color:var(--accent);
  outline:none;
  transform:translateY(-1px);
}

.dialog-calendar-date:focus-visible{
  box-shadow:0 0 0 2px rgba(30,200,255,.45);
}

.dialog-calendar-date.is-outside{
  background:rgba(10,16,26,.6);
  color:rgba(160,180,204,.7);
}

.dialog-calendar-date.is-today{
  border-color:rgba(30,200,255,.75);
  box-shadow:0 0 0 1px rgba(30,200,255,.35) inset;
}

.dialog-calendar-date.is-selected{
  border-color:rgba(255,79,216,.7);
  background:rgba(255,79,216,.24);
  color:#fce7ff;
  box-shadow:0 0 0 1px rgba(255,79,216,.25) inset;
}

.dialog-calendar-grid button{
  font:inherit;
}

@media (max-width: 560px){
  .modal-calendar-field{
    padding:.85rem;
  }
  .dialog-calendar-weekdays,
  .dialog-calendar-grid{
    gap:.25rem;
  }
  .dialog-calendar-date{
    padding:.45rem .2rem;
    border-radius:.65rem;
    min-height:2.6rem;
  }
}

/* ===== Hub Styles ===== */
.events-page .hub-body{
  display:flex;
  flex-direction:column;
  gap:clamp(1rem, 2.4vw, 1.5rem);
}

.hub-loading{
  display:inline-flex;
  align-items:center;
  gap:.85rem;
  padding:clamp(.65rem, 1.4vw, .9rem) clamp(.9rem, 2.4vw, 1.35rem);
  border-radius:clamp(.85rem, 2vw, 1.15rem);
  background:linear-gradient(175deg, rgba(20,30,52,.68), rgba(8,16,34,.72));
  border:1px solid rgba(76,122,196,.4);
  box-shadow:0 18px 40px rgba(4,10,24,.35), inset 0 1px 0 rgba(255,255,255,.06);
  color:#d6e4ff;
  font-weight:500;
  letter-spacing:.02em;
  backdrop-filter:blur(14px);
}
.hub-loading .spinner{
  width:1.55rem;
  height:1.55rem;
  margin:0;
  border-width:.18rem;
}

.hub-loading[hidden]{
  display:none !important;
}

.hub-alert{
  margin-top:.5rem;
  padding:clamp(.85rem, 1.8vw, 1.2rem);
  border-radius:clamp(.75rem, 1.4vw, 1rem);
  border:1px solid rgba(255,107,107,.55);
  background:rgba(255,107,107,.12);
  color:#ffeaea;
}

.hub-summary{
  display:flex;
  flex-direction:column;
  gap:clamp(.9rem, 1.9vw, 1.4rem);
}

.hub-meta-grid{
  display:grid;
  gap:clamp(.75rem, 1.6vw, 1.2rem);
}

.hub-meta-row{
  display:grid;
  grid-template-columns:minmax(6rem, max-content) 1fr;
  gap:clamp(.4rem, .95vw, .7rem);
  align-items:baseline;
}

.hub-meta-label{
  font-size:0.5625rem;
  letter-spacing:.08em;
  text-transform:uppercase;
  color:var(--muted);
}

.hub-meta-value{
  font-size:clamp(0.75rem, 1.425vw, 1.0125rem);
  font-weight:600;
}

.hub-meta-stack{
  display:flex;
  flex-direction:column;
  gap:.35rem;
}

.hub-meta-sub{
  font-size:clamp(0.615rem, 0.825vw, 0.7125rem);
  color:var(--muted);
}

.hub-actions{
  display:grid;
  gap:clamp(1.1rem, 2.4vw, 1.6rem);
  grid-template-columns:repeat(auto-fit, minmax(18rem, 1fr));
}

.hub-card{
  display:flex;
  flex-direction:column;
  gap:clamp(.65rem, 1.4vw, .9rem);
  padding:clamp(1.15rem, 2.5vw, 1.8rem);
  border-radius:clamp(1rem, 2vw, 1.35rem);
  border:1px solid rgba(70,94,128,.6);
  background:linear-gradient(180deg, rgba(20,28,46,.92), rgba(12,18,32,.9));
  text-decoration:none;
  color:inherit;
  box-shadow:0 18px 36px rgba(0,0,0,.32), inset 0 1px 0 rgba(255,255,255,.04);
  transition:transform .18s ease, box-shadow .18s ease, border-color .18s ease;
}

.hub-card:hover{
  transform:translateY(-2px);
  border-color:rgba(30,200,255,.6);
  box-shadow:0 24px 46px rgba(0,0,0,.42);
}

.hub-card:focus-visible{
  outline:2px solid var(--accent);
  outline-offset:4px;
}

.hub-card__title{
  margin:0;
  font-size:clamp(0.7875rem, 1.5vw, 1.05rem);
  font-weight:600;
}

.hub-card__desc{
  margin:0;
  color:var(--muted);
  font-size:clamp(0.63rem, 0.825vw, 0.735rem);
  line-height:1.6;
  flex:1 1 auto;
}

.hub-card__cta{
  margin:0;
  font-weight:600;
  color:var(--accent);
  display:inline-flex;
  align-items:center;
  gap:.35rem;
  font-size:0.7125rem;
}

.hub-meta-note{
  font-size:clamp(0.54rem, 0.7125vw, 0.6375rem);
  color:var(--muted);
}

.event-card-list{
  list-style:none;
  margin:0;
  padding:0;
  display:grid;
  gap:clamp(1rem, 2.2vw, 1.5rem);
  grid-template-columns:repeat(auto-fit, minmax(18rem, 1fr));
}

.event-card{
  display:flex;
  flex-direction:column;
  gap:.75rem;
  padding:clamp(1.1rem, 2.4vw, 1.7rem);
  border-radius:clamp(1rem, 2vw, 1.35rem);
  border:1px solid rgba(70,94,128,.55);
  background:linear-gradient(180deg, rgba(19,27,43,.95), rgba(10,16,28,.9));
  box-shadow:0 18px 36px rgba(0,0,0,.28), inset 0 1px 0 rgba(255,255,255,.04);
  transition:transform .18s ease, box-shadow .18s ease, border-color .18s ease;
}

.event-card:hover{
  transform:translateY(-2px);
  border-color:rgba(30,200,255,.6);
  box-shadow:0 26px 48px rgba(0,0,0,.4);
}

.event-card__title{
  margin:0;
  font-size:clamp(0.7875rem, 1.425vw, 1.05rem);
  font-weight:600;
}

.event-card__meta,
.event-card__preview{
  margin:0;
  color:var(--muted);
  font-size:clamp(0.63rem, 0.7875vw, 0.72rem);
}

.event-card__actions{
  margin-top:auto;
  display:flex;
  flex-wrap:wrap;
  gap:.6rem;
}

.schedule-card-list{
  display:grid;
  gap:clamp(1rem, 2.2vw, 1.6rem);
  grid-template-columns:repeat(auto-fit, minmax(20rem, 1fr));
}

.schedule-card{
  display:flex;
  flex-direction:column;
  gap:.75rem;
  padding:clamp(1.05rem, 2.3vw, 1.6rem);
  border-radius:clamp(1rem, 2vw, 1.35rem);
  border:1px solid rgba(66,90,124,.55);
  background:linear-gradient(180deg, rgba(18,26,42,.94), rgba(9,15,26,.9));
  box-shadow:0 16px 32px rgba(0,0,0,.27), inset 0 1px 0 rgba(255,255,255,.04);
  transition:transform .18s ease, box-shadow .18s ease, border-color .18s ease;
}

.schedule-card:hover{
  transform:translateY(-2px);
  border-color:rgba(30,200,255,.6);
  box-shadow:0 24px 46px rgba(0,0,0,.38);
}

.schedule-card__title{
  margin:0;
  font-size:clamp(0.75rem, 1.35vw, 0.975rem);
  font-weight:600;
}

.schedule-card__meta{
  margin:0;
  color:var(--muted);
  font-size:clamp(0.615rem, 0.7875vw, 0.7125rem);
  line-height:1.6;
}

.schedule-card__actions{
  margin-top:auto;
  display:flex;
  flex-wrap:wrap;
  gap:.6rem;
}

.section-focus-highlight{
  animation:sectionFocusPulse 1.6s ease-out;
}

@keyframes sectionFocusPulse{
  from{ box-shadow:0 0 0 0 rgba(30,200,255,.45); }
  to{ box-shadow:0 0 0 24px rgba(30,200,255,0); }
}

/* --- Event control flow layout --- */
.flow-main{
  gap: 1vh;
  display:flex;
  flex-direction:column;
  flex:1 1 auto;
  min-height:0;
  padding-bottom:2rem;
}

.flow-progress{
  display:flex;
  gap:.3rem;
  align-items:center;
  justify-content:center;
  flex-wrap:wrap;
  list-style:none;
  margin:0 auto;
  padding:0;
}

.flow-progress__item{
  display:flex;
  align-items:center;
  gap:.35rem;
  padding:.18rem .5rem .18rem .18rem;
  border-radius:999px;
  background:rgba(15,26,43,.6);
  color:var(--muted);
  border:1px solid rgba(72,107,146,.4);
  transition:background .25s ease, color .25s ease, border-color .25s ease, transform .25s ease;
}

.flow-progress__item.is-active{
  background:rgba(0,116,199,.22);
  color:#e8f4ff;
  border-color:rgba(0,155,255,.7);
  transform:translateY(-2px);
}

.flow-progress__item.is-complete{
  background:rgba(22,166,114,.2);
  color:#ddffef;
  border-color:rgba(54,198,149,.6);
}


.flow-progress__step{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  width:1.35rem;
  height:1.35rem;
  border-radius:50%;
  background:rgba(255,255,255,.08);
  font-weight:600;
  font-size:0.6rem;
}

.flow-progress__label{
  font-weight:500;
  font-size:0.6375rem;
}

.flow-stage__header{
  display:flex;
  align-items:center;
  justify-content:space-between;
  flex-wrap:wrap;
  gap:1rem;
}

.flow-stage__title{
  margin:0;
  font-size:clamp(1.05rem, 1.95vw, 1.425rem);
  font-weight:700;
  flex:1 1 auto;
  min-width:0;
}

.flow-stage__header .flow-progress{
  flex:0 0 auto;
}

.flow-stage__description{
  margin:.25rem 0 0;
  color:var(--muted);
  max-width:48ch;
}

.flow-panels{
  display:flex;
  flex-direction:column;
  gap:1.5rem;
  width:100%;
}

.flow-panels>[data-panel]{
  display:none;
}

.flow-panels>[data-panel].is-active{
  display:flex;
}

.flow-panels>[data-panel].is-active.flow-tool-panel:not(.module){
  display:block;
}

.flow-navigation{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:.75rem;
  margin:0;
  flex-wrap:wrap;
}

.flow-navigation--panel{
  margin-top:1.25rem;
}

.flow-stage-panel{
  width:min(100%, var(--flow-stage-panel-width));
  max-width:var(--flow-stage-panel-width);
  margin-inline:auto;
  padding:var(--flow-stage-panel-padding);
  border-radius:var(--flow-stage-panel-radius);
  border:1px solid var(--flow-stage-panel-border);
  background:var(--flow-stage-panel-background);
  box-shadow:var(--flow-stage-panel-shadow);
  backdrop-filter:blur(18px);
  display:flex;
  flex-direction:column;
  gap:var(--flow-stage-panel-padding);
  min-width:0;
}

.flow-stage-panel.flow-tool-panel{
  display:flex;
}

.flow-tool-panel--popup{
  position:fixed;
  inset:0;
  min-height:100vh;
  z-index:1200;
  display:none;
  align-items:center;
  justify-content:center;
  padding:clamp(1.5rem, 4vw, 3rem);
  background:rgba(4,12,24,.78);
  backdrop-filter:blur(18px);
}

.flow-tool-panel--popup.is-active{
  display:flex;
}

.flow-tool-panel--popup[hidden]{
  display:none !important;
}

.flow-tool-panel__backdrop{
  position:absolute;
  inset:0;
  pointer-events:none;
}

.flow-tool-panel__surface{
  position:relative;
  z-index:1;
  width:min(960px, 94vw);
  max-height:90vh;
  overflow:hidden;
  display:flex;
  flex-direction:column;
}

.flow-tool-panel__surface .module-body{
  display:flex;
  flex-direction:column;
  gap:clamp(.75rem, 1.4vw, 1.1rem);
  overflow:hidden;
}

.flow-tool-panel__surface .cards-scroll{
  flex:1 1 auto;
  max-height:clamp(320px, 60vh, 540px);
  overflow:auto;
}

.flow-nav-button--next{
  margin-left:auto;
}

.events-mobile-controls{
  display:none;
  gap:.75rem;
}

.events-mobile-button{
  position:relative;
  font-size:0.7125rem;
  letter-spacing:.01em;
}

.events-mobile-button__icon{
  width:1.15rem;
  height:1.15rem;
  fill:currentColor;
}

.events-mobile-button__label{
  line-height:1;
}

.events-mobile-button__badge{
  position:absolute;
  top:-.45rem;
  right:-.5rem;
  min-width:1.5rem;
  height:1.5rem;
  padding:0 .45rem;
  border-radius:999px;
  background:linear-gradient(145deg, rgba(252,96,120,.95), rgba(224,40,96,.92));
  color:#fff;
  font-weight:700;
  font-size:0.5625rem;
  display:none;
  align-items:center;
  justify-content:center;
  letter-spacing:.02em;
  line-height:1;
  box-shadow:0 14px 28px rgba(6,14,28,.45), 0 0 0 2px rgba(6,14,28,.65);
}

.events-mobile-button[data-has-updates="true"]{
  color:#f7fbff;
  background:rgba(56,104,196,.24);
  box-shadow:0 14px 34px rgba(8,22,44,.4);
}

.events-mobile-button[data-has-updates="true"] .events-mobile-button__icon{
  color:inherit;
}

.events-mobile-button[data-has-updates="true"] .events-mobile-button__badge{
  display:inline-flex;
}

.events-mobile-close{
  display:none;
  width:2.25rem;
  height:2.25rem;
  border-radius:999px;
  border:1px solid rgba(80,120,176,.55);
  background:rgba(10,22,38,.82);
  color:#f5f8ff;
  cursor:pointer;
  transition:transform .18s ease, box-shadow .2s ease, border-color .18s ease;
}

.events-mobile-close:hover,
.events-mobile-close:focus-visible{
  border-color:rgba(120,182,255,.7);
  box-shadow:0 12px 26px rgba(8,24,46,.45);
}

.events-mobile-close:focus-visible{
  outline:2px solid rgba(0,155,255,.75);
  outline-offset:2px;
}

.events-mobile-close__icon{
  width:1.05rem;
  height:1.05rem;
  fill:currentColor;
}

.events-mobile-overlay{
  position:fixed;
  inset:0;
  display:none;
  z-index:120;
}

.events-mobile-overlay__backdrop{
  position:absolute;
  inset:0;
  background:rgba(6,14,28,.66);
  backdrop-filter:blur(3px);
}

.events-mobile-overlay:not([hidden]){
  display:block;
}

/* イベント管理メインレイアウト: サイドバー/コンテンツ/チャットの3カラムを制御 */
.events-layout{
  --events-layout-padding: clamp(1.25rem, 2.4vw, 2rem);
  --events-sticky-top: calc(var(--page-padding-top, 0px) + var(--safe-area-top, 0px) + var(--header-height, 64px) + var(--page-gap, 0px) + 1.5rem);
  display:grid;
  gap: 1vw;
  grid-template-columns:minmax(190px, 15vw) minmax(0, 1fr) clamp(260px, 22vw, 340px);
  align-items:stretch;
  width:min(100%, 96vw);
  margin-inline:auto;
  padding:var(--events-layout-padding);
  border-radius:1.4rem;
  border:1px solid rgba(70,108,156,.42);
  background:linear-gradient(145deg, rgba(8,20,36,.88), rgba(6,14,28,.78));
  box-shadow:0 32px 82px rgba(4,12,28,.46);
  backdrop-filter:blur(18px);
  min-height:0;
}

body.events-page .events-layout{
  flex:1 1 auto;
  height:100%;
}

body.events-page .events-sidebar{
  align-self:start;
}

body.events-page .flow-panels{
  flex:1 1 auto;
  min-height:0;
  height:100%;
}

body.events-page .flow-panels>[data-panel].is-active{
  flex:1 1 auto;
  min-height:0;
}

body.events-page .flow-stage-panel{
  height:100%;
  min-height:0;
}

/* チャットパネル: モバイル/デスクトップ両対応の固定高さを提供 */
.events-chat{
  display:flex;
  flex-direction:column;
  gap:1vh;
  align-self:start;
  min-width:0;
  position:sticky;
  top:var(--events-chat-top, var(--events-sticky-top));
  height:var(--events-chat-height, auto);
  max-height:var(--events-chat-height, none);
}

.chat-panel{
  display:flex;
  flex-direction:column;
  gap:clamp(.85rem, 1.6vw, 1.2rem);
  padding:1rem 1rem;
  border-radius:clamp(.95rem, 1.8vw, 1.4rem);
  border:1px solid rgba(74,116,178,.55);
  background:linear-gradient(180deg, rgba(16,30,52,.92), rgba(10,20,38,.88));
  box-shadow:0 20px 48px rgba(4,12,28,.38), inset 0 1px 0 rgba(255,255,255,.04);
  min-height:0;
  flex:1 1 auto;
  height:100%;
  position:relative;
}

.chat-panel__header{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:clamp(.5rem, 1vw, .85rem);
}

.chat-panel__heading{
  display:flex;
  align-items:baseline;
  gap:.65rem;
  flex-wrap:wrap;
}

.chat-attention{
  display:inline-flex;
  align-items:center;
  gap:.45rem;
  padding:.35rem .75rem;
  border-radius:999px;
  background:linear-gradient(145deg, rgba(252,96,120,.28), rgba(216,64,128,.22));
  color:#ffe6ef;
  font-size:0.615rem;
  font-weight:600;
  letter-spacing:.02em;
  box-shadow:0 18px 36px rgba(248,72,128,.28), 0 0 0 1px rgba(252,120,168,.5);
}

.chat-attention__label{
  text-transform:none;
}

.chat-attention__count{
  font-size:0.675rem;
  font-weight:700;
  letter-spacing:.01em;
}

.chat-attention[hidden]{
  display:none;
}

.chat-panel__header h2{
  margin:0;
  font-size:0.7875rem;
  font-weight:700;
}

.chat-status{
  font-size:0.585rem;
  color:var(--muted);
}

.chat-panel__body{
  display:flex;
  flex-direction:column;
  gap:.75rem;
  min-height:0;
  flex:1 1 auto;
}

.chat-scroll{
  position:relative;
  min-height:0;
  flex:1 1 auto;
  height:100%;
  overflow:auto;
}

.chat-scroll:focus-visible{
  outline:2px solid rgba(72,132,220,.6);
  outline-offset:2px;
}

.events-chat[data-has-updates] .chat-panel{
  border-color:rgba(252,128,168,.78);
  box-shadow:0 28px 72px rgba(248,68,132,.26), inset 0 1px 0 rgba(255,255,255,.08);
}

.events-chat[data-has-updates] .chat-panel::after{
  content:"";
  position:absolute;
  inset:-1px;
  border-radius:inherit;
  border:1px solid rgba(252,148,184,.58);
  pointer-events:none;
  box-shadow:0 0 22px rgba(252,120,170,.45);
}


.chat-messages{
  display:flex;
  flex-direction:column;
  gap:.95rem;
  padding-inline:0.35rem;
}

.chat-info{
  position:relative;
  display:flex;
  align-items:center;
  gap:.75rem;
  color:rgba(194,214,244,.75);
  font-size:0.585rem;
  letter-spacing:.02em;
  text-align:center;
}

.chat-info::before,
.chat-info::after{
  content:"";
  flex:1 1 auto;
  border-top:1px solid rgba(110,140,190,.35);
  opacity:.85;
}

.chat-info time{
  flex:0 0 auto;
  padding:.35rem .85rem;
  border-radius:999px;
  border:1px solid rgba(110,150,210,.35);
  background:rgba(14,28,46,.65);
  font-variant-numeric:tabular-nums;
  white-space:nowrap;
}

.chat-empty{
  margin:0 0 1rem;
  padding:.85rem 1rem;
  border-radius:.9rem;
  border:1px dashed rgba(120,160,220,.45);
  background:rgba(14,28,46,.6);
  color:rgba(214,230,255,.8);
  font-size:0.675rem;
}

.chat-message{
  position:relative;
  display:flex;
  flex-direction:column;
  gap:.35rem;
  align-items:flex-start;
  align-self:flex-start;
  max-width:100%;
  color:#f0f6ff;
  isolation:isolate;
}

.chat-message--self{
  align-items:flex-end;
  align-self:flex-end;
}

.chat-message__author{
  display:block;
  font-weight:600;
  font-size:0.615rem;
  color:#f8fbff;
}

.chat-message--self .chat-message__author{
  text-align:right;
  align-self:flex-end;
}

.chat-message__bubble-wrap{
  display:flex;
  align-items:flex-end;
  gap:.55rem;
  min-width:0;
}

.chat-message--self .chat-message__bubble-wrap{
  flex-direction:row-reverse;
}

.chat-message__bubble{
  position:relative;
  flex:1 1 auto;
  min-width:0;
  padding:.5rem .5rem .5rem;
  border-radius:1rem 1rem 1rem .35rem;
  border:1px solid var(--bubble-border, rgba(86,132,194,.45));
  background:var(--bubble-bg, linear-gradient(180deg, rgba(18,34,58,.82), rgba(8,18,32,.78)));
  box-shadow:0 16px 36px rgba(4,12,28,.32), inset 0 1px 0 rgba(255,255,255,.03);
  isolation:isolate;
  max-width:min(480px, 85%);
  overflow:hidden;
}

.chat-message--self .chat-message__bubble{
  --bubble-border: rgba(90,172,255,.55);
  --bubble-bg: linear-gradient(180deg, rgba(30,70,118,.88), rgba(16,32,60,.82));
  border-radius:1rem .35rem 1rem 1rem;
  box-shadow:0 18px 40px rgba(8,24,52,.42);
}

.chat-message__time{
  flex:0 0 auto;
  font-size:0.585rem;
  font-variant-numeric:tabular-nums;
  color:rgba(188,210,242,.75);
  white-space:nowrap;
}

.chat-message--self .chat-message__time{
  color:rgba(210,228,255,.75);
  text-align:right;
}

.chat-message__body{
  margin:0;
  white-space:pre-wrap;
  word-break:break-word;
  line-height:1.6;
}

.chat-message__quote{
  margin:0 0 .65rem;
  padding:.6rem .75rem;
  border-radius:.75rem;
  border-left:3px solid rgba(90,140,210,.45);
  background:rgba(12,24,44,.72);
  display:flex;
  flex-direction:column;
  gap:.25rem;
}

.chat-message--self .chat-message__quote{
  border-left-color:rgba(110,170,255,.55);
  background:rgba(24,48,84,.72);
}

.chat-message__quote-author{
  font-size:0.585rem;
  font-weight:600;
  color:rgba(220,236,255,.85);
}

.chat-message__quote-text{
  margin:0;
  font-size:0.615rem;
  line-height:1.5;
  color:rgba(206,222,248,.88);
  white-space:pre-wrap;
  word-break:break-word;
}

.chat-message--menu-open .chat-message__bubble{
  box-shadow:0 0 0 2px rgba(104,168,255,.5), 0 18px 40px rgba(8,24,52,.42);
}

.chat-context[hidden]{
  display:none;
}

.chat-context{
  position:absolute;
  min-width:180px;
  padding:.35rem;
  border-radius:.75rem;
  border:1px solid rgba(90,140,210,.55);
  background:rgba(8,20,38,.95);
  box-shadow:0 16px 36px rgba(4,12,28,.5);
  display:flex;
  flex-direction:column;
  gap:.25rem;
  z-index:20;
}

.chat-context__item{
  width:100%;
  padding:.55rem .75rem;
  border-radius:.6rem;
  border:0;
  background:transparent;
  color:#eaf4ff;
  font:inherit;
  text-align:left;
  cursor:pointer;
  transition:background-color .16s ease, color .16s ease;
}

.chat-context__item:hover,
.chat-context__item:focus-visible{
  background:rgba(82,132,210,.28);
  outline:none;
}

.chat-context__item[disabled]{
  opacity:.45;
  cursor:default;
  pointer-events:none;
}

@media (max-width: 720px){
  .chat-message__bubble{
    max-width:calc(100% - 1.25rem);
  }
  .chat-composer{
    flex-direction:column;
    align-items:stretch;
    gap:.75rem;
  }
  .chat-composer__input{
    width:100%;
  }
  .chat-composer__submit{
    width:100%;
  }
}

.chat-unread{
  align-self:center;
  padding:.45rem .9rem;
  border-radius:999px;
  border:1px solid rgba(90,172,255,.6);
  background:rgba(18,40,72,.85);
  color:#ecf6ff;
  font-size:0.6375rem;
  cursor:pointer;
  transition:transform .2s ease, box-shadow .2s ease;
}

.chat-unread:hover{
  transform:translateY(-1px);
  box-shadow:0 14px 30px rgba(8,20,40,.35);
}

.chat-unread:focus-visible{
  outline:2px solid rgba(120,176,240,.9);
  outline-offset:2px;
}

.chat-form{
  display:flex;
  flex-direction:column;
  gap:.75rem;
}

.chat-form.is-disabled{
  opacity:.65;
}

.chat-composer{
  display:flex;
  gap:.85rem;
  align-items:flex-end;
  padding:.75rem .85rem;
  border-radius:1.25rem;
  border:1px solid rgba(82,128,194,.6);
  background:linear-gradient(180deg, rgba(20,32,54,.92), rgba(8,16,32,.9));
  box-shadow:0 18px 44px rgba(8,20,48,.38), inset 0 1px 0 rgba(255,255,255,.04);
}

.chat-composer__input{
  flex:1 1 auto;
  display:flex;
  flex-direction:column;
  gap:.55rem;
  min-width:0;
}

.chat-composer:focus-within{
  border-color:rgba(122,182,252,.85);
  box-shadow:0 22px 48px rgba(12,34,74,.45), inset 0 1px 0 rgba(255,255,255,.05), 0 0 0 3px rgba(74,148,244,.28);
}

.chat-form.is-disabled .chat-composer{
  opacity:.7;
}

.chat-form.is-disabled .chat-form__shortcut{
  opacity:.6;
}

.chat-input{
  resize:none;
  min-height:1.65em;
  max-height:calc(1.65em * 5);
  width:100%;
  padding:0;
  border:none;
  background:transparent;
  color:#f4f8ff;
  line-height:1.65;
  font-size:0.69rem;
  box-shadow:none;
  overflow:hidden;
}

.chat-input:focus-visible{
  border:none;
  box-shadow:none;
}

.chat-input::placeholder{
  color:rgba(184,204,236,.55);
}

.chat-reply{
  position:relative;
  display:flex;
  align-items:flex-start;
  gap:.65rem;
  padding:.55rem .75rem;
  border-radius:.9rem;
  border:1px solid rgba(90,140,210,.45);
  background:rgba(16,34,62,.65);
  color:#e8f2ff;
}

.chat-reply[hidden]{
  display:none !important;
}

.chat-reply__bar{
  flex:0 0 auto;
  width:4px;
  border-radius:999px;
  background:linear-gradient(180deg, rgba(90,150,230,.9), rgba(60,120,210,.7));
  align-self:stretch;
}

.chat-reply__content{
  flex:1 1 auto;
  display:flex;
  flex-direction:column;
  gap:.2rem;
  min-width:0;
}

.chat-reply__author{
  font-size:0.585rem;
  font-weight:600;
  color:rgba(220,236,255,.88);
}

.chat-reply__text{
  margin:0;
  font-size:0.615rem;
  line-height:1.45;
  color:rgba(206,222,248,.85);
  white-space:pre-wrap;
  word-break:break-word;
}

.chat-reply__dismiss{
  flex:0 0 auto;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  width:1.75rem;
  height:1.75rem;
  border:0;
  padding:0;
  border-radius:.5rem;
  background:transparent;
  color:rgba(210,224,248,.65);
  cursor:pointer;
  transition:background-color .16s ease, color .16s ease;
}

.chat-reply__dismiss:hover,
.chat-reply__dismiss:focus-visible{
  background:rgba(88,140,220,.18);
  color:rgba(236,246,255,.9);
  outline:none;
}

.chat-reply__dismiss:focus-visible{
  box-shadow:0 0 0 2px rgba(120,180,255,.35);
}

.chat-reply__dismiss span{
  display:block;
  font-size:0.75rem;
  line-height:1;
}

.chat-composer__submit{
  flex:0 0 auto;
  align-self:center;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  padding:0 0.8rem;
  border-radius:1rem;
  border:1px solid rgba(98,162,255,.7);
  background:linear-gradient(180deg, rgba(60,130,230,.95), rgba(30,90,200,.92));
  color:#f8fbff;
  font-weight:600;
  font-size:0.69rem;
  letter-spacing:.02em;
  cursor:pointer;
  transition:transform .18s ease, box-shadow .18s ease, background .2s ease, border-color .2s ease;
  box-shadow:0 16px 32px rgba(22,60,120,.4);
}

.chat-composer__submit:hover:not(:disabled){
  transform:translateY(-1px);
  background:linear-gradient(180deg, rgba(74,148,244,.98), rgba(38,108,220,.94));
  box-shadow:0 20px 40px rgba(24,66,130,.45);
}

.chat-composer__submit:focus-visible{
  outline:2px solid rgba(120,188,255,.8);
  outline-offset:2px;
}

.chat-composer__submit:disabled{
  cursor:not-allowed;
  opacity:.6;
  box-shadow:none;
}

.chat-form__footer{
  display:flex;
  flex-wrap:wrap;
  align-items:center;
  gap:.35rem 1rem;
  padding-inline:.25rem;
}

.chat-error{
  margin:0 auto 0 0;
  color:var(--danger);
  font-size:0.615rem;
}

.chat-form__shortcut{
  margin:0 0 0 auto;
  font-size:0.585rem;
  color:rgba(176,198,230,.66);
  letter-spacing:.01em;
}

.chat-input:disabled{
  cursor:not-allowed;
  color:rgba(170,190,220,.6);
}

.chat-panel__body::-webkit-scrollbar,
.chat-scroll::-webkit-scrollbar{
  width:10px;
}

.chat-panel__body::-webkit-scrollbar-track,
.chat-scroll::-webkit-scrollbar-track{
  background:rgba(12,24,40,.6);
  border-radius:6px;
}

.chat-panel__body::-webkit-scrollbar-thumb,
.chat-scroll::-webkit-scrollbar-thumb{
  background:rgba(88,132,194,.55);
  border-radius:6px;
}

@media (max-width: 1440px){
  .events-layout{
    grid-template-columns:minmax(190px, 15vw) minmax(0, 1fr) clamp(240px, 28vw, 320px);
  }
}

.events-sidebar{
  padding: 0 0.1vw 0 0;
  display:flex;
  flex-direction:column;
  gap:1vh;
  position:sticky;
  top:var(--events-sticky-top);
  max-height:var(--events-main-panel-height, calc(100vh - var(--events-sticky-top) - clamp(1rem, 2vw, 1.75rem)));
  overflow:auto;
  scrollbar-gutter:stable;
  scrollbar-width:thin;
  scrollbar-color:rgba(108,132,168,.6) rgba(12,20,34,.7);
  align-self:start;
}

.events-sidebar::-webkit-scrollbar{
  width:10px;
}

.events-sidebar::-webkit-scrollbar-track{
  background:rgba(10,16,26,.7);
  border-radius:999px;
}

.events-sidebar::-webkit-scrollbar-thumb{
  background:linear-gradient(180deg, rgba(46,141,255,.5), rgba(30,200,255,.35));
  border-radius:999px;
  border:2px solid rgba(9,14,24,.9);
}

.events-sidebar::-webkit-scrollbar-thumb:hover{
  background:linear-gradient(180deg, rgba(46,141,255,.7), rgba(30,200,255,.5));
}

.sidebar-card{
  display:flex;
  flex-direction:column;
  gap:.85rem;
  padding:1vh 1vw;
  border-radius:1rem;
  border:1px solid rgba(86,132,194,.45);
  background:linear-gradient(180deg, rgba(18,34,58,.82), rgba(8,18,32,.78));
  box-shadow:0 22px 48px rgba(4,12,28,.42), inset 0 1px 0 rgba(255,255,255,.05);
  color:#eaf2ff;
  backdrop-filter:blur(14px);
}

.sidebar-card--action{
  appearance:none;
  width:100%;
  text-align:left;
  cursor:pointer;
  transition:border-color .25s ease, box-shadow .25s ease, transform .2s ease, background .3s ease;
  color:inherit;
}

.sidebar-card--action:hover:not(:disabled){
  border-color:rgba(132,188,248,.6);
  box-shadow:0 18px 44px rgba(12,32,64,.45);
  background:linear-gradient(180deg, rgba(26,48,80,.88), rgba(12,26,48,.82));
  transform:translateY(-2px);
}

.sidebar-card--action:focus-visible{
  outline:2px solid rgba(120,176,240,.9);
  outline-offset:2px;
}

.sidebar-card--action.is-active{
  border-color:rgba(84,160,246,.85);
  box-shadow:0 22px 52px rgba(12,46,96,.4);
  background:linear-gradient(180deg, rgba(32,58,102,.92), rgba(16,32,60,.86));
}

.sidebar-card--action:disabled{
  opacity:.55;
  cursor:not-allowed;
  transform:none;
  box-shadow:none;
}

.sidebar-card__title{
  margin:0;
  font-size:0.675rem;
  font-weight:600;
  letter-spacing:.04em;
  color:rgba(188,210,242,.82);
}

.sidebar-card__name{
  max-height: 3vh;
  margin:0;
  font-size:0.9rem;
  font-weight:700;
  letter-spacing:.015em;
  color:#f6f9ff;
}

.sidebar-card__stats{
  margin:0;
  display:grid;
  grid-template-columns:repeat(auto-fit, minmax(10vw, 1fr));
  gap:.55rem;
}

.sidebar-card__stat{
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:.75rem;
  padding:.45rem .6rem;
  border-radius:.75rem;
  border:1px solid rgba(72,116,180,.35);
  background:linear-gradient(180deg, rgba(16,28,48,.68), rgba(10,22,38,.62));
  font-size:0.6375rem;
}

.sidebar-card__stat-label{
  color:rgba(198,214,236,.76);
}

.sidebar-card__stat-value{
  font-weight:600;
  font-size:0.7125rem;
  font-variant-numeric:tabular-nums;
  color:#fdfcff;
}

.sidebar-card__placeholder{
  display:block;
  font-size:0.6375rem;
  color:rgba(196,214,238,.7);
}

.sidebar-card__placeholder.is-hidden{
  display:none;
}

.sidebar-card-actions{
  display:flex;
  justify-content:flex-end;
  gap:.6rem;
  margin:0;
}

.sidebar-card-actions__button{
  min-width:0;
  font-size:0.6375rem;
  font-weight:600;
  padding:.45rem .8rem;
  border-radius:.65rem;
  border:1px solid rgba(108,156,218,.45);
  color:rgba(222,234,255,.92);
  background:linear-gradient(180deg, rgba(20,32,56,.82), rgba(12,22,38,.78));
  transition:background .2s ease, border-color .2s ease, color .2s ease, transform .2s ease;
  cursor:pointer;
}

.sidebar-card-actions__button:hover:not(:disabled){
  border-color:rgba(132,188,248,.65);
  background:linear-gradient(180deg, rgba(26,44,74,.86), rgba(16,28,52,.82));
  color:#fff;
  transform:translateY(-1px);
}

.sidebar-card-actions__button:focus-visible{
  outline:2px solid rgba(132,188,248,.8);
  outline-offset:2px;
}

.sidebar-card-actions__button:disabled{
  opacity:.55;
  cursor:not-allowed;
  transform:none;
}

.sidebar-card-actions__button.is-success{
  border-color:rgba(96,206,148,.6);
  background:linear-gradient(180deg, rgba(18,48,36,.9), rgba(12,36,24,.82));
  color:rgba(224,255,240,.95);
}

.sidebar-card-actions__button.is-error{
  border-color:rgba(228,102,120,.6);
  background:linear-gradient(180deg, rgba(54,20,28,.88), rgba(40,14,20,.8));
  color:rgba(255,230,232,.94);
}

.sidebar-nav{
  display:flex;
  flex-direction:column;
  gap:.6rem;
  padding:1vh 1vw;
  border-radius:1rem;
  border:1px solid rgba(70,108,156,.4);
  background:linear-gradient(180deg, rgba(14,26,44,.82), rgba(8,16,30,.78));
  box-shadow:0 20px 48px rgba(4,12,28,.4), inset 0 1px 0 rgba(255,255,255,.04);
  backdrop-filter:blur(14px);
}

.sidebar-nav__button{
  font-size: 75%;
  display:flex;
  align-items:center;
  justify-content:space-between;
  width:100%;
  padding:.7rem 1rem;
  border-radius:.85rem;
  border:1px solid rgba(70,108,156,.32);
  background:linear-gradient(180deg, rgba(18,30,50,.82), rgba(10,18,34,.82));
  color:#eaf2ff;
  font-weight:600;
  letter-spacing:.01em;
  transition:background .25s ease, border-color .25s ease, box-shadow .25s ease, transform .2s ease;
  text-align:left;
}

.sidebar-nav__button:hover:not(:disabled){
  border-color:rgba(128,184,248,.55);
  box-shadow:0 18px 42px rgba(0,0,0,.36);
  background:linear-gradient(180deg, rgba(30,48,78,.88), rgba(12,24,46,.84));
  transform:translateY(-2px);
}

.sidebar-nav__button.is-active{
  border-color:rgba(84,160,246,.85);
  background:linear-gradient(180deg, rgba(36,60,102,.92), rgba(16,32,60,.88));
  box-shadow:0 24px 54px rgba(12,46,96,.38);
}

.sidebar-nav__button:disabled{
  opacity:.58;
  cursor:not-allowed;
  color:rgba(233,242,255,.55);
}

.events-content{
  display:flex;
  flex-direction:column;
  gap:1.5rem;
  min-width:0;
}

.flow-tool-summary{
  display:flex;
  flex-direction:column;
  gap:.6rem;
  margin-bottom:1.25rem;
  padding:1rem 1.25rem;
  border-radius:.9rem;
  background:rgba(12,24,40,.72);
  border:1px solid rgba(70,108,156,.4);
  box-shadow:inset 0 1px 0 rgba(255,255,255,.04);
}

.flow-tool-summary__title{
  margin:0;
  font-size:0.7875rem;
  font-weight:600;
  color:#f3f6ff;
}

.tool-summary{
  display:flex;
  flex-direction:column;
  gap:.25rem;
  margin:.75rem 0 0;
}

.tool-summary__row{
  display:flex;
  gap:.5rem;
  justify-content:space-between;
  font-size:0.6375rem;
  color:var(--muted);
}

.tool-summary__row dt{ font-weight:600; }

.tool-summary__row dd{
  margin:0;
  color:#fff;
}

.flow-tool-panel[hidden]{
  display:none !important;
}

@media (max-width: 960px){
  .events-layout{
    grid-template-columns:minmax(0,1fr);
    --events-layout-padding: clamp(.85rem, 3vw, 1.4rem);
    padding:var(--events-layout-padding);
  }
  .events-mobile-controls{
    display:flex;
    justify-content:space-between;
    align-items:center;
    flex-wrap:wrap;
    margin-bottom:clamp(.75rem, 2.4vw, 1rem);
  }
  .events-mobile-button{
    flex:1 1 clamp(8rem, 45vw, 12rem);
    min-width:9rem;
    justify-content:center;
  }
  .events-sidebar,
  .events-chat{
    display:flex;
    position:fixed;
    z-index:140;
    flex-direction:column;
    gap:clamp(1rem, 4vw, 1.4rem);
    top:calc(var(--header-height, 64px) + clamp(.75rem, 4vw, 1.5rem));
    width:min(92vw, 420px);
    max-height:calc(100vh - var(--header-height, 64px) - clamp(1.5rem, 8vw, 3rem));
    padding:clamp(1rem, 4vw, 1.5rem);
    border-radius:1.2rem;
    border:1px solid rgba(74,116,178,.6);
    background:linear-gradient(180deg, rgba(12,24,42,.94), rgba(6,14,28,.9));
    box-shadow:0 28px 70px rgba(4,12,28,.5);
    overflow:auto;
    opacity:0;
    pointer-events:none;
    transition:transform .42s cubic-bezier(.24,.74,.3,1), opacity .28s ease;
    will-change:transform;
  }
  .events-sidebar{
    left:clamp(.75rem, 3vw, 2.25rem);
    transform:translateX(-116%);
  }
  .events-chat{
    right:clamp(.75rem, 3vw, 2.25rem);
    transform:translateX(116%);
    order:3;
    height:auto;
  }
  .events-sidebar.is-mobile-open,
  .events-chat.is-mobile-open{
    opacity:1;
    pointer-events:auto;
    transform:translateX(0);
  }
  .events-mobile-close{
    display:inline-flex;
    align-items:center;
    justify-content:center;
    margin:-.5rem -.5rem .5rem auto;
  }
  body.events-mobile-locked{
    overflow:hidden;
  }
  .chat-scroll{
    flex:initial;
    height:auto;
  }
  .chat-panel{
    height:auto;
  }
  .chat-panel__body{
    flex:initial;
  }
}

@media (max-width: 960px) and (prefers-reduced-motion: reduce){
  .events-sidebar,
  .events-chat{
    transition:none;
  }
}

.flow-pane{
  display:block;
  min-width:0;
}

.flow-pane--summary{
  border-radius:.9rem;
  background:rgba(10,22,38,.78);
  border:1px solid rgba(70,108,156,.45);
  padding:1.1rem 1.3rem;
  box-shadow:inset 0 1px 0 rgba(255,255,255,.04);
  gap:1rem;
  align-items:flex-start;
}

.flow-card{
  position:relative;
  transition:transform .4s ease, opacity .35s ease;
  min-width:0;
}

.flow-card.is-inert{
  pointer-events:none;
}

.flow-card--events{ grid-area:events; }
.flow-card--schedules{ grid-area:schedules; }
.flow-card--tabs{ grid-area:tabs; }
#flow-stage-resizer{ grid-area:handle; }

.flow-sidebar-controls{
  display:flex;
  justify-content:flex-end;
  margin-bottom:.35rem;
}

.flow-sidebar-toggle{
  display:inline-flex;
  align-items:center;
  gap:.35rem;
  white-space:nowrap;
}

.flow-card{
  position:relative;
  transition:transform .4s ease, opacity .35s ease;
  min-width:0;
}

.flow-card.is-inert{
  pointer-events:none;
}

.flow-card--events{ grid-area:events; }
.flow-card--schedules{ grid-area:schedules; }
.flow-card--tabs{ grid-area:tabs; }
#flow-stage-resizer{ grid-area:handle; }

.flow-sidebar-controls{
  display:flex;
  justify-content:flex-end;
  margin-bottom:.35rem;
}

.flow-sidebar-toggle{
  display:inline-flex;
  align-items:center;
  gap:.35rem;
  white-space:nowrap;
}

.flow-grid__handle{
  display:none;
  align-items:center;
  justify-content:center;
  cursor:col-resize;
  padding:0 .15rem;
  min-height:4rem;
  border-radius:999px;
  transition:background .2s ease;
  touch-action:none;
}

.flow-grid__handle:focus-visible{
  outline:3px solid rgba(0,176,255,.4);
  outline-offset:2px;
}

.flow-grid__handle:hover{
  background:rgba(2,40,80,.4);
}

.flow-grid__handle-grip{
  width:4px;
  height:44px;
  border-radius:999px;
  background:linear-gradient(180deg, rgba(128,186,255,.8), rgba(34,98,170,.8));
  box-shadow:inset 0 0 0 1px rgba(8,20,34,.65);
}

#flow-sidebar-expand{
  position:fixed;
  top:calc(var(--header-height, 64px) + 1.25rem);
  left:clamp(.75rem, 3vw, 2.75rem);
  z-index:90;
  box-shadow:0 10px 30px rgba(0,0,0,.4);
}

.flow-sidebar-overlay{
  position:fixed;
  inset:0;
  display:none;
  z-index:120;
}

.flow-sidebar-overlay:not([hidden]){
  display:block;
}

.flow-sidebar-overlay__backdrop{
  position:absolute;
  inset:0;
  background:rgba(4,12,24,.66);
  backdrop-filter:blur(2px);
}

.flow-sidebar-overlay__panel{
  position:relative;
  margin:calc(var(--header-height, 64px) + 1.5rem) auto 1.5rem;
  width:min(92vw, 420px);
  max-height:calc(100vh - var(--header-height, 64px) - 3rem);
  overflow:auto;
  padding:1.6rem 1.4rem 1.4rem;
  border-radius:1rem;
  background:rgba(8,18,30,.94);
  border:1px solid rgba(70,108,156,.55);
  box-shadow:0 28px 70px rgba(0,0,0,.45);
}

.flow-sidebar-overlay__content{
  display:flex;
  flex-direction:column;
  gap:1.25rem;
}

.flow-sidebar-overlay__content > .module{
  margin:0;
}

body.sidebar-overlay-open{
  overflow:hidden;
}

.flow-selection-note{
  margin:0;
  padding:.65rem .85rem;
  border-radius:.6rem;
  background:rgba(0,142,255,.1);
  border:1px solid rgba(0,142,255,.35);
  color:#e0f4ff;
}

.flow-selection-summary{
  font-size: 75%;
  display:block;
  width:100%;
  box-sizing:border-box;
  margin:0;
  padding:0.5vh 0.5vw;
  border-radius:.85rem;
  background:rgba(18,30,46,.8);
  border:1px solid rgba(60,96,143,.5);
  box-shadow:inset 0 1px 0 rgba(255,255,255,.05);
}

.flow-selection-summary__title{
  margin:0 0 .6rem;
  font-size:0.7875rem;
  font-weight:600;
}

.flow-selection-summary__item{
  margin:.35rem 0;
  display:flex;
  gap:.15rem;
}

.flow-selection-summary__label{
  width:3rem;
  flex-shrink:0;
  color:var(--muted);
}

/* 2つ目の span（値のほう）を3行で省略 */
.flow-selection-summary__item > span:last-child {
  flex: 1;                       /* 横幅いっぱい使う */
  display: -webkit-box;          /* 複数行省略のキモ */
  -webkit-box-orient: vertical;
  -webkit-line-clamp: 3;         /* ★ 3行まで表示 */
  overflow: hidden;              /* はみ出しを隠す */
}

.flow-forward-actions{
  margin-top:1.5rem;
  display:flex;
  gap:.8rem;
  flex-wrap:wrap;
  justify-content:flex-end;
}

.entity-list{
  list-style:none;
  margin: 0.5vh 0 0;
  padding:0;
  display:grid;
  gap:0.5vh;
}

.entity-item{
  display:flex;
  align-items:flex-start;
  justify-content:space-between;
  gap:0.3vw;
  padding:1.1rem 1.3rem;
  border-radius:1rem;
  background:rgba(8,20,34,.75);
  border:1px solid rgba(56,96,144,.4);
  transition:transform .2s ease, border-color .2s ease, box-shadow .3s ease;
}

.entity-item:hover{
  transform:translateY(-2px);
  border-color:rgba(0,142,255,.5);
  box-shadow:0 16px 28px rgba(0,78,140,.2);
}

.entity-item{
  cursor:pointer;
  display:flex;
  align-items:flex-start;
  gap:0.75rem;
  position:relative;
}

.entity-checkbox{
  margin-left:auto;
  flex-shrink:0;
  width:1.1rem;
  height:1.1rem;
  accent-color:var(--accent);
  cursor:pointer;
}

.entity-indicator{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  width:1.25rem;
  height:1.25rem;
  border-radius:999px;
  border:2px solid rgba(120,168,220,.7);
  background:rgba(10,26,42,.6);
  margin-top:.15rem;
  flex-shrink:0;
  transition:border-color .2s ease, background-color .2s ease, box-shadow .3s ease;
}

.entity-indicator__dot{
  width:.55rem;
  height:.55rem;
  border-radius:50%;
  background:rgba(120,168,220,.2);
  transition:background-color .2s ease, transform .2s ease;
}

.entity-item.is-selected{
  border-color:rgba(0,155,255,.75);
  background:linear-gradient(180deg, rgba(8,42,70,.85), rgba(6,20,36,.92));
  box-shadow:0 18px 38px rgba(0,78,140,.35);
}

.entity-item.is-selected .entity-name{
  color:#e6f6ff;
}

.entity-item.is-selected .entity-meta{
  color:rgba(190,232,255,.75);
}

.entity-item.is-selected .entity-indicator{
  border-color:rgba(0,155,255,.85);
  background:rgba(0,84,140,.45);
  box-shadow:0 0 0 4px rgba(0,155,255,.18);
}

.entity-item.is-selected .entity-indicator__dot{
  background:rgba(0,211,255,.85);
  transform:scale(1.08);
}

.entity-item:focus-visible{
  outline:2px solid rgba(0,155,255,.7);
  outline-offset:2px;
}

.entity-item.is-focus-flash{
  animation:entityFocusFlash 1.2s ease-out;
}

@keyframes entityFocusFlash{
  from{ box-shadow:0 0 0 0 rgba(0,155,255,.32); }
  to{ box-shadow:0 0 0 28px rgba(0,155,255,0); }
}

.entity-label{
  margin-right: auto;
  display:flex;
  flex-direction:column;
  gap:.4rem;
  min-width:0;
}

.entity-name{
  display:flex;
  align-items:center;
  gap:.4rem;
  flex-wrap:wrap;
  font-size:0.7875rem;
  font-weight:600;
  color:#f4f9ff;
}

.entity-badge{
  display:inline-flex;
  align-items:center;
  padding:.1rem .5rem;
  border-radius:999px;
  font-size:0.54rem;
  font-weight:600;
  line-height:1;
  border:1px solid rgba(93,208,255,.35);
  background:rgba(93,208,255,.18);
  color:var(--accent, #5dd0ff);
}

.entity-badge--active{
  border-color:rgba(93,208,255,.5);
}

.flow-selection-note--status{
  margin-top:-.35rem;
  color:var(--muted);
}

.entity-meta{
  color:var(--muted);
  font-size:0.675rem;
}

.entity-actions{
  display:flex;
  gap:.45rem;
  flex-wrap:wrap;
  justify-content:flex-end;
}

.entity-actions .btn,
.entity-actions .btn-icon{
  flex-shrink:0;
}

.entity-action{
  display:inline-flex;
  align-items:center;
  gap:.35rem;
  padding:.45rem .75rem;
  border-radius:.9rem;
  border:1px solid rgba(86,134,204,.4);
  background:linear-gradient(180deg, rgba(18,34,60,.82), rgba(10,22,42,.78));
  color:#d9e7ff;
  font-size:0.585rem;
  font-weight:600;
  letter-spacing:.02em;
  transition:transform .2s ease, box-shadow .2s ease, border-color .2s ease, background .2s ease;
  cursor:pointer;
}

.entity-action:hover,
.entity-action:focus-visible{
  border-color:rgba(120,182,255,.7);
  background:linear-gradient(180deg, rgba(32,56,94,.9), rgba(14,28,54,.84));
  box-shadow:0 16px 32px rgba(8,20,38,.45);
  transform:translateY(-1px);
}

.entity-action:focus-visible{
  outline:2px solid rgba(30,200,255,.55);
  outline-offset:2px;
}

.entity-action__icon{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  width:1.1rem;
  height:1.1rem;
}

.entity-action__icon svg{
  width:1rem;
  height:1rem;
  fill:currentColor;
}

.entity-action__label{
  font-size:0.585rem;
  line-height:1;
}

.entity-action--edit{
  border-color:rgba(46,164,255,.55);
  background:linear-gradient(180deg, rgba(28,76,122,.82), rgba(20,54,94,.78));
  color:#a3d9ff;
}

.entity-action--edit:hover,
.entity-action--edit:focus-visible{
  background:linear-gradient(180deg, rgba(38,98,162,.9), rgba(24,60,110,.85));
  color:#d6efff;
}

.entity-action--delete{
  border-color:rgba(255,107,107,.45);
  background:linear-gradient(180deg, rgba(96,38,54,.82), rgba(70,24,40,.78));
  color:#ffc3c3;
}

.entity-action--delete:hover,
.entity-action--delete:focus-visible{
  background:linear-gradient(180deg, rgba(126,48,66,.88), rgba(88,28,48,.82));
  color:#ffe5e5;
}

@media (max-width: 720px){
  .entity-action{
    padding:.4rem .55rem;
  }

  .entity-action__label{
    display:none;
  }
}

.entity-item:not(.is-selected):focus-visible .entity-indicator{
  border-color:rgba(0,155,255,.85);
  box-shadow:0 0 0 3px rgba(0,155,255,.15);
}

.entity-item:not(.is-selected):hover .entity-indicator__dot{
  background:rgba(0,155,255,.45);
}

.flow-summary-title{
  margin:0;
  font-size:0.7875rem;
  font-weight:600;
  color:#e6f6ff;
}

.flow-summary-name{
  margin:.1rem 0 .8rem;
  font-size:0.9375rem;
  font-weight:700;
  color:#fdfcff;
}

.flow-summary-stats{
  margin:0 0 1rem;
  display:flex;
  flex-direction:column;
  gap:.35rem;
}

.flow-summary-row{
  display:flex;
  gap:.75rem;
  color:#d0e8ff;
  font-size:0.7125rem;
}

.flow-summary-row dt{
  width:4.8rem;
  flex-shrink:0;
  color:var(--muted);
  font-weight:500;
}

.flow-summary-row dd{
  margin:0;
}

.flow-summary-group{
  margin-bottom:1.4rem;
  border-radius:.9rem;
  background:rgba(8,20,34,.65);
  border:1px solid rgba(56,96,144,.4);
  padding:1.1rem 1.3rem;
  box-shadow:inset 0 1px 0 rgba(255,255,255,.03);
}

.flow-pane--summary .btn{
  align-self:flex-start;
}

.flow-tablist{
  display:flex;
  gap:.75rem;
  margin-bottom:1.2rem;
  flex-wrap:wrap;
}

.flow-tab{
  border:none;
  background:rgba(17,30,48,.8);
  color:var(--muted);
  padding:.55rem 1rem;
  border-radius:.7rem;
  font-weight:600;
  font-size:0.7125rem;
  cursor:pointer;
  border:1px solid transparent;
  transition:background .25s ease, color .25s ease, border-color .25s ease, transform .25s ease;
}

.flow-tab:hover{
  transform:translateY(-1px);
  border-color:rgba(0,142,255,.4);
}

.flow-tab.is-active{
  background:rgba(0,142,255,.18);
  color:#e6f6ff;
  border-color:rgba(0,142,255,.65);
}

.flow-card--tabs .module-body{
  display:flex;
  flex-direction:column;
  gap:1.2rem;
}

.flow-tabpanels{
  flex:1 1 auto;
  min-height:0;
  display:flex;
  gap:1rem;
}

.flow-tabpanel{
  flex:1 1 auto;
  min-height:0;
  display:flex;
  flex-direction:column;
  border-radius:0;
  background:transparent;
  border:none;
  padding:0;
  outline:none;
  gap:1rem;
}

.flow-tabpanel[hidden]{
  display:none;
}


.embedded-tool{
  display:flex;
  flex:1 1 auto;
  min-height:0;
}

.embedded-tool__surface{
  position:relative;
  display:flex;
  flex-direction:column;
  gap:1rem;
  flex:1 1 auto;
  min-height:clamp(28rem, 68vh, 56rem);
  overflow:auto;
}

#flow-panel-participants{
  display:flex;
  flex-direction:column;
  gap:clamp(.9rem, 1.8vw, 1.3rem);
  width:min(100%, var(--flow-stage-panel-width));
  max-width:var(--flow-stage-panel-width);
  margin-inline:auto;
  padding:0;
  border:none;
  background:none;
  box-shadow:none;
  backdrop-filter:none;
}

#flow-panel-operator{
  display:flex;
  flex-direction:column;
  gap:clamp(.9rem, 1.8vw, 1.3rem);
  width:min(100%, var(--flow-stage-panel-width));
  max-width:var(--flow-stage-panel-width);
  margin-inline:auto;
  padding:0;
  border:none;
  background:none;
  box-shadow:none;
  backdrop-filter:none;
}

#flow-panel-participants .embedded-tool{
  position:relative;
  height:100%;
  min-height:0;
}

#flow-panel-participants .embedded-tool__surface{
  padding:var(--flow-stage-panel-padding);
  border-radius:var(--flow-stage-panel-radius);
  background:var(--flow-stage-panel-background);
  border:1px solid var(--flow-stage-panel-border);
  box-shadow:var(--flow-stage-panel-shadow);
  backdrop-filter:blur(18px);
}

#flow-panel-participants .embedded-tool__surface.qa-embedded{
  padding:0;
  border:none;
  border-radius:0;
  background:none;
  box-shadow:none;
  backdrop-filter:none;
}

#flow-panel-participants .module-title-row{
  display:flex;
  align-items:center;
  gap:.75rem;
  flex-wrap:wrap;
}

#flow-panel-participants .module-title-row h2{ margin:0; }

#flow-panel-participants .module-title-row .status-pill{
  margin-left:auto;
}

#flow-panel-participants .qa-embedded #qa-participant-description{
  display:flex;
  flex-wrap:wrap;
  align-items:flex-start;
  gap:clamp(.55rem, 1.3vw, .85rem);
}

#flow-panel-participants .qa-embedded #qa-participant-description-main{
  flex:1 1 20rem;
  min-width:min(22rem, 100%);
}

#flow-panel-participants .qa-embedded .module-description__meta{
  flex:0 0 auto;
  padding:.4rem .85rem;
  border-radius:.85rem;
  border:1px solid rgba(90,146,228,.45);
  background:linear-gradient(180deg, rgba(22,40,72,.82), rgba(12,24,46,.78));
  font-size:0.585rem;
  font-weight:600;
  letter-spacing:.02em;
  color:#b5d6ff;
  box-shadow:0 10px 24px rgba(10,18,34,.35), inset 0 1px 0 rgba(255,255,255,.05);
  white-space:normal;
  text-align:right;
  max-width:min(22rem, 100%);
  margin-left:auto;
}

#flow-panel-participants .qa-embedded .module-description__meta:empty{
  display:none;
}

#flow-panel-participants .qa-embedded .admin-main{
  gap:clamp(1.2rem, 2.4vw, 1.8rem);
  padding:0;
}

#participants-context-callout{
  display:flex;
  flex-direction:column;
  gap:.65rem;
  padding:clamp(1rem, 2.3vw, 1.4rem) clamp(1.2rem, 2.6vw, 1.75rem);
  border-radius:clamp(.9rem, 1.9vw, 1.2rem);
  border:1px solid rgba(90,142,210,.45);
  background:linear-gradient(180deg, rgba(16,30,52,.78), rgba(10,20,38,.72));
  box-shadow:0 22px 44px rgba(4,12,28,.48), inset 0 1px 0 rgba(255,255,255,.04);
}

.flow-tool-context-card__title{
  margin:0;
  font-size:0.7875rem;
  font-weight:600;
  letter-spacing:.02em;
}

.flow-tool-context-card__list{
  display:flex;
  flex-wrap:wrap;
  gap:clamp(.65rem, 2vw, 1rem);
  margin:0;
  padding:0;
  list-style:none;
}

.flow-tool-context-card__item{
  min-width:clamp(8rem, 24vw, 12rem);
  display:flex;
  flex-direction:column;
  gap:.35rem;
}

.flow-tool-context-card__item dt{
  font-size:0.585rem;
  letter-spacing:.12em;
  text-transform:uppercase;
  color:var(--muted);
}

.flow-tool-context-card__item dd{
  margin:0;
  font-size:0.7875rem;
  font-weight:600;
}

.flow-sync-status{
  display:none;
  margin:0 0 clamp(.95rem, 1.8vw, 1.3rem);
  padding:clamp(.85rem, 1.9vw, 1.15rem) clamp(1.1rem, 2.6vw, 1.55rem);
  border-radius:clamp(.95rem, 2vw, 1.35rem);
  border:1px solid rgba(82,132,204,.42);
  background:linear-gradient(180deg, rgba(14,28,50,.78), rgba(8,18,34,.72));
  box-shadow:0 22px 44px rgba(4,12,28,.46), inset 0 1px 0 rgba(255,255,255,.05);
  color:var(--text);
  font-size:0.66rem;
  line-height:1.6;
}

.flow-sync-status.is-visible{ display:block; }

.flow-sync-status__meta{
  display:block;
  margin-top:.45rem;
  font-size:0.585rem;
  color:var(--muted);
  letter-spacing:.01em;
}

.flow-sync-status--info{ border-color:rgba(30,200,255,.45); background:linear-gradient(180deg, rgba(18,34,60,.8), rgba(10,24,44,.72)); box-shadow:0 24px 46px rgba(8,22,40,.5), inset 0 1px 0 rgba(255,255,255,.05); }
.flow-sync-status--success{ border-color:rgba(24,209,143,.45); background:linear-gradient(180deg, rgba(12,38,32,.78), rgba(8,24,20,.7)); box-shadow:0 24px 46px rgba(8,32,24,.48), inset 0 1px 0 rgba(255,255,255,.05); }
.flow-sync-status--error{ border-color:rgba(255,107,107,.48); background:linear-gradient(180deg, rgba(38,16,24,.78), rgba(26,10,16,.72)); box-shadow:0 24px 46px rgba(32,12,16,.5), inset 0 1px 0 rgba(255,255,255,.05); }
.flow-sync-status--pending{ border-color:rgba(255,194,71,.48); background:linear-gradient(180deg, rgba(38,28,12,.78), rgba(26,18,6,.7)); box-shadow:0 24px 46px rgba(34,24,8,.5), inset 0 1px 0 rgba(255,255,255,.05); }

#flow-panel-participants .qa-embedded .admin-context{
  margin:0 0 clamp(.9rem, 1.8vw, 1.25rem);
  padding:clamp(.8rem, 1.8vw, 1.1rem) clamp(1.05rem, 2.4vw, 1.45rem);
  border-radius:clamp(.9rem, 1.9vw, 1.3rem);
  border:1px solid rgba(86,134,204,.38);
  background:linear-gradient(180deg, rgba(16,32,56,.75), rgba(10,22,40,.7));
  color:var(--muted);
  font-size:0.6375rem;
  line-height:1.6;
  box-shadow:0 20px 42px rgba(4,12,28,.44), inset 0 1px 0 rgba(255,255,255,.05);
}

#flow-panel-participants .qa-embedded .admin-context strong{ color:var(--text); }

#flow-panel-participants .qa-embedded .module + .module{
  margin-top:clamp(.75rem, 1.5vw, 1.2rem);
}

#qa-participant-module{
  overflow:visible;
  flex:1 1 auto;
  min-height:0;
}

#qa-participant-module .module-body{
  display:flex;
  flex-direction:column;
  gap:clamp(.75rem, 1.8vw, 1.2rem);
  overflow:hidden;
}

#qa-participant-module .qa-participant-card-switcher,
#qa-participant-module .qa-participant-tabpanels,
#qa-participant-module .qa-participant-tabpanel,
#qa-participant-module .qa-participant-card,
#qa-participant-module .qa-participant-card__body{
  flex:1 1 auto;
  min-height:0;
  display:flex;
  flex-direction:column;
}

#qa-participant-module .participant-card-shell{
  flex:1 1 auto;
  min-height:0;
  overflow:auto;
  scrollbar-gutter:stable;
  scrollbar-width:thin;
  scrollbar-color:rgba(108,132,168,.6) rgba(18,24,38,.7);
}

#qa-participant-module .participant-card-shell::-webkit-scrollbar{ width:10px; }
#qa-participant-module .participant-card-shell::-webkit-scrollbar-track{
  background:rgba(10,16,26,.7);
  border-radius:999px;
}

#qa-participant-module .participant-card-shell::-webkit-scrollbar-thumb{
  background:linear-gradient(180deg, rgba(46,141,255,.5), rgba(30,200,255,.35));
  border-radius:999px;
  border:2px solid rgba(9,14,24,.9);
}

#qa-participant-module .participant-card-shell::-webkit-scrollbar-thumb:hover{
  background:linear-gradient(180deg, rgba(46,141,255,.7), rgba(30,200,255,.5));
}

#flow-panel-participants .qa-embedded .qa-participant-card-switcher{
  display:flex;
  flex-direction:column;
  gap:clamp(.75rem, 1.8vw, 1.2rem);
}

#flow-panel-participants .qa-embedded .qa-participant-card-tabs{
  display:flex;
  align-items:center;
  flex-wrap:wrap;
  gap:clamp(.45rem, 1.4vw, .85rem);
  padding:clamp(.45rem, 1.2vw, .75rem) clamp(.6rem, 1.6vw, 1rem);
  border-radius:clamp(1.1rem, 2.4vw, 1.6rem);
  border:1px solid rgba(58,104,162,.45);
  background:linear-gradient(135deg, rgba(12,32,52,.85), rgba(10,24,44,.88));
  box-shadow:0 12px 28px rgba(4,12,30,.4), inset 0 1px 0 rgba(255,255,255,.05);
}

#flow-panel-participants .qa-embedded .qa-participant-card-tabs__label{
  font-size:clamp(0.51rem, 0.75vw, 0.585rem);
  letter-spacing:.12em;
  text-transform:uppercase;
  color:rgba(168,208,255,.85);
  font-weight:700;
}

#flow-panel-participants .qa-embedded .qa-participant-card-tabs__buttons{
  display:flex;
  flex-wrap:wrap;
  gap:clamp(.45rem, 1.2vw, .75rem);
}

#flow-panel-participants .qa-embedded .qa-participant-card-tab{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  gap:.4rem;
  padding:.35rem .9rem;
  border-radius:999px;
  border:1px solid rgba(56,120,186,.45);
  background:rgba(12,26,44,.7);
  color:rgba(202,220,244,.88);
  font-size:0.6375rem;
  font-weight:600;
  letter-spacing:.02em;
  cursor:pointer;
  transition:transform .18s ease, border-color .18s ease, background .18s ease, color .18s ease;
}

#flow-panel-participants .qa-embedded .qa-participant-card-tab:hover{
  transform:translateY(-1px);
  border-color:rgba(30,200,255,.55);
  color:#e6f6ff;
}

#flow-panel-participants .qa-embedded .qa-participant-card-tab.is-active,
#flow-panel-participants .qa-embedded .qa-participant-card-tab[aria-selected="true"]{
  background:linear-gradient(135deg, rgba(46,141,255,.42), rgba(30,200,255,.28));
  border-color:rgba(30,200,255,.7);
  color:#f5fbff;
  box-shadow:0 0 0 1px rgba(14,160,230,.35);
}

#flow-panel-participants .qa-embedded .qa-participant-card-tab__label{
  display:inline-flex;
  align-items:center;
  gap:.35rem;
}

#flow-panel-participants .qa-embedded .qa-participant-tabpanels{
  display:flex;
  flex-direction:column;
  gap:clamp(.8rem, 1.8vw, 1.15rem);
}

#flow-panel-participants .qa-embedded .qa-participant-tabpanel[hidden]{
  display:none;
}

#flow-panel-participants .qa-embedded .qa-participant-card{
  border-radius:clamp(1rem, 2vw, 1.35rem);
  border:1px solid rgba(70,108,156,.42);
  background:linear-gradient(180deg, rgba(16,34,58,.82), rgba(10,22,40,.78));
  box-shadow:0 24px 52px rgba(4,12,30,.48), inset 0 1px 0 rgba(255,255,255,.04);
  padding:clamp(.95rem, 2.1vw, 1.35rem) clamp(1.15rem, 2.6vw, 1.55rem);
}

#flow-panel-participants .qa-embedded .qa-participant-card__body{
  display:flex;
  flex-direction:column;
  gap:clamp(.65rem, 1.6vw, 1rem);
}

#flow-panel-participants .qa-embedded .qa-participant-card--info ul{
  margin:0;
  padding-left:1.2rem;
  display:flex;
  flex-direction:column;
  gap:.55rem;
  color:rgba(214,226,248,.85);
}

#flow-panel-participants .qa-embedded .loading-overlay{
  background:linear-gradient(180deg, rgba(8,16,32,.92), rgba(6,12,24,.88));
  border-radius: clamp(.95rem, 1.8vw, 1.4rem);
  backdrop-filter:blur(10px);
}

#flow-panel-participants .qa-embedded .admin-controls{
  display:flex;
  flex-direction:column;
  gap:clamp(.6rem, 1.6vw, 1rem);
  padding:0;
}

#flow-panel-participants .qa-embedded .admin-controls__row{
  display:flex;
  flex-wrap:wrap;
  gap:clamp(.5rem, 1.4vw, .85rem);
}

#flow-panel-participants .qa-embedded .admin-controls__row .btn,
#flow-panel-participants .qa-embedded .admin-controls__row .file-input{
  flex:1 1 12rem;
  justify-content:center;
}

#flow-panel-participants .qa-embedded .admin-controls__row--actions{
  justify-content:flex-start;
}

#flow-panel-participants .qa-embedded .admin-controls__row--actions .btn{
  flex:1 1 10rem;
}

#flow-panel-participants .qa-embedded .admin-controls .file-input{
  font-size: 75%;
  position:relative;
  overflow:hidden;
  display:inline-flex;
  align-items:center;
  gap:.45rem;
}

#flow-panel-participants .qa-embedded .admin-controls .file-input input{
  position:absolute;
  inset:0;
  opacity:0;
  cursor:pointer;
}

#flow-panel-participants .qa-embedded .status-pill{
  display:inline-flex;
  align-items:center;
  gap:.45rem;
  padding:.4rem .9rem;
  border-radius:999px;
  border:1px solid rgba(98,152,214,.58);
  background:linear-gradient(180deg, rgba(14,36,62,.86), rgba(8,22,40,.8));
  box-shadow:0 18px 34px rgba(4,12,26,.45), inset 0 1px 0 rgba(255,255,255,.05);
  color:#e2edff;
  font-size:0.6rem;
  letter-spacing:.02em;
}

#flow-panel-participants .qa-embedded .status-pill::before{
  content:"";
  width:.45rem;
  height:.45rem;
  border-radius:50%;
  background:var(--accent);
  box-shadow:0 0 0 4px rgba(30,200,255,.25);
}

#flow-panel-participants .qa-embedded .status-pill--inline{
  padding:.35rem .75rem;
  font-size:0.5625rem;
  box-shadow:0 12px 26px rgba(4,12,26,.35), inset 0 1px 0 rgba(255,255,255,.04);
}

#flow-panel-participants .qa-embedded .change-preview{
  margin-top:clamp(.5rem, 1.4vw, .85rem);
  padding:clamp(.9rem, 2.2vw, 1.3rem);
  border-radius:clamp(.85rem, 1.8vw, 1.2rem);
  border:1px solid rgba(86,134,204,.4);
  background:linear-gradient(180deg, rgba(14,30,54,.8), rgba(8,18,36,.72));
  box-shadow:0 22px 44px rgba(4,12,28,.48), inset 0 1px 0 rgba(255,255,255,.04);
}

#flow-panel-participants .qa-embedded .change-preview__header{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:.75rem;
  margin-bottom:.65rem;
  font-weight:600;
}

#flow-panel-participants .qa-embedded .change-preview__title{
  display:inline-flex;
  align-items:center;
  gap:.55rem;
  font-size:0.69rem;
}

#flow-panel-participants .qa-embedded .change-preview__title::before{
  content:"";
  width:1.05rem;
  height:1.05rem;
  border-radius:999px;
  background:radial-gradient(circle at 30% 30%, rgba(30,200,255,.85), rgba(30,104,255,.65));
  box-shadow:0 0 0 2px rgba(30,200,255,.35);
}

#flow-panel-participants .qa-embedded .change-preview__count{
  font-size:0.615rem;
  color:#8ecfff;
  font-weight:500;
}

#flow-panel-participants .qa-embedded .change-preview__list{
  margin:0;
  padding:0;
  display:flex;
  flex-direction:column;
  gap:.35rem;
  max-height:14rem;
  overflow:auto;
  list-style:none;
  scrollbar-width:thin;
  scrollbar-color:rgba(108,132,168,.6) transparent;
}

#flow-panel-participants .qa-embedded .change-preview__list::-webkit-scrollbar{
  width:8px;
}

#flow-panel-participants .qa-embedded .change-preview__list::-webkit-scrollbar-thumb{
  background:linear-gradient(180deg, rgba(46,141,255,.5), rgba(30,200,255,.38));
  border-radius:999px;
}

#flow-panel-participants .qa-embedded .change-preview__item{
  display:flex;
  gap:.75rem;
  align-items:flex-start;
  padding:.25rem .15rem;
  border-radius:.7rem;
  transition:background .2s ease;
}

#flow-panel-participants .qa-embedded .change-preview__item:hover{
  background:rgba(32,58,102,.32);
}

#flow-panel-participants .qa-embedded .change-preview__icon{
  flex:0 0 auto;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  width:1.65rem;
  height:1.65rem;
  border-radius:.55rem;
  background:linear-gradient(180deg, rgba(62,118,208,.45), rgba(46,92,168,.38));
  box-shadow:0 6px 18px rgba(6,14,28,.4);
  color:#d5e6ff;
}

#flow-panel-participants .qa-embedded .change-preview__icon svg{
  width:1rem;
  height:1rem;
  fill:currentColor;
}

#flow-panel-participants .qa-embedded .change-preview__body{
  flex:1 1 auto;
  display:flex;
  flex-direction:column;
  gap:.28rem;
}

#flow-panel-participants .qa-embedded .change-preview__line{
  margin:0;
  font-size:0.6375rem;
  line-height:1.5;
  color:#e9f3ff;
}

#flow-panel-participants .qa-embedded .change-preview__line--meta{
  color:var(--muted);
  font-size:0.6rem;
}

#flow-panel-participants .qa-embedded .change-preview__changes{
  margin:.15rem 0 0;
  padding-left:1.15rem;
  display:flex;
  flex-direction:column;
  gap:.2rem;
  color:#b7c7e2;
  font-size:0.585rem;
}

#flow-panel-participants .qa-embedded .change-preview__change::marker{
  color:rgba(140,198,255,.7);
}

#flow-panel-participants .qa-embedded .change-preview__note{
  margin-top:.6rem;
  font-size:0.6rem;
  color:var(--muted);
}

#flow-panel-participants .qa-embedded .admin-summary{
  margin-top:clamp(.75rem, 1.6vw, 1.1rem);
  padding:.75rem 1rem;
  border-radius:.8rem;
  border:1px solid rgba(82,130,198,.35);
  background:rgba(12,24,42,.75);
  box-shadow:inset 0 1px 0 rgba(255,255,255,.03);
}

:is(#flow-panel-participants .qa-embedded, .question-admin-page) .participant-card-shell{
  margin-top:clamp(.6rem, 1.6vw, .9rem);
}

:is(#flow-panel-participants .qa-embedded, .question-admin-page) .participant-card-list{
  display:flex;
  flex-direction:column;
  gap:clamp(1rem, 2.2vw, 1.4rem);
}

:is(#flow-panel-participants .qa-embedded, .question-admin-page) .participant-card-group{
  display:flex;
  flex-direction:column;
  gap:clamp(.6rem, 1.5vw, .85rem);
  padding:clamp(.75rem, 1.8vw, 1.1rem) clamp(.85rem, 1.9vw, 1.2rem);
  border-radius:clamp(.95rem, 2vw, 1.35rem);
  border:1px solid rgba(58,90,134,.42);
  background:linear-gradient(180deg, rgba(12,24,42,.6), rgba(8,18,32,.76));
  box-shadow:inset 0 1px 0 rgba(255,255,255,.03);
}

:is(#flow-panel-participants .qa-embedded, .question-admin-page) .participant-card-group__header{
  display:flex;
  align-items:center;
  gap:clamp(.5rem, 1.2vw, .75rem);
}

:is(#flow-panel-participants .qa-embedded, .question-admin-page) .participant-card-group__badge{
  display:inline-flex;
  align-items:center;
  gap:.45rem;
  padding:.38rem .8rem;
  border-radius:.85rem;
  border:1px solid rgba(72,118,190,.45);
  background:linear-gradient(135deg, rgba(24,48,82,.9), rgba(14,28,48,.92));
  box-shadow:inset 0 1px 0 rgba(255,255,255,.05);
  color:#d9e8ff;
  font-size:0.585rem;
  letter-spacing:.04em;
}

:is(#flow-panel-participants .qa-embedded, .question-admin-page) .participant-card-group__leaders{
  display:flex;
  align-items:center;
  flex-wrap:wrap;
  gap:.45rem;
  margin-left:.65rem;
  min-width:0;
}

:is(#flow-panel-participants .qa-embedded, .question-admin-page) .participant-card-group__leaders[hidden]{
  display:none !important;
}

:is(#flow-panel-participants .qa-embedded, .question-admin-page) .participant-card-group__leaders-label{
  font-size:0.51rem;
  letter-spacing:.12em;
  text-transform:uppercase;
  color:rgba(162,188,224,.72);
}

:is(#flow-panel-participants .qa-embedded, .question-admin-page) .participant-card-group__leaders-list{
  display:flex;
  flex-wrap:wrap;
  align-items:center;
  gap:.4rem;
}

:is(#flow-panel-participants .qa-embedded, .question-admin-page) .participant-card-group__badge-label{
  font-size:0.525rem;
  text-transform:uppercase;
  letter-spacing:.12em;
  color:rgba(172,196,228,.76);
}

:is(#flow-panel-participants .qa-embedded, .question-admin-page) .participant-card-group__badge-value{
  font-weight:700;
  font-size:0.69rem;
  color:#f2f8ff;
}

:is(#flow-panel-participants .qa-embedded, .question-admin-page) .participant-card-group__count{
  margin-left:auto;
  font-size:0.585rem;
  color:rgba(172,196,228,.76);
}

:is(#flow-panel-participants .qa-embedded, .question-admin-page) .participant-group-gl{
  display:flex;
  flex-direction:column;
  align-items:flex-start;
  gap:.15rem;
  padding:.32rem .65rem;
  border-radius:.75rem;
  border:1px solid rgba(84,132,202,.42);
  background:linear-gradient(135deg, rgba(26,52,90,.88), rgba(16,32,56,.9));
  box-shadow:inset 0 1px 0 rgba(255,255,255,.04);
  color:#e4f0ff;
  min-width:0;
}

:is(#flow-panel-participants .qa-embedded, .question-admin-page) .participant-group-gl__name{
  font-weight:600;
  font-size:0.6375rem;
  color:#f4f9ff;
}

:is(#flow-panel-participants .qa-embedded, .question-admin-page) .participant-group-gl__meta{
  font-size:0.525rem;
  color:rgba(188,210,240,.78);
  letter-spacing:.04em;
}

:is(#flow-panel-participants .qa-embedded, .question-admin-page) .participant-card-group__cards{
  display:grid;
  grid-template-columns:repeat(auto-fit, minmax(18.5rem, 1fr));
  gap:clamp(.75rem, 1.8vw, 1.15rem);
}

:is(#flow-panel-participants .qa-embedded, .question-admin-page) .participant-card{
  position:relative;
  display:flex;
  flex-direction:column;
  gap:clamp(.6rem, 1.4vw, .85rem);
  padding:clamp(.95rem, 2vw, 1.3rem) clamp(1.1rem, 2.5vw, 1.6rem);
  border-radius:clamp(1.05rem, 2.2vw, 1.45rem);
  border:1px solid rgba(70,112,168,.55);
  background:linear-gradient(180deg, rgba(16,32,56,.88), rgba(10,20,38,.94));
  box-shadow:0 18px 44px rgba(4,12,28,.48), inset 0 1px 0 rgba(255,255,255,.04);
  transition:border-color .18s ease, box-shadow .18s ease, transform .18s ease;
}

:is(#flow-panel-participants .qa-embedded, .question-admin-page) .participant-card--mail-sent:not(.is-selected){
  border-color:rgba(34,197,94,.45);
}

:is(#flow-panel-participants .qa-embedded, .question-admin-page) .participant-card--mail-pending:not(.is-selected){
  border-color:rgba(250,204,21,.42);
}

:is(#flow-panel-participants .qa-embedded, .question-admin-page) .participant-card--mail-error:not(.is-selected){
  border-color:rgba(248,113,113,.6);
  box-shadow:0 0 0 1px rgba(248,113,113,.35), 0 22px 52px rgba(40,12,18,.55);
}

:is(#flow-panel-participants .qa-embedded, .question-admin-page) .participant-card--mail-missing:not(.is-selected){
  border-color:rgba(148,163,184,.4);
}

:is(#flow-panel-participants .qa-embedded, .question-admin-page) .participant-card:hover{
  border-color:rgba(30,200,255,.58);
  box-shadow:0 22px 54px rgba(4,16,36,.55);
  transform:translateY(-2px);
}

:is(#flow-panel-participants .qa-embedded, .question-admin-page) .participant-card--mail-sent:hover:not(.is-selected){
  border-color:rgba(34,197,94,.52);
}

:is(#flow-panel-participants .qa-embedded, .question-admin-page) .participant-card--mail-pending:hover:not(.is-selected){
  border-color:rgba(250,204,21,.48);
}

:is(#flow-panel-participants .qa-embedded, .question-admin-page) .participant-card--mail-error:hover:not(.is-selected){
  border-color:rgba(248,113,113,.68);
  box-shadow:0 0 0 1px rgba(248,113,113,.45), 0 26px 60px rgba(42,12,18,.6);
}

:is(#flow-panel-participants .qa-embedded, .question-admin-page) .participant-card--mail-missing:hover:not(.is-selected){
  border-color:rgba(148,163,184,.45);
}

:is(#flow-panel-participants .qa-embedded, .question-admin-page) .participant-card.is-selected{
  border-color:rgba(54,198,255,.68);
  box-shadow:0 0 0 1px rgba(54,198,255,.45), 0 24px 58px rgba(6,24,42,.55);
}

:is(#flow-panel-participants .qa-embedded, .question-admin-page) .participant-card__header{
  display:flex;
  flex-direction:column;
  align-items:flex-start;
  gap:clamp(.55rem, 1.4vw, .85rem);
}

:is(#flow-panel-participants .qa-embedded, .question-admin-page) .participant-card__no{
  flex:0 0 auto;
  min-width:3.2rem;
  padding:.35rem .65rem;
  border-radius:.8rem;
  border:1px solid rgba(46,141,255,.45);
  background:linear-gradient(135deg, rgba(30,200,255,.22), rgba(14,110,190,.2));
  font-variant-numeric:tabular-nums;
  font-weight:700;
  font-size:0.585rem;
  letter-spacing:.08em;
  color:#d2ebff;
  text-align:center;
}

:is(#flow-panel-participants .qa-embedded, .question-admin-page) .participant-card.is-selected .participant-card__no{
  border-color:rgba(54,198,255,.65);
  background:linear-gradient(135deg, rgba(48,204,255,.28), rgba(24,128,210,.24));
  color:#f1fbff;
}

:is(#flow-panel-participants .qa-embedded, .question-admin-page) .participant-card__header-main{
  flex:1 1 auto;
  display:flex;
  flex-direction:column;
  gap:clamp(.4rem, 1vw, .55rem);
}

:is(#flow-panel-participants .qa-embedded, .question-admin-page) .participant-name{
  display:flex;
  flex-direction:column;
  gap:.18rem;
  align-items:flex-start;
}

:is(#flow-panel-participants .qa-embedded, .question-admin-page) .participant-name__phonetic{
  font-size:0.5625rem;
  color:var(--muted);
  letter-spacing:.08em;
}

:is(#flow-panel-participants .qa-embedded, .question-admin-page) .participant-name__text{
  font-size:0.735rem;
  font-weight:600;
  color:#f4f9ff;
}

:is(#flow-panel-participants .qa-embedded, .question-admin-page) .participant-card__badges{
  display:flex;
  flex-wrap:wrap;
  align-items:center;
  gap:.45rem;
}

:is(#flow-panel-participants .qa-embedded, .question-admin-page) .participant-badge{
  display:inline-flex;
  align-items:center;
  gap:.35rem;
  padding:.32rem .65rem;
  border-radius:.75rem;
  border:1px solid rgba(72,114,176,.45);
  background:linear-gradient(135deg, rgba(18,42,74,.88), rgba(10,26,46,.9));
  box-shadow:inset 0 1px 0 rgba(255,255,255,.03);
  font-size:0.54rem;
  letter-spacing:.04em;
  color:#d0e4ff;
}

:is(#flow-panel-participants .qa-embedded, .question-admin-page) .participant-mail-badge{
  gap:.4rem;
  padding:.34rem .75rem;
}

:is(#flow-panel-participants .qa-embedded, .question-admin-page) .participant-mail-badge__icon{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  width:1rem;
  height:1rem;
}

:is(#flow-panel-participants .qa-embedded, .question-admin-page) .participant-mail-badge__icon svg{
  width:100%;
  height:100%;
}

:is(#flow-panel-participants .qa-embedded, .question-admin-page) .participant-mail-badge__text{
  font-weight:600;
}

:is(#flow-panel-participants .qa-embedded, .question-admin-page) .participant-mail-badge--sent{
  border-color:rgba(34,197,94,.55);
  background:linear-gradient(135deg, rgba(14,68,48,.85), rgba(12,52,36,.9));
  color:#d1fae5;
}

:is(#flow-panel-participants .qa-embedded, .question-admin-page) .participant-mail-badge--pending{
  border-color:rgba(250,204,21,.45);
  background:linear-gradient(135deg, rgba(68,52,12,.85), rgba(44,34,10,.92));
  color:#fde68a;
}

:is(#flow-panel-participants .qa-embedded, .question-admin-page) .participant-mail-badge--error{
  border-color:rgba(248,113,113,.55);
  background:linear-gradient(135deg, rgba(94,24,32,.9), rgba(58,16,22,.92));
  color:#fecaca;
}

:is(#flow-panel-participants .qa-embedded, .question-admin-page) .participant-mail-badge--missing{
  border-color:rgba(148,163,184,.45);
  background:linear-gradient(135deg, rgba(36,48,64,.85), rgba(24,32,48,.92));
  color:#e2e8f0;
}

:is(#flow-panel-participants .qa-embedded, .question-admin-page) .participant-badge__label{
  font-size:0.51rem;
  letter-spacing:.12em;
  text-transform:uppercase;
  color:rgba(166,190,220,.72);
}

:is(#flow-panel-participants .qa-embedded, .question-admin-page) .participant-badge__value{
  font-weight:600;
  font-size:0.66rem;
  color:#f0f6ff;
}

:is(#flow-panel-participants .qa-embedded, .question-admin-page) .participant-card.is-selected .participant-badge{
  border-color:rgba(54,198,255,.42);
  background:linear-gradient(135deg, rgba(28,72,102,.9), rgba(18,46,72,.92));
  color:#e5f7ff;
}

:is(#flow-panel-participants .qa-embedded, .question-admin-page) .participant-card__body{
  display:flex;
  flex-direction:column;
  gap:clamp(.6rem, 1.5vw, .85rem);
}

:is(#flow-panel-participants .qa-embedded, .question-admin-page) .participant-card__actions{
  display:flex;
  flex-direction:column;
  gap:.55rem;
}

:is(#flow-panel-participants .qa-embedded, .question-admin-page) .participant-card__buttons{
  display:flex;
  flex-wrap:wrap;
  align-items:center;
  gap:.45rem;
}

:is(#flow-panel-participants .qa-embedded, .question-admin-page) .participant-card__link-row{
  flex-wrap:nowrap;
  width:100%;
}

:is(#flow-panel-participants .qa-embedded, .question-admin-page) .participant-card__link-row .share-link-preview{
  flex:1 1 0%;
  min-width:0;
  max-width:max(0px, calc(100% - 6.5rem));
  margin-top:0;
}

:is(#flow-panel-participants .qa-embedded, .question-admin-page) .participant-card__link-row .link-action-btn{
  flex:0 0 auto;
}

:is(#flow-panel-participants .qa-embedded, .question-admin-page) .participant-card__link-row .link-placeholder{
  flex:1 1 auto;
}

:is(#flow-panel-participants .qa-embedded, .question-admin-page) .participant-card__warning{
  margin-top:.2rem;
}

:is(#flow-panel-participants .qa-embedded, .question-admin-page) .change-chip{
  display:inline-flex;
  align-items:center;
  gap:.3rem;
  margin-top:.25rem;
  padding:.2rem .55rem;
  border-radius:.75rem;
  font-size:0.54rem;
  font-weight:600;
  letter-spacing:.08em;
  text-transform:uppercase;
  background:rgba(62,120,210,.24);
  color:#e2edff;
  box-shadow:0 8px 20px rgba(8,22,46,.4), inset 0 1px 0 rgba(255,255,255,.05);
}

:is(#flow-panel-participants .qa-embedded, .question-admin-page) .change-chip--added{
  background:rgba(40,200,155,.25);
  color:#dff8ef;
  box-shadow:0 8px 18px rgba(12,48,36,.45), inset 0 1px 0 rgba(255,255,255,.05);
}

:is(#flow-panel-participants .qa-embedded, .question-admin-page) .change-chip--updated{
  background:rgba(250,196,90,.25);
  color:#fff4d6;
  box-shadow:0 8px 18px rgba(64,36,8,.4), inset 0 1px 0 rgba(255,255,255,.05);
}

:is(#flow-panel-participants .qa-embedded, .question-admin-page) .change-chip--removed{
  background:rgba(255,109,109,.24);
  color:#ffe0e0;
  box-shadow:0 8px 18px rgba(76,14,18,.45), inset 0 1px 0 rgba(255,255,255,.05);
}

:is(#flow-panel-participants .qa-embedded, .question-admin-page) .duplicate-warning{
  display:flex;
  align-items:center;
  gap:.4rem;
  padding:.55rem .65rem;
  border-radius:.85rem;
  border:1px solid rgba(255,194,71,.32);
  background:rgba(255,194,71,.14);
  color:#ffe9b6;
  font-size:0.615rem;
  line-height:1.5;
  box-shadow:inset 0 1px 0 rgba(255,255,255,.04);
}

:is(#flow-panel-participants .qa-embedded, .question-admin-page) .duplicate-warning__icon{
  display:inline-flex;
  width:1rem;
  height:1rem;
  color:inherit;
}

:is(#flow-panel-participants .qa-embedded, .question-admin-page) .duplicate-warning__icon svg{
  width:100%;
  height:100%;
  fill:currentColor;
}

:is(#flow-panel-participants .qa-embedded, .question-admin-page) .duplicate-warning__text{
  flex:1 1 auto;
  color:inherit;
}

:is(#flow-panel-participants .qa-embedded, .question-admin-page) .link-action-row{
  display:flex;
  flex-wrap:wrap;
  align-items:center;
  gap:.45rem;
}

:is(#flow-panel-participants .qa-embedded, .question-admin-page) .link-action-btn{
  display:inline-flex;
  align-items:center;
  gap:.45rem;
  padding:.38rem .85rem;
  border-radius:.75rem;
  border:1px solid rgba(84,134,204,.55);
  background:linear-gradient(182deg, rgba(20,40,70,.9), rgba(12,26,48,.92));
  color:#d7e8ff;
  font-size:0.585rem;
  font-weight:600;
  letter-spacing:.01em;
  cursor:pointer;
  transition:transform .16s ease, box-shadow .18s ease, filter .18s ease;
}

:is(#flow-panel-participants .qa-embedded, .question-admin-page) .link-action-btn svg{
  width:1rem;
  height:1rem;
  flex:0 0 auto;
}

:is(#flow-panel-participants .qa-embedded, .question-admin-page) .link-action-btn:hover{
  transform:translateY(-1px);
  box-shadow:0 12px 26px rgba(2,8,18,.4);
  filter:brightness(1.08);
}

:is(#flow-panel-participants .qa-embedded, .question-admin-page) .link-action-btn:active{
  transform:translateY(1px);
  box-shadow:none;
}

:is(#flow-panel-participants .qa-embedded, .question-admin-page) .link-action-btn:focus-visible{
  outline:2px solid rgba(30,200,255,.65);
  outline-offset:2px;
}

:is(#flow-panel-participants .qa-embedded, .question-admin-page) .link-action-btn.copy-link-btn{
  border-color:rgba(30,160,255,.4);
  background:linear-gradient(180deg, rgba(18,54,88,.9), rgba(12,34,60,.92));
}

:is(#flow-panel-participants .qa-embedded, .question-admin-page) .link-action-btn.cancel-link-btn{
  border-color:rgba(255,145,145,.42);
  background:linear-gradient(182deg, rgba(78,28,38,.9), rgba(54,18,26,.92));
  color:#ffe5e8;
}

:is(#flow-panel-participants .qa-embedded, .question-admin-page) .link-action-btn.edit-link-btn{
  border-color:rgba(168,138,255,.38);
  background:linear-gradient(182deg, rgba(42,32,86,.92), rgba(28,20,64,.94));
}

:is(#flow-panel-participants .qa-embedded, .question-admin-page) .link-action-btn.relocate-link-btn{
  border-color:rgba(255,196,120,.42);
  background:linear-gradient(182deg, rgba(74,50,16,.9), rgba(52,34,10,.92));
  color:#ffeccc;
}

:is(#flow-panel-participants .qa-embedded, .question-admin-page) .link-action-btn.delete-link-btn{
  border-color:rgba(255,107,107,.45);
  background:linear-gradient(182deg, rgba(78,22,32,.92), rgba(54,14,22,.94));
  color:#ffe5e5;
}

:is(#flow-panel-participants .qa-embedded, .question-admin-page) .link-placeholder{
  padding:.35rem .85rem;
  border-radius:.75rem;
  border:1px dashed rgba(94,142,210,.45);
  background:rgba(12,24,42,.6);
  font-size:0.5625rem;
  color:var(--muted);
}

:is(#flow-panel-participants .qa-embedded, .question-admin-page) .share-link-preview{
  display:block;
  margin-top:0;
  font-size:0.585rem;
  color:#9dd4ff;
  word-break:break-all;
  text-decoration:none;
}

:is(#flow-panel-participants .qa-embedded, .question-admin-page) .share-link-preview:hover{
  text-decoration:underline;
  color:#c9e8ff;
}

:is(#flow-panel-participants .qa-embedded, .question-admin-page) .participant-card.is-duplicate{
  box-shadow:0 0 0 1px rgba(255,194,71,.35), 0 22px 50px rgba(34,22,6,.5);
}

:is(#flow-panel-participants .qa-embedded, .question-admin-page) .participant-card.is-added{
  border-color:rgba(24,209,143,.55);
  box-shadow:0 0 0 1px rgba(24,209,143,.4), 0 22px 52px rgba(10,38,28,.5);
}

:is(#flow-panel-participants .qa-embedded, .question-admin-page) .participant-card.is-updated{
  border-color:rgba(255,194,71,.55);
  box-shadow:0 0 0 1px rgba(255,194,71,.42), 0 22px 52px rgba(46,28,4,.48);
}

:is(#flow-panel-participants .qa-embedded, .question-admin-page) .participant-card.is-cancelled-origin{
  border-color:rgba(255,120,140,.48);
  background:linear-gradient(180deg, rgba(86,24,32,.86), rgba(50,14,20,.9));
  color:#ffe4e8;
}

:is(#flow-panel-participants .qa-embedded, .question-admin-page) .participant-card.is-relocated-destination{
  border-color:rgba(255,182,94,.48);
  background:linear-gradient(180deg, rgba(94,56,20,.85), rgba(54,32,14,.9));
  color:#fff1db;
}

:is(#flow-panel-participants .qa-embedded, .question-admin-page) .participant-card.is-cancelled-origin .participant-badge__value,
:is(#flow-panel-participants .qa-embedded, .question-admin-page) .participant-card.is-relocated-destination .participant-badge__value{
  color:inherit;
}

#flow-panel-participants .qa-embedded .loading-panel,
#flow-panel-operator .operator-embedded .loading-panel{
  min-width:clamp(18rem, 48vw, 28rem);
  max-width:clamp(22rem, 56vw, 34rem);
}

#flow-panel-participants .qa-embedded .loader-steps{
  padding:0 clamp(.6rem, 1.6vw, 1.2rem);
}

.qa-embedded .admin-main,
.operator-embedded .layout-grid{
  display:flex;
  flex-direction:column;
  gap:1.25rem;
  flex:1 1 auto;
  min-height:0;
}

.qa-embedded .qa-admin-primary{
  position:relative;
  display:flex;
  flex-direction:column;
  gap:clamp(.9rem, 1.8vw, 1.3rem);
  flex:1 1 auto;
  min-height:0;
}

.qa-embedded .admin-main{
  padding:0;
  background:transparent;
  box-shadow:none;
}

.qa-embedded .admin-main.is-loading-hidden{
  visibility:hidden;
  pointer-events:none;
}

.qa-embedded .admin-module.is-loading-hidden{
  visibility:hidden;
  pointer-events:none;
}

.qa-embedded .loading-overlay,
.operator-embedded .loading-overlay{
  border-radius:clamp(1rem, 2.4vw, 1.45rem);
  overflow:hidden;
}

@media (max-width: 960px){
  .flow-tabpanels{
    flex-direction:column;
  }
}

.qa-embedded .loader-steps,
.operator-embedded .loader-steps{
  margin-top:1rem;
}

.operator-embedded #op-main-container{
  display:flex;
  flex-direction:column;
  gap:1.25rem;
  flex:1 1 auto;
  min-height:0;
}

#op-questions-panel{
  padding: 1.5vh 1.5vw;
  overflow:visible;
  flex:1 1 auto;
  min-height:0;
}

#op-questions-content{
  display:flex;
  flex-direction:column;
  gap:0;
  overflow:hidden;
  padding:0;
}

#op-questions-content .cards-scroll{
  margin-top: 1vh;
  flex:1 1 auto;
  min-height:0;
  overflow:auto;
  padding:0 clamp(.25rem, 1vw, .75rem);
  scrollbar-gutter:stable;
  scrollbar-width:thin;
  scrollbar-color:rgba(108,132,168,.6) rgba(18,24,38,.7);
}

#op-questions-content .cards-scroll::-webkit-scrollbar{ width:10px; }
#op-questions-content .cards-scroll::-webkit-scrollbar-track{
  background:rgba(10,16,26,.7);
  border-radius:999px;
}

#op-questions-content .cards-scroll::-webkit-scrollbar-thumb{
  background:linear-gradient(180deg, rgba(46,141,255,.5), rgba(30,200,255,.35));
  border-radius:999px;
  border:2px solid rgba(9,14,24,.9);
}

#op-questions-content .cards-scroll::-webkit-scrollbar-thumb:hover{
  background:linear-gradient(180deg, rgba(46,141,255,.7), rgba(30,200,255,.5));
}

.operator-embedded #op-action-panel{
  position:static;
  display:flex;
  flex-wrap:wrap;
  align-items:center;
  gap:clamp(.55rem, 1.4vw, .85rem);
  padding:clamp(.7rem, 1.6vw, 1rem) clamp(.85rem, 2vw, 1.2rem);
  border-radius:clamp(.9rem, 1.9vw, 1.2rem);
  background:linear-gradient(182deg, rgba(18,30,52,.9), rgba(10,18,34,.92));
  border:1px solid rgba(58,104,168,.45);
  box-shadow:0 18px 32px rgba(0,0,0,.32), inset 0 1px 0 rgba(255,255,255,.04);
  backdrop-filter:blur(12px);
}

.operator-embedded #op-action-panel[hidden]{
  display:none;
}

.operator-embedded #op-action-panel .btn{
  width:auto;
  flex:0 0 auto;
  min-width:clamp(9rem, 13vw, 11rem);
}

.operator-embedded #op-action-panel #op-selected-info{
  order:40;
  margin-left:auto;
  padding-left:clamp(.5rem, 1.2vw, .85rem);
  color:#c6d7f0;
  font-size:0.6375rem;
  line-height:1.25;
}

.operator-embedded #op-action-panel .action-panel-right{
  order:50;
  margin-left:clamp(.6rem, 1.6vw, 1rem);
  width:auto;
  display:none;
  align-items:center;
  justify-content:flex-end;
  gap:clamp(.5rem, 1.2vw, .85rem);
}

.operator-embedded #op-action-panel[data-selection="multi"] .action-panel-right{
  display:flex;
}

.operator-embedded #op-action-panel .action-panel-right .btn{
  min-width:clamp(10rem, 14vw, 12.5rem);
}

@media (max-width: 860px){
  .operator-embedded #op-action-panel{
    flex-direction:column;
    align-items:stretch;
  }

  .operator-embedded #op-action-panel .btn{
    width:100%;
    min-width:0;
  }

  .operator-embedded #op-action-panel #op-selected-info{
    order:60;
    margin-left:0;
    padding-left:0;
  }

  .operator-embedded #op-action-panel .action-panel-right{
    width:100%;
    margin-left:0;
    justify-content:flex-start;
  }
}

.operator-embedded #op-dictionary-action-panel,
.operator-embedded #dictionary-action-panel,
.operator-embedded #op-pickup-action-panel{
  position:static;
  margin-top:clamp(.75rem, 1.6vw, 1.1rem);
  display:grid;
  grid-template-columns:repeat(auto-fit, minmax(9.5rem, 1fr));
  align-items:center;
  gap:clamp(.55rem, 1.4vw, .85rem);
  padding:clamp(.7rem, 1.6vw, 1rem) clamp(.85rem, 2vw, 1.2rem);
  border-radius:clamp(.9rem, 1.9vw, 1.2rem);
  background:linear-gradient(182deg, rgba(18,30,52,.9), rgba(10,18,34,.92));
  border:1px solid rgba(58,104,168,.45);
  box-shadow:0 18px 32px rgba(0,0,0,.32), inset 0 1px 0 rgba(255,255,255,.04);
  backdrop-filter:blur(12px);
}
.operator-embedded #op-dictionary-action-panel[hidden],
.operator-embedded #dictionary-action-panel[hidden],
.operator-embedded #op-pickup-action-panel[hidden]{ display:none; }
.operator-embedded #op-dictionary-action-panel .btn,
.operator-embedded #dictionary-action-panel .btn,
.operator-embedded #op-pickup-action-panel .btn{ width:100%; }
.operator-embedded #op-dictionary-action-panel #op-dictionary-selected-info,
.operator-embedded #dictionary-action-panel #dictionary-selected-info,
.operator-embedded #op-pickup-action-panel #op-pickup-selected-info{
  grid-column:1 / -1;
  color:#c6d7f0;
  font-size:0.6375rem;
}
.operator-embedded #op-dictionary-action-panel .action-panel-right,
.operator-embedded #dictionary-action-panel .action-panel-right,
.operator-embedded #op-pickup-action-panel .action-panel-right{
  margin-left:0;
  justify-content:flex-end;
  grid-column:1 / -1;
  gap:.5rem;
  flex-wrap:wrap;
}

.operator-embedded__actions{
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:1rem;
  flex-wrap:wrap;
  padding:.25rem 0 .5rem;
}

.operator-embedded__buttons{
  display:flex;
  gap:.5rem;
}

@media (max-width: 720px){
  .operator-embedded #op-action-panel{
    grid-template-columns:repeat(auto-fit, minmax(11rem, 1fr));
  }
}

.auth-card{
  display:flex;
  align-items:center;
  justify-content:center;
  padding:1.5rem 1.75rem;
  border-radius:.9rem;
  border:1px dashed rgba(70,110,150,.5);
  background:rgba(8,18,30,.7);
  color:var(--muted);
  padding:1.2rem;
  text-align:center;
}

.auth-card__body{
  display:flex;
  flex-direction:column;
  gap:1rem;
  max-width:28rem;
}

.auth-card__title{
  margin:0;
  font-size:0.825rem;
  color:#d5e9ff;
}

/* Compact embedded panel adjustments */

.gl-panel{
  display:flex;
  flex-direction:column;
  flex:1 1 auto;
  min-height:0;
  gap:clamp(1rem, 1.8vw, 1.35rem);
}

.gl-panel-switcher{
  display:flex;
  flex-direction:column;
  gap:clamp(.75rem, 1.8vw, 1.2rem);
  flex:1 1 auto;
  min-height:0;
}

.gl-panel-tabs{
  display:flex;
  align-items:center;
  flex-wrap:wrap;
  gap:clamp(.45rem, 1.4vw, .85rem);
  padding:clamp(.45rem, 1.2vw, .75rem) clamp(.6rem, 1.6vw, 1rem);
  border-radius:clamp(1.1rem, 2.4vw, 1.6rem);
  border:1px solid rgba(58, 104, 162, .45);
  background:linear-gradient(135deg, rgba(12, 32, 52, .85), rgba(10, 24, 44, .88));
  box-shadow:0 12px 28px rgba(4, 12, 30, .4), inset 0 1px 0 rgba(255, 255, 255, .05);
}

.gl-panel-tabs__label{
  display:inline-flex;
  align-items:center;
  font-size:clamp(0.51rem, 0.75vw, 0.585rem);
  letter-spacing:.12em;
  text-transform:uppercase;
  color:rgba(168, 208, 255, .85);
  font-weight:700;
}

.gl-panel-tabs__buttons{
  display:flex;
  flex:1 1 auto;
  flex-wrap:wrap;
  gap:clamp(.45rem, 1.2vw, .75rem);
}

.gl-panel-tab{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  gap:.35rem;
  padding:.35rem .9rem;
  border-radius:999px;
  border:1px solid rgba(56, 120, 186, .45);
  background:rgba(12, 26, 44, .7);
  color:rgba(202, 220, 244, .88);
  font-size:0.6375rem;
  font-weight:600;
  letter-spacing:.02em;
  cursor:pointer;
  transition:transform .18s ease, border-color .18s ease, background .18s ease, color .18s ease;
}

.gl-panel-tab__label{
  display:inline-flex;
  align-items:center;
  gap:.35rem;
}

.gl-panel-tab:hover{
  transform:translateY(-1px);
  border-color:rgba(30, 200, 255, .55);
  color:#e6f6ff;
}

.gl-panel-tab.is-active,
.gl-panel-tab[aria-selected="true"]{
  background:linear-gradient(135deg, rgba(46, 141, 255, .42), rgba(30, 200, 255, .28));
  border-color:rgba(30, 200, 255, .7);
  color:#f5fbff;
  box-shadow:0 0 0 1px rgba(14, 160, 230, .35);
}

.gl-panel-tab[disabled]{
  cursor:not-allowed;
  opacity:.55;
}

.gl-panel-tab:focus-visible{
  outline:2px solid rgba(110, 200, 255, .8);
  outline-offset:2px;
}

.gl-panel-surfaces{
  flex:1 1 auto;
  min-height:0;
  display:flex;
}

.gl-panel-tabpanel{
  flex:1 1 auto;
  min-height:0;
  display:flex;
  flex-direction:column;
}

.gl-panel-tabpanel[hidden]{
  display:none !important;
}

.gl-panel-scroll{
  flex:1 1 auto;
  min-height:0;
  overflow:auto;
  display:flex;
  flex-direction:column;
  gap:clamp(1rem, 1.8vw, 1.35rem);
}

.gl-config-grid{
  display:grid;
  gap:clamp(1rem, 2vw, 1.5rem);
  grid-template-columns:repeat(auto-fit, minmax(20rem, 1fr));
}

.gl-config-card,
.gl-applications-card{
  background:rgba(10, 26, 42, .6);
  border:1px solid rgba(120, 160, 200, .16);
  border-radius:1rem;
  padding:0.5vw;
  display:flex;
  flex-direction:column;
  gap:1vh;
}

.gl-card-body,
.gl-config-content{
  display:flex;
  flex-direction:column;
  gap:clamp(.75rem, 1.2vw, 1rem);
}

.gl-card-header{
  display:flex;
  align-items:flex-start;
  gap:.75rem;
  justify-content:space-between;
}
.gl-card-header--sub{align-items:center;gap:.65rem;flex-wrap:wrap;}

.gl-card-title{
  margin:0;
  font-size:0.825rem;
  color:#d8eaff;
}
.gl-card-subtitle{margin:0;font-size:0.75rem;color:#d8eaff;}

.gl-card-status{
  margin:0;
  font-size:0.6375rem;
  color:rgba(205, 230, 255, .75);
}

.gl-card-status[data-variant="success"]{color:#7ae6ff;}
.gl-card-status[data-variant="error"]{color:#ff9aa8;}
.gl-card-status[data-variant="warning"]{color:#ffd27a;}

.gl-internal-card{border:1px solid rgba(120, 160, 200, .22);border-radius:.9rem;padding:clamp(.9rem, 1.2vw, 1.1rem);background:rgba(8, 22, 38, .6);}
.gl-internal-body{display:grid;gap:clamp(.9rem, 1.6vw, 1.2rem);grid-template-columns:minmax(0, 1.6fr) minmax(0, 1fr);align-items:start;}
@media(max-width:960px){.gl-internal-body{grid-template-columns:1fr;}}
.gl-internal-actions{display:flex;gap:.45rem;align-items:center;flex-wrap:wrap;}
.gl-internal-form{display:flex;flex-direction:column;gap:.9rem;}
.gl-internal-grid{display:grid;grid-template-columns:repeat(auto-fit, minmax(220px, 1fr));gap:.75rem;}
.gl-input{display:flex;flex-direction:column;gap:.35rem;}
.gl-input__label{font-size:0.675rem;font-weight:600;color:rgba(210, 232, 255, .85);}
.gl-input--full{grid-column:1/-1;}
.gl-internal-shifts{border:1px solid rgba(120, 160, 200, .28);border-radius:.75rem;padding:.75rem .9rem;display:flex;flex-direction:column;gap:.45rem;background:rgba(12, 30, 50, .55);}
.gl-internal-shifts__title{margin:0;font-size:0.7125rem;font-weight:700;color:#dbe8ff;}
.gl-internal-shifts__note{margin:0;color:rgba(200, 225, 255, .7);font-size:0.6375rem;}
.gl-internal-shifts__list{display:grid;grid-template-columns:repeat(auto-fit, minmax(220px, 1fr));gap:.45rem;}
.gl-internal-shifts__item{display:flex;align-items:flex-start;gap:.45rem;border:1px solid rgba(120, 160, 200, .2);border-radius:.65rem;padding:.5rem .65rem;background:rgba(10, 26, 42, .65);color:#e5f0ff;}
.gl-internal-shifts__label{font-size:0.675rem;color:rgba(220, 234, 255, .9);}
.gl-internal-shifts__meta{font-size:0.6rem;color:rgba(200, 220, 245, .7);}
.gl-internal-shifts__empty{margin:0;color:rgba(200, 220, 245, .8);}
.gl-internal-list__container{border:1px solid rgba(120, 160, 200, .24);border-radius:.9rem;background:rgba(8, 22, 38, .55);padding:.9rem;display:flex;flex-direction:column;gap:.45rem;}
.gl-internal-list__header{display:flex;align-items:baseline;gap:.5rem;justify-content:space-between;flex-wrap:wrap;}
.gl-internal-list__title{margin:0;font-size:0.7125rem;color:#dbe8ff;}
.gl-internal-list__hint{margin:0;font-size:0.6375rem;color:rgba(195, 220, 245, .75);}
.gl-internal-list{list-style:none;margin:0;padding:0;display:flex;flex-direction:column;gap:.4rem;}
.gl-internal-list__item{margin:0;}
.gl-internal-list__button{width:100%;text-align:left;display:flex;justify-content:space-between;gap:.55rem;align-items:center;padding:.55rem .75rem;border:1px solid rgba(120, 160, 200, .25);border-radius:.65rem;background:rgba(12, 26, 44, .6);color:#e8f2ff;}
.gl-internal-list__button:hover{border-color:rgba(150, 200, 255, .6);background:rgba(16, 34, 54, .75);}
.gl-internal-list__name{font-weight:700;}
.gl-internal-list__role{font-size:0.675rem;color:rgba(195, 220, 245, .78);}
.gl-internal-list__empty{margin:0;color:rgba(195, 220, 245, .8);}
.gl-applicant-matrix__badges{display:flex;gap:.4rem;flex-wrap:wrap;margin-bottom:.35rem;}
.gl-badge{display:inline-flex;align-items:center;gap:0.1875rem;padding:0.15rem 0.4125rem;border-radius:749.25px;font-size:0.585rem;font-weight:700;line-height:1;background:rgba(12, 28, 48, .6);border:0.75px solid rgba(120, 160, 200, .3);color:#dfefff;}
.gl-badge--source[data-source-type="internal"]{background:rgba(40, 130, 90, .35);border-color:rgba(80, 200, 140, .6);color:#caffe0;}
.gl-badge--source[data-source-type="external"]{background:rgba(70, 110, 160, .35);border-color:rgba(120, 170, 220, .5);color:#dbeaff;}
.gl-badge--role{background:rgba(110, 90, 180, .3);border-color:rgba(170, 150, 230, .45);color:#f1e7ff;}
.gl-shift-entry[data-source-type="internal"]{border-color:rgba(90, 180, 130, .35);}
.gl-shift-entry[data-source-type="internal"] .gl-shift-entry__name{color:#d0ffe6;}

.gl-config-row{
  display:grid;
  gap:.5rem;
  grid-template-columns:minmax(6rem, 8rem) minmax(0, 1fr);
}

.gl-config-label{
  font-weight:600;
  font-size:0.7125rem;
  color:rgba(210, 232, 255, .85);
}

.gl-config-control{
  display:flex;
  flex-direction:column;
  gap:.4rem;
}
.gl-config-row--schedule-teams{
  align-items:flex-start;
}
.gl-config-control--schedule-teams{
  gap:.6rem;
}
.gl-schedule-teams{
  display:flex;
  flex-direction:column;
  gap:.6rem;
}
.gl-schedule-teams__empty{
  margin:0;
  padding:.75rem 1rem;
  border-radius:.75rem;
  border:1px dashed rgba(120, 160, 200, .4);
  background:rgba(12, 24, 42, .55);
  color:rgba(200, 225, 255, .7);
}
.gl-schedule-teams__list{
  display:flex;
  flex-direction:column;
  gap:.65rem;
}
.gl-schedule-team{
  border:1px solid rgba(120, 160, 200, .28);
  border-radius:.75rem;
  background:rgba(12, 28, 48, .58);
  padding:.75rem clamp(.85rem, 1.8vw, 1.1rem);
  display:flex;
  flex-direction:column;
  gap:.55rem;
}
.gl-schedule-team__header{
  display:flex;
  flex-wrap:wrap;
  align-items:flex-end;
  justify-content:space-between;
  gap:.65rem;
}
.gl-schedule-team__title{
  display:flex;
  flex-direction:column;
  gap:.1rem;
}
.gl-schedule-team__label{
  font-weight:600;
  color:rgba(215, 235, 255, .92);
}
.gl-schedule-team__date{
  font-size:0.615rem;
  color:rgba(195, 220, 250, .65);
}
.gl-schedule-team__field{
  display:flex;
  align-items:center;
  gap:.45rem;
}
.gl-schedule-team__field-label{
  font-size:0.6375rem;
  color:rgba(200, 225, 255, .75);
  white-space:nowrap;
}
.gl-schedule-team__input{
  max-width:6rem;
}
.gl-schedule-team__note{
  margin:0;
  font-size:0.585rem;
  color:rgba(200, 225, 255, .68);
}

.gl-config-hint{
  font-size:0.6rem;
  color:rgba(200, 225, 255, .6);
  margin:0;
}
.gl-config-meta{
  margin:.25rem 0 .75rem;
  font-size:0.585rem;
  color:rgba(200, 220, 245, .65);
}
.gl-config-actions--inline{
  display:flex;
  gap:.5rem;
  flex-wrap:wrap;
  align-items:center;
  margin-top:.75rem;
}
.gl-faculty-preview{
  margin:.4rem 0 0;
  padding-left:1.25rem;
  font-size:0.675rem;
  color:rgba(224, 240, 255, .85);
}
.gl-faculty-preview li{margin:.2rem 0;}
.gl-faculty-preview[hidden]{display:none;}

.gl-config-actions{
  display:flex;
  flex-wrap:wrap;
  align-items:center;
  gap:.75rem;
}
.gl-faculty-builder{
  display:flex;
  flex-direction:column;
  gap:clamp(.75rem, 1.4vw, 1rem);
  padding:0.5vw;
  border-radius:.9rem;
  border:1px solid rgba(130, 170, 210, .18);
  background:rgba(12, 26, 44, .55);
  box-shadow:0 14px 32px rgba(5, 12, 24, .35);
}
.gl-faculty-builder-header{
  display:flex;
  flex-wrap:wrap;
  align-items:flex-start;
  gap:.75rem;
  justify-content:space-between;
}
.gl-faculty-builder-note{
  margin:0;
  flex:1 1 16rem;
  font-size:0.6rem;
  color:rgba(200, 225, 255, .68);
}
.gl-faculty-empty{
  margin:0;
  font-size:0.6375rem;
  color:rgba(195, 220, 250, .75);
  border:1px dashed rgba(135, 170, 215, .38);
  padding:.85rem;
  border-radius:.8rem;
  background:rgba(10, 24, 42, .55);
}
.gl-faculty-empty[hidden]{
  display:none !important;
}
.gl-faculty-list{
  display:grid;
  gap:clamp(.9rem, 1.6vw, 1.25rem);
}
.gl-faculty-card{
  display:flex;
  flex-direction:column;
  gap:clamp(.75rem, 1.4vw, 1.05rem);
  border:1px solid rgba(120, 160, 210, .25);
  border-radius:.95rem;
  padding:0.5vw;
  background:rgba(8, 20, 36, .78);
  box-shadow:0 10px 26px rgba(4, 10, 24, .45);
}
.gl-faculty-card-header{
  display:flex;
  flex-wrap:wrap;
  align-items:flex-start;
  justify-content:space-between;
  gap:.75rem;
}
.gl-faculty-card-title{
  flex:1 1 14rem;
}
.gl-faculty-card-actions{
  display:flex;
  align-items:center;
  gap:.4rem;
}
.gl-faculty-field{
  display:flex;
  flex-direction:column;
  gap:.4rem;
  margin-bottom: 0.5vh;
}
.gl-faculty-label{
  font-size:0.6375rem;
  color:rgba(210, 235, 255, .78);
  display:flex;
  flex-direction:column;
  gap:.35rem;
}
.gl-faculty-hint{
  margin:0;
  font-size:0.5625rem;
  color:rgba(190, 215, 245, .6);
}
.gl-faculty-checkbox{
  display:inline-flex;
  align-items:center;
  gap:.4rem;
  font-size:0.6rem;
  color:rgba(200, 225, 255, .74);
}
.gl-faculty-level-root{
  display:flex;
  flex-direction:column;
  gap:clamp(.7rem, 1.3vw, .95rem);
}
.gl-faculty-level{
  display:flex;
  flex-direction:column;
  gap:.65rem;
  border:1px solid rgba(115, 155, 205, .2);
  border-radius:.85rem;
  padding:0.5vw;
  background:rgba(10, 26, 46, .65);
}
.gl-faculty-level-header{
  display:flex;
  flex-wrap:wrap;
  gap:.6rem;
  align-items:center;
  justify-content:space-between;
}
.gl-faculty-options{
  display:grid;
  gap:clamp(.65rem, 1.1vw, .85rem);
}
.gl-faculty-level-footer{
  display:flex;
  flex-wrap:wrap;
  gap:.5rem;
}
.gl-faculty-option{
  display:flex;
  flex-direction:column;
  gap:0.5vh;
  border:1px solid rgba(110, 150, 210, .22);
  border-radius:.8rem;
  padding:0.5vw;
  background:rgba(6, 18, 32, .7);
}
.gl-faculty-option-header{
  display:flex;
  flex-wrap:wrap;
  gap:.55rem;
  align-items:flex-start;
  justify-content:space-between;
}
.gl-faculty-option-footer{
  display:flex;
  flex-wrap:wrap;
  gap:.5rem;
}
.gl-faculty-option-children{
  display:flex;
  flex-direction:column;
  gap:.6rem;
  border-left:2px solid rgba(90, 140, 200, .45);
  padding-left:1vw;
  margin-left:0.5vw;
}
.gl-faculty-option-children .gl-faculty-level{
  margin-top:.1rem;
}
.gl-faculty-option-footer .btn{
  padding:.5rem .85rem;
}
.gl-faculty-card-actions .btn,
.gl-faculty-level-footer .btn{
  padding:.55rem .9rem;
}
.gl-faculty-card-actions .btn-ghost{
  background:rgba(20, 32, 52, .55);
}
.gl-faculty-card-actions .btn-danger{
  min-width:3.8rem;
}
.gl-faculty-card .input{
  min-height:2.4rem;
}

.gl-card-note{
  margin:0;
  color:rgba(200, 225, 255, .7);
}

.gl-card-tools{
  display:flex;
  align-items:center;
  gap:.5rem;
}

.gl-application-views{
  display:flex;
  flex-direction:column;
  gap:clamp(.85rem, 1.6vw, 1.2rem);
}
.gl-application-view-tabs{
  display:flex;
  flex-wrap:wrap;
  gap:.6rem;
}
.gl-application-view-tab{
  font-size:75%;
  padding:.45rem 1.1rem;
  border-radius:999px;
  border:1px solid rgba(80, 110, 150, .55);
  background:rgba(12, 24, 40, .6);
  color:rgba(200, 225, 255, .75);
  font-weight:600;
  cursor:pointer;
  transition:background .18s ease, color .18s ease, border-color .18s ease, box-shadow .18s ease;
}
.gl-application-view-tab:disabled{
  cursor:not-allowed;
  opacity:.45;
  box-shadow:none;
}
.gl-application-view-tab.is-active,
.gl-application-view-tab[aria-selected="true"]{
  color:#e8f4ff;
  border-color:rgba(90, 180, 255, .6);
  background:linear-gradient(180deg, rgba(40, 150, 255, .28), rgba(18, 90, 160, .24));
  box-shadow:0 12px 24px rgba(0, 0, 0, .3);
}
.gl-application-view-tab:focus-visible{
  outline:2px solid rgba(90, 190, 255, .8);
  outline-offset:3px;
}
.gl-application-view{
  display:flex;
  flex-direction:column;
  gap:clamp(.75rem, 1.4vw, 1.05rem);
}
.gl-application-view[hidden]{
  display:none !important;
}
.gl-applicant-matrix-container{
  display:flex;
  flex-direction:column;
  gap:clamp(.75rem, 1.5vw, 1.15rem);
}
.gl-applicant-matrix-wrapper{
  border:1px solid rgba(120, 160, 200, .26);
  border-radius:1rem;
  background:linear-gradient(180deg, rgba(10, 24, 42, .82), rgba(6, 18, 34, .9));
  box-shadow:0 18px 36px rgba(4, 12, 28, .35);
  overflow:hidden;
}
.gl-applicant-matrix-scroll{
  overflow-x:auto;
  max-width:100%;
}
.gl-applicant-matrix{
  width:100%;
  min-width:720px;
  border-collapse:separate;
  border-spacing:0;
  color:#e6f1ff;
}
.gl-applicant-matrix thead th{
  text-align:left;
  font-weight:600;
  font-size:0.7125rem;
  padding:clamp(.75rem, 1.4vw, 1rem) clamp(.8rem, 1.5vw, 1.1rem);
  border-bottom:1px solid rgba(120, 160, 200, .25);
  background:rgba(20, 40, 70, .65);
}
.gl-applicant-matrix__header--applicant{
  min-width:18rem;
  border-right:1px solid rgba(120, 160, 200, .18);
  position:sticky;
  left:0;
  z-index:3;
  box-shadow:12px 0 18px rgba(4, 12, 26, .35);
}
.gl-applicant-matrix__header--schedule{
  text-align:center;
}
.gl-applicant-matrix__schedule{
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:.2rem;
}
.gl-applicant-matrix__schedule-label{
  font-size:0.7125rem;
}
.gl-applicant-matrix__schedule-date{
  font-size:0.585rem;
  color:rgba(200, 225, 255, .72);
}
.gl-applicant-matrix__row th,
.gl-applicant-matrix__row td{
  padding:clamp(.75rem, 1.6vw, 1.1rem) clamp(.8rem, 1.5vw, 1.15rem);
  vertical-align:top;
  border-bottom:1px solid rgba(120, 160, 200, .18);
  background:rgba(8, 20, 36, .78);
}
.gl-applicant-matrix__row:nth-child(even) th,
.gl-applicant-matrix__row:nth-child(even) td{
  background:rgba(8, 20, 36, .9);
}
.gl-applicant-matrix__applicant{
  min-width:18rem;
  border-right:1px solid rgba(120, 160, 200, .18);
  position:sticky;
  left:0;
  z-index:2;
  box-shadow:12px 0 18px rgba(4, 12, 26, .35);
}
.gl-applicant-matrix__identity-header{
  display:flex;
  align-items:flex-start;
  justify-content:space-between;
  flex-wrap:wrap;
  gap:.5rem;
}
.gl-applicant-matrix__identity{
  display:flex;
  flex-direction:column;
  gap:.25rem;
}
.gl-grade-badge{
  display:inline-flex;
  align-items:center;
  padding:.32rem .7rem;
  border-radius:999px;
  font-size:0.585rem;
  font-weight:600;
  letter-spacing:.01em;
  background:rgba(58, 102, 160, .28);
  color:rgba(220, 238, 255, .9);
}
.gl-grade-badge--year1{background:rgba(70, 130, 220, .32);color:rgba(230, 242, 255, .95);}
.gl-grade-badge--year2{background:rgba(64, 170, 170, .32);color:rgba(225, 245, 245, .95);}
.gl-grade-badge--year3{background:rgba(110, 170, 110, .32);color:rgba(235, 250, 235, .95);}
.gl-grade-badge--year4{background:rgba(200, 150, 80, .32);color:rgba(255, 244, 230, .95);}
.gl-grade-badge--year5{background:rgba(170, 110, 190, .34);color:rgba(245, 235, 255, .96);}
.gl-grade-badge--year6{background:rgba(205, 90, 115, .34);color:rgba(255, 235, 240, .95);}
.gl-grade-badge--other{background:rgba(100, 120, 150, .34);color:rgba(225, 235, 245, .92);}
.gl-applicant-matrix__name{
  font-size:clamp(0.7875rem, 1.275vw, 0.915rem);
  font-weight:700;
  color:#f0f6ff;
}
.gl-applicant-matrix__phonetic{
  font-size:0.615rem;
  color:rgba(200, 225, 255, .7);
}
.gl-applicant-matrix__grade{margin-left:auto;}
.gl-applicant-matrix__meta{
  margin:.65rem 0 0;
  display:grid;
  grid-template-columns:auto 1fr;
  column-gap:.65rem;
  row-gap:.3rem;
}
.gl-applicant-matrix__meta-label{
  font-size:0.57rem;
  color:rgba(175, 205, 235, .7);
}
.gl-applicant-matrix__meta-value{
  font-size:0.66rem;
  color:rgba(220, 240, 255, .9);
  word-break:break-word;
}
.gl-applicant-matrix__note{
  margin:.65rem 0 0;
  font-size:0.615rem;
  line-height:1.55;
  color:rgba(210, 230, 255, .9);
  white-space:pre-wrap;
}
.gl-applicant-matrix__cell{
  border-right:1px solid rgba(120, 160, 200, .14);
  min-width:12rem;
}
.gl-applicant-matrix__row td:last-child{
  border-right:none;
}
.gl-applicant-matrix__cell-content{
  display:flex;
  flex-direction:column;
  gap:.65rem;
}
.gl-applicant-matrix__cell-header{
  display:flex;
  flex-wrap:wrap;
  align-items:center;
  gap:.45rem;
}
.gl-applicant-matrix__response-badge{
  padding:.28rem .65rem;
  border-radius:.55rem;
  font-size:0.5625rem;
  font-weight:600;
  background:rgba(120, 140, 170, .32);
  color:rgba(215, 228, 242, .88);
}
.gl-applicant-matrix__response-badge--available{
  background:rgba(60, 110, 200, .38);
  color:rgba(225, 240, 255, .95);
}
.gl-applicant-matrix__response-badge--unavailable{
  background:rgba(190, 70, 90, .45);
  color:rgba(255, 225, 230, .96);
}
.gl-applicant-matrix__response-badge--staff{
  background:rgba(210, 160, 70, .4);
  color:rgba(255, 240, 220, .96);
}
.gl-applicant-matrix__response-badge--other{
  background:rgba(90, 130, 180, .36);
  color:rgba(220, 235, 250, .94);
}
.gl-applicant-matrix__response-badge--unknown{
  background:rgba(105, 125, 150, .32);
  color:rgba(205, 215, 230, .8);
}
.gl-applicant-matrix__assignment{
  display:flex;
  flex-direction:column;
  gap:.45rem;
}
.gl-applicant-matrix__select{
  width:100%;
}
.gl-applicant-matrix__updated{
  font-size:0.54rem;
  color:rgba(180, 210, 240, .72);
}
.gl-applicant-matrix__cell[data-matches-filter="false"]{
  opacity:.35;
}
.gl-applicant-matrix__cell[data-assignment-status="team"]{
  background:rgba(16, 34, 68, .88);
  border-color:rgba(90, 140, 220, .35);
}
.gl-applicant-matrix__cell[data-assignment-status="absent"]{
  background:rgba(60, 18, 28, .88);
  border-color:rgba(180, 70, 90, .38);
}
.gl-applicant-matrix__cell[data-assignment-status="staff"]{
  background:rgba(56, 36, 14, .88);
  border-color:rgba(190, 140, 60, .35);
}
.gl-applicant-matrix__cell[data-assignment-status="unavailable"]{
  background:rgba(26, 32, 48, .88);
  border-color:rgba(120, 150, 180, .28);
}
.gl-applicant-matrix__cell[data-assignment-status="pending"]{
  background:rgba(10, 24, 42, .88);
}
.gl-applicant-matrix__empty{
  margin:0;
  padding:1.4rem 1.1rem;
  border:1px dashed rgba(110, 150, 200, .45);
  border-radius:.9rem;
  color:rgba(200, 220, 245, .78);
  background:rgba(8, 20, 36, .7);
  text-align:center;
}

.gl-filter-label{
  font-size:0.6375rem;
  color:rgba(200, 225, 255, .7);
}

.gl-shift-board{
  display:flex;
  flex-direction:column;
  gap:clamp(1rem, 1.8vw, 1.4rem);
}

.gl-shift-section{
  border:1px solid rgba(110, 150, 190, .2);
  border-radius:.9rem;
  padding:clamp(1rem, 2vw, 1.4rem);
  background:rgba(10, 24, 40, .78);
  display:flex;
  flex-direction:column;
  gap:clamp(.85rem, 1.6vw, 1.2rem);
  box-shadow:0 18px 36px rgba(5, 14, 30, .32);
}

.gl-shift-section__header{
  display:flex;
  flex-wrap:wrap;
  align-items:flex-end;
  justify-content:space-between;
  gap:.65rem;
}

.gl-shift-section__title{
  margin:0;
  font-size:0.7875rem;
  color:#e6f3ff;
}

.gl-shift-section__meta{
  margin:0;
  font-size:0.6rem;
  color:rgba(195, 220, 250, .65);
}

.gl-shift-section__count{
  font-size:0.6375rem;
  color:rgba(200, 225, 250, .7);
  margin-left:auto;
}

.gl-shift-table{
  display:flex;
  flex-direction:column;
  gap:clamp(.85rem, 1.5vw, 1.2rem);
}

.gl-shift-columns{
  display:grid;
  gap:clamp(.85rem, 1.4vw, 1.15rem);
  grid-template-columns:repeat(auto-fit, minmax(15.5rem, 1fr));
  align-items:start;
}

.gl-shift-column{
  border:1px solid rgba(110, 150, 190, .24);
  border-radius:.75rem;
  background:rgba(12, 28, 48, .68);
  padding:clamp(.75rem, 1.5vw, 1.05rem);
  display:flex;
  flex-direction:column;
  gap:.7rem;
  min-height:100%;
}

.gl-shift-column[data-variant="team"]{
  background:rgba(10, 32, 54, .72);
  border-color:rgba(120, 200, 255, .28);
}

.gl-shift-column[data-variant="unassigned"]{
  border-style:dashed;
  border-color:rgba(145, 190, 240, .35);
  background:rgba(14, 30, 52, .6);
}

.gl-shift-column[data-variant="absent"]{
  border-color:rgba(255, 154, 168, .55);
  background:rgba(84, 24, 40, .55);
}

.gl-shift-column[data-variant="staff"]{
  border-color:rgba(255, 205, 140, .55);
  background:rgba(68, 40, 10, .55);
}

.gl-shift-column[data-variant="unavailable"]{
  border-color:rgba(160, 190, 220, .28);
  background:rgba(20, 28, 42, .6);
}

.gl-shift-column__header{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:.5rem;
}

.gl-shift-column__title{
  margin:0;
  font-size:0.7125rem;
  color:#e2f0ff;
}

.gl-shift-column__count{
  font-size:0.585rem;
  color:rgba(200, 225, 255, .65);
}

.gl-shift-column__body{
  display:flex;
  flex-direction:column;
  gap:.6rem;
}

.gl-shift-column__empty{
  margin:0;
  font-size:0.585rem;
  padding:.65rem .75rem;
  border-radius:.6rem;
  background:rgba(14, 32, 52, .6);
  color:rgba(195, 220, 245, .55);
  text-align:center;
}

.gl-shift-entry{
  border:1px solid rgba(120, 160, 205, .26);
  border-radius:.7rem;
  background:rgba(8, 20, 36, .78);
  padding:.75rem;
  display:flex;
  flex-direction:column;
  gap:.6rem;
  box-shadow:0 12px 26px rgba(5, 14, 32, .28);
}

.gl-shift-entry[data-assignment-status="team"]{
  border-color:rgba(122, 230, 255, .4);
  background:rgba(8, 36, 54, .85);
}

.gl-shift-entry[data-assignment-status="absent"]{
  border-color:rgba(255, 160, 180, .45);
  background:rgba(70, 18, 32, .7);
}

.gl-shift-entry[data-assignment-status="staff"]{
  border-color:rgba(255, 210, 150, .45);
  background:rgba(74, 44, 14, .68);
}

.gl-shift-entry[data-assignment-status="unavailable"]{
  border-color:rgba(150, 180, 210, .3);
  background:rgba(18, 26, 38, .75);
}

.gl-shift-entry__header{
  display:flex;
  justify-content:space-between;
  gap:.5rem;
  align-items:flex-start;
}

.gl-shift-entry__identity{
  display:flex;
  flex-direction:column;
  gap:.15rem;
}

.gl-shift-entry__name{font-weight:600;color:#f0f7ff;}
.gl-shift-entry__phonetic{font-size:0.615rem;color:rgba(205, 225, 250, .68);}
.gl-shift-entry__grade{margin-left:auto;}

.gl-shift-entry__info{
  margin:0;
  padding:0;
  list-style:none;
  display:flex;
  flex-direction:column;
  gap:.35rem;
}

.gl-shift-entry__info-item{
  display:flex;
  gap:.35rem;
  font-size:0.585rem;
  color:rgba(205, 225, 245, .78);
  flex-wrap:wrap;
}

.gl-shift-entry__info-label{
  font-weight:600;
  color:rgba(210, 232, 255, .85);
}

.gl-shift-entry__info-value{
  color:rgba(220, 240, 255, .9);
}

.gl-shift-entry__note{
  margin:0;
  font-size:0.585rem;
  color:rgba(215, 235, 255, .75);
  background:rgba(18, 42, 66, .55);
  border-radius:.55rem;
  padding:.45rem .6rem;
}

.gl-shift-entry__controls{
  display:flex;
  flex-wrap:wrap;
  align-items:center;
  gap:.5rem .75rem;
}

.gl-shift-entry__assignment{
  display:flex;
  align-items:center;
  gap:.45rem;
  font-size:0.615rem;
  color:rgba(210, 230, 255, .85);
}

.gl-shift-entry__assignment-text{font-weight:600;}

.gl-shift-entry__assignment .input{min-width:11rem;}

.gl-shift-entry__updated{
  font-size:0.54rem;
  color:rgba(195, 220, 245, .65);
}

.embedded-tool__surface.operator-embedded,
.embedded-tool__surface.qa-embedded{
  padding:0;
  border:none;
  background:none;
  box-shadow:none;
  border-radius:0;
  min-height:0;
  gap:clamp(.75rem, 1.6vw, 1.15rem);
  overflow:visible;
  height:100%;
}

.events-layout{
  padding:0;
  border:none;
  border-radius:0;
  background:none;
  box-shadow:none;
  backdrop-filter:none;
}

#op-dictionary-panel .dictionary-body,
#op-logs-panel .logs-body{
  padding:0;
  border:none;
  border-radius:0;
  background:none;
  box-shadow:none;
  backdrop-filter:none;
  gap:clamp(.75rem, 1.6vw, 1.15rem);
}

#op-dictionary-panel{
  position:relative;
}

#op-dictionary-panel .dictionary-form,
#op-logs-panel .logs-toolbar{
  padding:0;
  border:none;
  border-radius:0;
  background:none;
  box-shadow:none;
  gap:clamp(.45rem, 1vw, .7rem);
}

#op-add-term-form.dictionary-form{
  padding:0;
}

#op-logs-toolbar.logs-toolbar{
  padding:0;
}

#op-dictionary-panel .cards-scroll,
#op-logs-panel #op-logs-stream-view{
  padding:0;
  border:none;
  border-radius:0;
  background:none;
  box-shadow:none;
}

.side-telop-panel {
  margin: 0;
  padding: 1.1rem;
  border-radius: 1.1rem;
  background:
    radial-gradient(circle at 18% 22%, rgba(255, 255, 255, 0.08), transparent 50%),
    linear-gradient(160deg, rgba(54, 82, 131, 0.45), rgba(17, 22, 35, 0.95));
  border: 1px solid rgba(255, 255, 255, 0.07);
  box-shadow: 0 16px 38px rgba(0, 0, 0, 0.25);
  display: flex;
  flex-direction: column;
  gap: clamp(0.75rem, 1.2vw, 1rem);
  flex: 1 1 auto;
  min-height: 0;
  max-height: 100%;
  overflow: auto;
  scrollbar-gutter: stable;
  scrollbar-width: thin;
  scrollbar-color: rgba(108, 132, 168, 0.6) rgba(18, 24, 38, 0.7);
}

.side-telop-panel::-webkit-scrollbar { width: 10px; }
.side-telop-panel::-webkit-scrollbar-track {
  background: rgba(10, 16, 26, 0.7);
  border-radius: 999px;
}

.side-telop-panel::-webkit-scrollbar-thumb {
  background: linear-gradient(180deg, rgba(46, 141, 255, 0.5), rgba(30, 200, 255, 0.35));
  border-radius: 999px;
  border: 2px solid rgba(9, 14, 24, 0.9);
}

.side-telop-panel::-webkit-scrollbar-thumb:hover {
  background: linear-gradient(180deg, rgba(46, 141, 255, 0.7), rgba(30, 200, 255, 0.5));
}

.side-telop-panel__header {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: 1rem;
  flex-wrap: wrap;
}

.side-telop-panel__heading h2 {
  margin: 0;
  font-size: 0.7875rem;
  letter-spacing: 0.01em;
}

.side-telop-panel__description {
  margin: 0.35rem 0 0;
  color: #dfe6fb;
  line-height: 1.55;
  font-size: 0.725rem;
}

.side-telop-panel__body {
  margin: 0;
  padding: 0.9rem;
  border-radius: 0.9rem;
  background: rgba(9, 12, 20, 0.45);
  border: 1px solid rgba(255, 255, 255, 0.06);
}

.side-telop-list {
  list-style: none;
  margin: 0;
  padding: 0;
  display: flex;
  flex-direction: column;
  gap: 0.8rem;
}

.side-telop-item {
  padding: 0.95rem;
  border: 1px solid rgba(255, 255, 255, 0.07);
  border-radius: 0.9rem;
  background: linear-gradient(150deg, rgba(255, 255, 255, 0.03), rgba(255, 255, 255, 0));
  backdrop-filter: blur(4px);
  transition: border-color 0.2s ease, box-shadow 0.2s ease, background 0.2s ease;
  cursor: pointer;
}

.side-telop-item:focus-within,
.side-telop-item.is-selected {
  border-color: rgba(62, 177, 255, 0.8);
  box-shadow: 0 14px 32px rgba(0, 0, 0, 0.28), inset 0 0 0 1px rgba(62, 177, 255, 0.28);
  background: radial-gradient(circle at 12% 20%, rgba(62, 177, 255, 0.08), transparent 55%),
    linear-gradient(135deg, rgba(62, 177, 255, 0.08), rgba(255, 255, 255, 0.02));
}

.side-telop-item.is-active {
  border-color: rgba(239, 68, 68, 0.6);
  box-shadow: 0 12px 32px rgba(127, 0, 0, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.05);
  background: linear-gradient(180deg, rgba(86, 16, 24, 0.92), rgba(45, 10, 14, 0.96));
  color: #ffe4e6;
}

.side-telop-item__header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 0.85rem;
}

.side-telop-item__number {
  font-weight: 700;
  color: #a9d6ff;
  font-size: 0.7125rem;
}

.side-telop-item__text {
  margin: 0.4rem 0 0;
  white-space: pre-wrap;
  word-break: break-word;
  font-size: 0.725rem;
  line-height: 1.62;
}

.side-telop-item__activate {
  margin-left: auto;
  display: inline-flex;
  align-items: center;
  gap: 0.4rem;
  padding: 0.4rem 0.75rem;
  border-radius: 0.65rem;
  border: 1px solid rgba(62, 177, 255, 0.35);
  color: #e8f6ff;
  background: linear-gradient(120deg, rgba(62, 177, 255, 0.35), rgba(29, 203, 255, 0.15));
  font-weight: 700;
  font-size: 0.675rem;
  letter-spacing: 0.01em;
  cursor: pointer;
  transition: transform 0.15s ease, box-shadow 0.15s ease, border-color 0.15s ease, background 0.15s ease;
}

.side-telop-item.is-active .side-telop-item__activate,
.side-telop-item.is-active .side-telop-item__activate:disabled {
  opacity: 1;
  border-color: rgba(248, 113, 113, 0.65);
  background: linear-gradient(120deg, rgba(248, 113, 113, 0.32), rgba(239, 68, 68, 0.2));
  color: #ffe4e6;
}

.side-telop-item__activate:hover:not(:disabled) {
  transform: translateY(-1px);
  box-shadow: 0 10px 24px rgba(0, 0, 0, 0.25), 0 0 0 1px rgba(62, 177, 255, 0.4);
  background: linear-gradient(120deg, rgba(62, 177, 255, 0.55), rgba(29, 203, 255, 0.25));
}

.side-telop-item__activate:active:not(:disabled) {
  transform: translateY(0);
  box-shadow: 0 5px 14px rgba(0, 0, 0, 0.22);
}

.side-telop-item__activate:disabled {
  opacity: 0.65;
  cursor: not-allowed;
  border-color: rgba(255, 255, 255, 0.12);
  background: rgba(255, 255, 255, 0.06);
  color: #c7d3e8;
}

.side-telop-item__activate span {
  display: inline-flex;
  align-items: center;
}

.side-telop-empty {
  margin: 0;
  padding: 0.5rem 0.35rem;
  color: #d7d9e3;
  font-size: 0.7125rem;
}

.side-telop-form label {
  display: block;
  margin-bottom: 0.35rem;
  font-weight: 600;
  color: #e8eaf6;
}

.side-telop-form__actions {
  margin-top: 0.75rem;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 0.75rem;
  flex-wrap: wrap;
}

.side-telop-form__toolbar,
.side-telop-form__submit {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  flex-wrap: wrap;
}

.side-telop-selection {
  color: #b8c2d6;
  font-size: 0.675rem;
}

@media (max-width: 640px){
  .flow-progress{
    gap:.25rem;
  }

  .flow-progress__item{
    padding:.16rem .45rem;
  }

  .flow-stage__title{
    font-size:1.0875rem;
  }

  .tool-embed__frame{
    min-height:420px;
  }

  .embedded-tool__surface{
    min-height:min(60vh, 40rem);
  }
}
